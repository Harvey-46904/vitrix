/*! For license information please see app.js.LICENSE.txt */
(()=>{var e,t={7173:(e,t,r)=>{"use strict";function i(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function n(){const e=i();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=i,t.getSubtleCrypto=n,t.isBrowserCryptoAvailable=function(){return!!i()&&!!n()}},1089:(e,t,r)=>{"use strict";var i=r(5606);function n(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==i&&void 0!==i.versions&&void 0!==i.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=n,t.isNode=s,t.isBrowser=function(){return!n()&&!s()}},5682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(8186);i.__exportStar(r(7173),t),i.__exportStar(r(1089),t)},8186:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>_,__await:()=>m,__awaiter:()=>u,__classPrivateFieldGet:()=>x,__classPrivateFieldSet:()=>O,__createBinding:()=>l,__decorate:()=>a,__exportStar:()=>f,__extends:()=>n,__generator:()=>d,__importDefault:()=>I,__importStar:()=>S,__makeTemplateObject:()=>E,__metadata:()=>h,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>b,__spreadArrays:()=>y,__values:()=>p});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}function a(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,i){t(r,i,e)}}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function l(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise((function(r,i){s.push([e,t,r,i])>1||a(e,t)}))})}function a(e,t){try{(r=n[e](t)).value instanceof m?Promise.resolve(r.value.v).then(c,h):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function h(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:m(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(i,n){(function(e,t,r,i){Promise.resolve(i).then((function(t){e({value:t,done:r})}),t)})(i,n,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},796:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},9026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(584);i.__exportStar(r(9244),t),i.__exportStar(r(1861),t)},9244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},1861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},8900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(584);i.__exportStar(r(9606),t),i.__exportStar(r(9883),t),i.__exportStar(r(2010),t),i.__exportStar(r(9026),t)},2010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(584).__exportStar(r(3093),t)},3093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;t.IWatch=class{}},221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const i=r(9026);t.toMiliseconds=function(e){return e*i.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/i.ONE_THOUSAND)}},2985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},9606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(584);i.__exportStar(r(2985),t),i.__exportStar(r(221),t)},9883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},584:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>_,__await:()=>m,__awaiter:()=>u,__classPrivateFieldGet:()=>x,__classPrivateFieldSet:()=>O,__createBinding:()=>l,__decorate:()=>a,__exportStar:()=>f,__extends:()=>n,__generator:()=>d,__importDefault:()=>I,__importStar:()=>S,__makeTemplateObject:()=>E,__metadata:()=>h,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>b,__spreadArrays:()=>y,__values:()=>p});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}function a(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,i){t(r,i,e)}}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function l(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise((function(r,i){s.push([e,t,r,i])>1||a(e,t)}))})}function a(e,t){try{(r=n[e](t)).value instanceof m?Promise.resolve(r.value.v).then(c,h):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function h(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:m(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(i,n){(function(e,t,r,i){Promise.resolve(i).then((function(t){e({value:t,done:r})}),t)})(i,n,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},8196:(e,t)=>{"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function i(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=i,t.getDocumentOrThrow=function(){return i("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return i("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return i("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return i("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return i("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},2063:(e,t,r)=>{"use strict";t.g=void 0;const i=r(8196);t.g=function(){let e,t;try{e=i.getDocumentOrThrow(),t=i.getLocationOrThrow()}catch(e){return null}function r(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const i=r[e],n=["itemprop","property","name"].map((e=>i.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(n.length&&n){const e=i.getAttribute("content");if(e)return e}}return""}const n=function(){let t=r("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:r("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const r=e.getElementsByTagName("link"),i=[];for(let e=0;e<r.length;e++){const n=r[e],s=n.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){const e=n.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const i=t.pathname.split("/");i.pop();r+=i.join("/")+"/"+e}i.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;i.push(r)}else i.push(e)}}return i}(),name:n}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,s=a(e),o=s[0],c=s[1],h=new n(function(e,t,r){return 3*(t+r)/4-r}(0,o,c)),u=0,d=c>0?o-4:o;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],h[u++]=t>>16&255,h[u++]=t>>8&255,h[u++]=255&t;2===c&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,h[u++]=255&t);1===c&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,h[u++]=t>>8&255,h[u++]=255&t);return h},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,s=[],o=16383,a=0,h=i-n;a<h;a+=o)s.push(c(e,a,a+o>h?h:a+o));1===n?(t=e[i-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,i){for(var n,s,o=[],a=t;a<i;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=n)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},5037:(e,t,r)=>{var i;function n(e){this.rand=e}if(e.exports=function(e){return i||(i=new n(null)),i.generate(e)},e.exports.Rand=n,n.prototype.generate=function(e){return this._rand(e)},n.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=r(3776);if("function"!=typeof s.randomBytes)throw new Error("Not supported");n.prototype._rand=function(e){return s.randomBytes(e)}}catch(e){}},8287:(e,t,r)=>{"use strict";var i=r(7526),n=r(251),s=r(4634);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return h(this,e,t,r)}function h(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=l(e,t);return e}(e,t,r,i):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(t,r);e=a(e,i);var n=e.write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|f(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):l(e,t);if("Buffer"===t.type&&s(t.data))return l(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=a(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t){var r=t.length<0?0:0|f(t.length);e=a(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(i)return B(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function y(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:m(e,t,r,i,n);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,i,n){var s,o=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function h(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var u=-1;for(s=r;s<a;s++)if(h(e,s)===h(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===c)return u*o}else-1!==u&&(s-=s-u),u=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){for(var d=!0,l=0;l<c;l++)if(h(e,s+l)!==h(t,l)){d=!1;break}if(d)return s}return-1}function v(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function w(e,t,r,i){return V(B(t,e.length-r),e,r,i)}function _(e,t,r,i){return V(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function E(e,t,r,i){return _(e,t,r,i)}function S(e,t,r,i){return V($(t),e,r,i)}function I(e,t,r,i){return V(function(e,t){for(var r,i,n,s=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(r=e.charCodeAt(o))>>8,n=r%256,s.push(n),s.push(i);return s}(t,e.length-r),e,r,i)}function x(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,o,a,c,h=e[n],u=null,d=h>239?4:h>223?3:h>191?2:1;if(n+d<=r)switch(d){case 1:h<128&&(u=h);break;case 2:128==(192&(s=e[n+1]))&&(c=(31&h)<<6|63&s)>127&&(u=c);break;case 3:s=e[n+1],o=e[n+2],128==(192&s)&&128==(192&o)&&(c=(15&h)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(c=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),n+=d}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=A));return r}(i)}t.hp=c,t.IS=50,c.TYPED_ARRAY_SUPPORT=void 0!==r.g.TYPED_ARRAY_SUPPORT?r.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return h(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,i){return u(t),t<=0?a(e,t):void 0!==r?"string"==typeof i?a(e,t).fill(r,i):a(e,t).fill(r):a(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=c.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.IS;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,i,n){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(n>>>=0)-(i>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),h=this.slice(i,n),u=e.slice(t,r),d=0;d<a;++d)if(h[d]!==u[d]){s=h[d],o=u[d];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return _(this,e,t,r);case"latin1":case"binary":return E(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function P(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function M(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function k(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=t;s<r;++s)n+=q(e[s]);return n}function T(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,i,n,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function N(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(e.length-r,2);n<s;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function L(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(e.length-r,4);n<s;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function j(e,t,r,i,n,s){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,i,s){return s||j(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function D(e,t,r,i,s){return s||j(e,0,r,8),n.write(e,t,r,i,52,8),r+8}c.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var n=t-e;r=new c(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},c.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,s=i-r;if(this===e&&r<t&&t<i)for(n=s-1;n>=0;--n)e[n+t]=this[n+r];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},c.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=c.isBuffer(e)?e:B(new c(e,i).toString()),a=o.length;for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var i=e.length,n=null,s=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function $(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}},6729:(e,t,r)=>{"use strict";var i=t;i.version=r(1636).rE,i.utils=r(7011),i.rand=r(5037),i.curve=r(894),i.curves=r(480),i.ec=r(7447),i.eddsa=r(8650)},6677:(e,t,r)=>{"use strict";var i=r(8490),n=r(7011),s=n.getNAF,o=n.getJSF,a=n.assert;function c(e,t){this.type=e,this.p=new i(t.p,16),this.red=t.prime?i.red(t.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=t.n&&new i(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function h(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r=e._getDoubles(),i=s(t,1,this._bitLength),n=(1<<r.step+1)-(r.step%2==0?2:1);n/=3;var o,c,h=[];for(o=0;o<i.length;o+=r.step){c=0;for(var u=o+r.step-1;u>=o;u--)c=(c<<1)+i[u];h.push(c)}for(var d=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=n;f>0;f--){for(o=0;o<h.length;o++)(c=h[o])===f?l=l.mixedAdd(r.points[o]):c===-f&&(l=l.mixedAdd(r.points[o].neg()));d=d.add(l)}return d.toP()},c.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,o=s(t,r,this._bitLength),c=this.jpoint(null,null,null),h=o.length-1;h>=0;h--){for(var u=0;h>=0&&0===o[h];h--)u++;if(h>=0&&u++,c=c.dblp(u),h<0)break;var d=o[h];a(0!==d),c="affine"===e.type?d>0?c.mixedAdd(n[d-1>>1]):c.mixedAdd(n[-d-1>>1].neg()):d>0?c.add(n[d-1>>1]):c.add(n[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,i,n){var a,c,h,u=this._wnafT1,d=this._wnafT2,l=this._wnafT3,f=0;for(a=0;a<i;a++){var p=(h=t[a])._getNAFPoints(e);u[a]=p.wnd,d[a]=p.points}for(a=i-1;a>=1;a-=2){var g=a-1,b=a;if(1===u[g]&&1===u[b]){var y=[t[g],null,null,t[b]];0===t[g].y.cmp(t[b].y)?(y[1]=t[g].add(t[b]),y[2]=t[g].toJ().mixedAdd(t[b].neg())):0===t[g].y.cmp(t[b].y.redNeg())?(y[1]=t[g].toJ().mixedAdd(t[b]),y[2]=t[g].add(t[b].neg())):(y[1]=t[g].toJ().mixedAdd(t[b]),y[2]=t[g].toJ().mixedAdd(t[b].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=o(r[g],r[b]);for(f=Math.max(v[0].length,f),l[g]=new Array(f),l[b]=new Array(f),c=0;c<f;c++){var w=0|v[0][c],_=0|v[1][c];l[g][c]=m[3*(w+1)+(_+1)],l[b][c]=0,d[g]=y}}else l[g]=s(r[g],u[g],this._bitLength),l[b]=s(r[b],u[b],this._bitLength),f=Math.max(l[g].length,f),f=Math.max(l[b].length,f)}var E=this.jpoint(null,null,null),S=this._wnafT4;for(a=f;a>=0;a--){for(var I=0;a>=0;){var x=!0;for(c=0;c<i;c++)S[c]=0|l[c][a],0!==S[c]&&(x=!1);if(!x)break;I++,a--}if(a>=0&&I++,E=E.dblp(I),a<0)break;for(c=0;c<i;c++){var O=S[c];0!==O&&(O>0?h=d[c][O-1>>1]:O<0&&(h=d[c][-O-1>>1].neg()),E="affine"===h.type?E.mixedAdd(h):E.add(h))}}for(a=0;a<i;a++)d[a]=null;return n?E:E.toP()},c.BasePoint=h,h.prototype.eq=function(){throw new Error("Not implemented")},h.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},h.prototype.encodeCompressed=function(e){return this.encode(e,!0)},h.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},h.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},h.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},h.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},h.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var s=0;s<e;s++)i=i.dbl();r.push(i)}return{step:e,points:r}},h.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},h.prototype._getBeta=function(){return null},h.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},1298:(e,t,r)=>{"use strict";var i=r(7011),n=r(8490),s=r(6698),o=r(6677),a=i.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new n(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function h(e,t,r,i,s){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(t,16),this.y=new n(r,16),this.z=i?new n(i,16):this.curve.one,this.t=s&&new n(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),s=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.c2),s=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},s(h,o.BasePoint),c.prototype.pointFromJSON=function(e){return h.fromJSON(this,e)},c.prototype.point=function(e,t,r,i){return new h(this,e,t,r,i)},h.fromJSON=function(e,t){return new h(e,t[0],t[1],t[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},h.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=i.redAdd(t),o=s.redSub(r),a=i.redSub(t),c=n.redMul(o),h=s.redMul(a),u=n.redMul(a),d=o.redMul(s);return this.curve.point(c,h,d,u)},h.prototype._projDbl=function(){var e,t,r,i,n,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var h=(i=this.curve._mulA(a)).redAdd(c);this.zOne?(e=o.redSub(a).redSub(c).redMul(h.redSub(this.curve.two)),t=h.redMul(i.redSub(c)),r=h.redSqr().redSub(h).redSub(h)):(n=this.z.redSqr(),s=h.redSub(n).redISub(n),e=o.redSub(a).redISub(c).redMul(s),t=h.redMul(i.redSub(c)),r=h.redMul(s))}else i=a.redAdd(c),n=this.curve._mulC(this.z).redSqr(),s=i.redSub(n).redSub(n),e=this.curve._mulC(o.redISub(i)).redMul(s),t=this.curve._mulC(i).redMul(a.redISub(c)),r=i.redMul(s);return this.curve.point(e,t,r)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(t),o=n.redSub(i),a=n.redAdd(i),c=r.redAdd(t),h=s.redMul(o),u=a.redMul(c),d=s.redMul(c),l=o.redMul(a);return this.curve.point(h,u,l,d)},h.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),n=i.redSqr(),s=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(s).redMul(o),c=n.redSub(a),h=n.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(o),d=i.redMul(c).redMul(u);return this.curve.twisted?(t=i.redMul(h).redMul(o.redSub(this.curve._mulA(s))),r=c.redMul(h)):(t=i.redMul(h).redMul(o.redSub(s)),r=this.curve._mulC(c).redMul(h)),this.curve.point(d,t,r)},h.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},h.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},h.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},h.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},h.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},894:(e,t,r)=>{"use strict";var i=t;i.base=r(6677),i.short=r(9188),i.mont=r(370),i.edwards=r(1298)},370:(e,t,r)=>{"use strict";var i=r(8490),n=r(6698),s=r(6677),o=r(7011);function a(e){s.call(this,"mont",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,r){s.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(t,16),this.z=new i(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(a,s),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},n(c,s.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),n=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),s=e.x.redSub(e.z).redMul(r),o=n.redMul(i),a=t.z.redMul(s.redAdd(o).redSqr()),c=t.x.redMul(s.redISub(o).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},9188:(e,t,r)=>{"use strict";var i=r(7011),n=r(8490),s=r(6698),o=r(6677),a=i.assert;function c(e){o.call(this,"short",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(e,t,r,i){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(t,16),this.y=new n(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,r,i){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(t,16),this.y=new n(r,16),this.z=new n(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new n(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)r=new n(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new n(e.a,16),b:new n(e.b,16)}})):this._getEndoBasis(r)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:n.mont(e),r=new n(2).toRed(t).redInvm(),i=r.redNeg(),s=new n(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(s).fromRed(),i.redSub(s).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,r,i,s,o,a,c,h,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),p=new n(1),g=new n(0),b=new n(0),y=new n(1),m=0;0!==l.cmpn(0);){var v=f.div(l);h=f.sub(v.mul(l)),u=b.sub(v.mul(p));var w=y.sub(v.mul(g));if(!i&&h.cmp(d)<0)t=c.neg(),r=p,i=h.neg(),s=u;else if(i&&2==++m)break;c=h,f=l,l=h,b=p,p=u,y=g,g=w}o=h.neg(),a=u;var _=i.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(_)>=0&&(o=t,a=r),i.negative&&(i=i.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:i,b:s},{a:o,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=n.mul(r.a),a=s.mul(i.a),c=n.mul(r.b),h=s.mul(i.b);return{k1:e.sub(o).sub(a),k2:c.add(h).neg()}},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),i[2*s]=a,i[2*s+1]=c,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var h=this._wnafMulAdd(1,i,n,2*s,r),u=0;u<2*s;u++)i[u]=null,n[u]=null;return h},s(h,o.BasePoint),c.prototype.point=function(e,t,r){return new h(this,e,t,r)},c.prototype.pointFromJSON=function(e,t){return h.fromJSON(this,e,t)},h.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(n))}},i},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},h.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(e){return e=new n(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},h.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},h.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},h.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},h.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(u,o.BasePoint),c.prototype.jpoint=function(e,t,r){return new u(this,e,t,r)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=i.redSub(n),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),u=h.redMul(a),d=i.redMul(h),l=c.redSqr().redIAdd(u).redISub(d).redISub(d),f=c.redMul(d.redISub(l)).redISub(s.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,f,p)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(i),a=n.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),h=c.redMul(o),u=r.redMul(c),d=a.redSqr().redIAdd(h).redISub(u).redISub(u),l=a.redMul(u.redISub(d)).redISub(n.redMul(h)),f=this.z.redMul(o);return this.curve.jpoint(d,l,f)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),h=o.redAdd(o);for(t=0;t<e;t++){var u=s.redSqr(),d=h.redSqr(),l=d.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(c)),p=s.redMul(d),g=f.redSqr().redISub(p.redAdd(p)),b=p.redISub(g),y=f.redMul(b);y=y.redIAdd(y).redISub(l);var m=h.redMul(a);t+1<e&&(c=c.redMul(l)),s=g,a=m,h=y}return this.curve.jpoint(s,h.redMul(n),a)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),c=a.redSqr().redISub(o).redISub(o),h=s.redIAdd(s);h=(h=h.redIAdd(h)).redIAdd(h),e=c,t=a.redMul(o.redISub(c)).redISub(h),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),l=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(u).redISub(l);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),g=p.redSqr(),b=l.redIAdd(l);b=(b=b.redIAdd(b)).redIAdd(b),e=g.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(b),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},u.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var h=s.redIAdd(s);h=(h=h.redIAdd(h)).redIAdd(h),t=a.redMul(o.redISub(c)).redISub(h),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),l=this.x.redMul(d),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=l.redIAdd(l),g=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var b=d.redSqr();b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b),t=f.redMul(p.redISub(e)).redISub(b)}return this.curve.jpoint(e,t,r)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(n)),c=t.redAdd(t),h=(c=c.redIAdd(c)).redMul(o),u=a.redSqr().redISub(h.redAdd(h)),d=h.redISub(u),l=o.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=a.redMul(d).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(u,f,p)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),s=n.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),c=i.redIAdd(i);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var h=n.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),u=t.redMul(h);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(a).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var l=this.y.redMul(h.redMul(c.redISub(h)).redISub(o.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(d,l,f)},u.prototype.mul=function(e,t){return e=new n(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},480:(e,t,r)=>{"use strict";var i,n=t,s=r(7952),o=r(894),a=r(7011).assert;function c(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new c(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=c,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=r(4011)}catch(e){i=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},7447:(e,t,r)=>{"use strict";var i=r(8490),n=r(2723),s=r(7011),o=r(480),a=r(5037),c=s.assert,h=r(1200),u=r(8545);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(o,e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new h(this,e)},d.prototype.keyFromPrivate=function(e,t){return h.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return h.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new i(2));;){var o=new i(t.generate(r));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},d.prototype._truncateToN=function(e,t,r){var n;if(i.isBN(e)||"number"==typeof e)n=(e=new i(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new i(e,16);else{var s=e.toString();n=s.length+1>>>1,e=new i(s,16)}"number"!=typeof r&&(r=8*n);var o=r-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,r,s){if("object"==typeof r&&(s=r,r=null),s||(s={}),"string"!=typeof e&&"number"!=typeof e&&!i.isBN(e)){c("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),c(e.length>>>0===e.length);for(var o=0;o<e.length;o++)c((255&e[o])===e[o])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,s.msgBitLength),c(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),h=t.getPrivate().toArray("be",a),d=e.toArray("be",a);c(new i(d).eq(e),"Can not sign message");for(var l=new n({hash:this.hash,entropy:h,nonce:d,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new i(1)),p=0;;p++){var g=s.k?s.k(p):new i(l.generate(this.n.byteLength()));if(!((g=this._truncateToN(g,!0)).cmpn(1)<=0||g.cmp(f)>=0)){var b=this.g.mul(g);if(!b.isInfinity()){var y=b.getX(),m=y.umod(this.n);if(0!==m.cmpn(0)){var v=g.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var w=(b.getY().isOdd()?1:0)|(0!==y.cmp(m)?2:0);return s.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),w^=1),new u({r:m,s:v,recoveryParam:w})}}}}}},d.prototype.verify=function(e,t,r,i,n){n||(n={}),e=this._truncateToN(e,!1,n.msgBitLength),r=this.keyFromPublic(r,i);var s=(t=new u(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),h=c.mul(e).umod(this.n),d=c.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(h,r.getPublic(),d)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(h,r.getPublic(),d)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},d.prototype.recoverPubKey=function(e,t,r,n){c((3&r)===r,"The recovery param is more than two bits"),t=new u(t,n);var s=this.n,o=new i(e),a=t.r,h=t.s,d=1&r,l=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");a=l?this.curve.pointFromX(a.add(this.curve.n),d):this.curve.pointFromX(a,d);var f=t.r.invm(s),p=s.sub(o).mul(f).umod(s),g=h.mul(f).umod(s);return this.g.mulAdd(p,a,g)},d.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new u(t,i)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(e,t,n)}catch(e){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")}},1200:(e,t,r)=>{"use strict";var i=r(8490),n=r(7011).assert;function s(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=s,s.fromPublic=function(e,t,r){return t instanceof s?t:new s(e,{pub:t,pubEnc:r})},s.fromPrivate=function(e,t,r){return t instanceof s?t:new s(e,{priv:t,privEnc:r})},s.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},s.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},s.prototype.derive=function(e){return e.validate()||n(e.validate(),"public point not validated"),e.mul(this.priv).getX()},s.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},s.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},8545:(e,t,r)=>{"use strict";var i=r(8490),n=r(7011),s=n.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(s(e.r&&e.s,"Signature without r or s"),this.r=new i(e.r,16),this.s=new i(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var r=e[t.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4)return!1;if(0===e[t.place])return!1;for(var n=0,s=0,o=t.place;s<i;s++,o++)n<<=8,n|=e[o],n>>>=0;return!(n<=127)&&(t.place=o,n)}function h(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}e.exports=o,o.prototype._importDER=function(e,t){e=n.toArray(e,t);var r=new a;if(48!==e[r.place++])return!1;var s=c(e,r);if(!1===s)return!1;if(s+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var o=c(e,r);if(!1===o)return!1;if(128&e[r.place])return!1;var h=e.slice(r.place,o+r.place);if(r.place+=o,2!==e[r.place++])return!1;var u=c(e,r);if(!1===u)return!1;if(e.length!==u+r.place)return!1;if(128&e[r.place])return!1;var d=e.slice(r.place,u+r.place);if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new i(h),this.s=new i(d),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=h(t),r=h(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];u(i,t.length),(i=i.concat(t)).push(2),u(i,r.length);var s=i.concat(r),o=[48];return u(o,s.length),o=o.concat(s),n.encode(o,e)}},8650:(e,t,r)=>{"use strict";var i=r(7952),n=r(480),s=r(7011),o=s.assert,a=s.parseBytes,c=r(6661),h=r(220);function u(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=n[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=i.sha512}e.exports=u,u.prototype.sign=function(e,t){e=a(e);var r=this.keyFromSecret(t),i=this.hashInt(r.messagePrefix(),e),n=this.g.mul(i),s=this.encodePoint(n),o=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),c=i.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:c,Rencoded:s})},u.prototype.verify=function(e,t,r){if(e=a(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var i=this.keyFromPublic(r),n=this.hashInt(t.Rencoded(),i.pubBytes(),e),s=this.g.mul(t.S());return t.R().add(i.pub().mul(n)).eq(s)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return s.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof h?e:new h(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=s.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),i=!!(128&e[t]),n=s.intFromLE(r);return this.curve.pointFromY(n,i)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return s.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},6661:(e,t,r)=>{"use strict";var i=r(7011),n=i.assert,s=i.parseBytes,o=i.cachedProperty;function a(e,t){this.eddsa=e,this._secret=s(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=s(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),o(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i})),o(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),o(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),o(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return n(this._secret,"KeyPair is public only"),i.encode(this.secret(),e)},a.prototype.getPublic=function(e){return i.encode(this.pubBytes(),e)},e.exports=a},220:(e,t,r)=>{"use strict";var i=r(8490),n=r(7011),s=n.assert,o=n.cachedProperty,a=n.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(s(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),s(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),o(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),o(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),o(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},4011:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},7011:(e,t,r)=>{"use strict";var i=t,n=r(8490),s=r(3349),o=r(4367);i.assert=s,i.toArray=o.toArray,i.zero2=o.zero2,i.toHex=o.toHex,i.encode=o.encode,i.getNAF=function(e,t,r){var i,n=new Array(Math.max(e.bitLength(),r)+1);for(i=0;i<n.length;i+=1)n[i]=0;var s=1<<t+1,o=e.clone();for(i=0;i<n.length;i++){var a,c=o.andln(s-1);o.isOdd()?(a=c>(s>>1)-1?(s>>1)-c:c,o.isubn(a)):a=0,n[i]=a,o.iushrn(1)}return n},i.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i,n=0,s=0;e.cmpn(-n)>0||t.cmpn(-s)>0;){var o,a,c=e.andln(3)+n&3,h=t.andln(3)+s&3;3===c&&(c=-1),3===h&&(h=-1),o=1&c?3!==(i=e.andln(7)+n&7)&&5!==i||2!==h?c:-c:0,r[0].push(o),a=1&h?3!==(i=t.andln(7)+s&7)&&5!==i||2!==c?h:-h:0,r[1].push(a),2*n===o+1&&(n=1-n),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r},i.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},i.parseBytes=function(e){return"string"==typeof e?i.toArray(e,"hex"):e},i.intFromLE=function(e){return new n(e,"hex","le")}},8490:function(e,t,r){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(9368).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function h(e,t,r,i){for(var n=0,s=Math.min(e.length,r),o=t;o<s;o++){var a=e.charCodeAt(o)-48;n*=i,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,r):(this._parseBase(e,t,n),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===r)for(n=e.length-1,s=0;n>=0;n-=3)o=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(n=0,s=0;n<e.length;n+=3)o=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,s=0,o=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=c(e,t,i)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=c(e,t,i)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var s=e.length-r,o=s%i,a=Math.min(s,s-o)+r,c=0,u=r;u<a;u+=i)c=h(e,u,u+i,t),this.imuln(n),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var d=1;for(c=h(e,u,e.length,t),u=0;u<o;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],s=0|t.words[0],o=n*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var h=1;h<i;h++){for(var u=c>>>26,d=67108863&c,l=Math.min(h,t.length-1),f=Math.max(0,h-e.length+1);f<=l;f++){var p=h-f|0;u+=(o=(n=0|e.words[p])*(s=0|t.words[f])+d)/67108864|0,d=67108863&o}r.words[h]=0|d,c=0|u}return 0!==c?r.words[h]=0|c:r.length--,r.strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<n|s)).toString(16);s=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,o--),r=0!==s||o!==this.length-1?u[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var h=d[e],f=l[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(e);r=(p=p.idivn(f)).isZero()?g+r:u[h-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return i(void 0!==o),this.toArrayLike(o,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){var n=this.byteLength(),s=r||Math.max(1,n);i(n<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var o,a,c="le"===t,h=new e(s),u=this.clone();if(c){for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),h[a]=o;for(;a<s;a++)h[a]=0}else{for(a=0;a<s-n;a++)h[a]=0;for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),h[s-a-1]=o}return h},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return i(!(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return i(!(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return i(!(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},s.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,s=0;s<i.length;s++)t=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&t,n=t>>>26;for(;0!==n&&s<r.length;s++)t=(0|r.words[s])+n,this.words[s]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var s=0,o=0;o<i.length;o++)s=(t=(0|r.words[o])-(0|i.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var i,n,s,o=e.words,a=t.words,c=r.words,h=0,u=0|o[0],d=8191&u,l=u>>>13,f=0|o[1],p=8191&f,g=f>>>13,b=0|o[2],y=8191&b,m=b>>>13,v=0|o[3],w=8191&v,_=v>>>13,E=0|o[4],S=8191&E,I=E>>>13,x=0|o[5],O=8191&x,A=x>>>13,P=0|o[6],M=8191&P,k=P>>>13,T=0|o[7],R=8191&T,C=T>>>13,N=0|o[8],L=8191&N,j=N>>>13,U=0|o[9],D=8191&U,z=U>>>13,q=0|a[0],B=8191&q,$=q>>>13,V=0|a[1],F=8191&V,K=V>>>13,H=0|a[2],W=8191&H,Y=H>>>13,G=0|a[3],J=8191&G,X=G>>>13,Z=0|a[4],Q=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ie=te>>>13,ne=0|a[6],se=8191&ne,oe=ne>>>13,ae=0|a[7],ce=8191&ae,he=ae>>>13,ue=0|a[8],de=8191&ue,le=ue>>>13,fe=0|a[9],pe=8191&fe,ge=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var be=(h+(i=Math.imul(d,B))|0)+((8191&(n=(n=Math.imul(d,$))+Math.imul(l,B)|0))<<13)|0;h=((s=Math.imul(l,$))+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(p,B),n=(n=Math.imul(p,$))+Math.imul(g,B)|0,s=Math.imul(g,$);var ye=(h+(i=i+Math.imul(d,F)|0)|0)+((8191&(n=(n=n+Math.imul(d,K)|0)+Math.imul(l,F)|0))<<13)|0;h=((s=s+Math.imul(l,K)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,B),n=(n=Math.imul(y,$))+Math.imul(m,B)|0,s=Math.imul(m,$),i=i+Math.imul(p,F)|0,n=(n=n+Math.imul(p,K)|0)+Math.imul(g,F)|0,s=s+Math.imul(g,K)|0;var me=(h+(i=i+Math.imul(d,W)|0)|0)+((8191&(n=(n=n+Math.imul(d,Y)|0)+Math.imul(l,W)|0))<<13)|0;h=((s=s+Math.imul(l,Y)|0)+(n>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(w,B),n=(n=Math.imul(w,$))+Math.imul(_,B)|0,s=Math.imul(_,$),i=i+Math.imul(y,F)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(m,F)|0,s=s+Math.imul(m,K)|0,i=i+Math.imul(p,W)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,Y)|0;var ve=(h+(i=i+Math.imul(d,J)|0)|0)+((8191&(n=(n=n+Math.imul(d,X)|0)+Math.imul(l,J)|0))<<13)|0;h=((s=s+Math.imul(l,X)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(S,B),n=(n=Math.imul(S,$))+Math.imul(I,B)|0,s=Math.imul(I,$),i=i+Math.imul(w,F)|0,n=(n=n+Math.imul(w,K)|0)+Math.imul(_,F)|0,s=s+Math.imul(_,K)|0,i=i+Math.imul(y,W)|0,n=(n=n+Math.imul(y,Y)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,Y)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(g,J)|0,s=s+Math.imul(g,X)|0;var we=(h+(i=i+Math.imul(d,Q)|0)|0)+((8191&(n=(n=n+Math.imul(d,ee)|0)+Math.imul(l,Q)|0))<<13)|0;h=((s=s+Math.imul(l,ee)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(O,B),n=(n=Math.imul(O,$))+Math.imul(A,B)|0,s=Math.imul(A,$),i=i+Math.imul(S,F)|0,n=(n=n+Math.imul(S,K)|0)+Math.imul(I,F)|0,s=s+Math.imul(I,K)|0,i=i+Math.imul(w,W)|0,n=(n=n+Math.imul(w,Y)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,Y)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(m,J)|0,s=s+Math.imul(m,X)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,ee)|0;var _e=(h+(i=i+Math.imul(d,re)|0)|0)+((8191&(n=(n=n+Math.imul(d,ie)|0)+Math.imul(l,re)|0))<<13)|0;h=((s=s+Math.imul(l,ie)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(M,B),n=(n=Math.imul(M,$))+Math.imul(k,B)|0,s=Math.imul(k,$),i=i+Math.imul(O,F)|0,n=(n=n+Math.imul(O,K)|0)+Math.imul(A,F)|0,s=s+Math.imul(A,K)|0,i=i+Math.imul(S,W)|0,n=(n=n+Math.imul(S,Y)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,Y)|0,i=i+Math.imul(w,J)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(_,J)|0,s=s+Math.imul(_,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(g,re)|0,s=s+Math.imul(g,ie)|0;var Ee=(h+(i=i+Math.imul(d,se)|0)|0)+((8191&(n=(n=n+Math.imul(d,oe)|0)+Math.imul(l,se)|0))<<13)|0;h=((s=s+Math.imul(l,oe)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(R,B),n=(n=Math.imul(R,$))+Math.imul(C,B)|0,s=Math.imul(C,$),i=i+Math.imul(M,F)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(k,F)|0,s=s+Math.imul(k,K)|0,i=i+Math.imul(O,W)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,Y)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,X)|0)+Math.imul(I,J)|0,s=s+Math.imul(I,X)|0,i=i+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,ee)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(m,re)|0,s=s+Math.imul(m,ie)|0,i=i+Math.imul(p,se)|0,n=(n=n+Math.imul(p,oe)|0)+Math.imul(g,se)|0,s=s+Math.imul(g,oe)|0;var Se=(h+(i=i+Math.imul(d,ce)|0)|0)+((8191&(n=(n=n+Math.imul(d,he)|0)+Math.imul(l,ce)|0))<<13)|0;h=((s=s+Math.imul(l,he)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(L,B),n=(n=Math.imul(L,$))+Math.imul(j,B)|0,s=Math.imul(j,$),i=i+Math.imul(R,F)|0,n=(n=n+Math.imul(R,K)|0)+Math.imul(C,F)|0,s=s+Math.imul(C,K)|0,i=i+Math.imul(M,W)|0,n=(n=n+Math.imul(M,Y)|0)+Math.imul(k,W)|0,s=s+Math.imul(k,Y)|0,i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(A,J)|0,s=s+Math.imul(A,X)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,ee)|0,i=i+Math.imul(w,re)|0,n=(n=n+Math.imul(w,ie)|0)+Math.imul(_,re)|0,s=s+Math.imul(_,ie)|0,i=i+Math.imul(y,se)|0,n=(n=n+Math.imul(y,oe)|0)+Math.imul(m,se)|0,s=s+Math.imul(m,oe)|0,i=i+Math.imul(p,ce)|0,n=(n=n+Math.imul(p,he)|0)+Math.imul(g,ce)|0,s=s+Math.imul(g,he)|0;var Ie=(h+(i=i+Math.imul(d,de)|0)|0)+((8191&(n=(n=n+Math.imul(d,le)|0)+Math.imul(l,de)|0))<<13)|0;h=((s=s+Math.imul(l,le)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(D,B),n=(n=Math.imul(D,$))+Math.imul(z,B)|0,s=Math.imul(z,$),i=i+Math.imul(L,F)|0,n=(n=n+Math.imul(L,K)|0)+Math.imul(j,F)|0,s=s+Math.imul(j,K)|0,i=i+Math.imul(R,W)|0,n=(n=n+Math.imul(R,Y)|0)+Math.imul(C,W)|0,s=s+Math.imul(C,Y)|0,i=i+Math.imul(M,J)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(k,J)|0,s=s+Math.imul(k,X)|0,i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(I,re)|0,s=s+Math.imul(I,ie)|0,i=i+Math.imul(w,se)|0,n=(n=n+Math.imul(w,oe)|0)+Math.imul(_,se)|0,s=s+Math.imul(_,oe)|0,i=i+Math.imul(y,ce)|0,n=(n=n+Math.imul(y,he)|0)+Math.imul(m,ce)|0,s=s+Math.imul(m,he)|0,i=i+Math.imul(p,de)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(g,de)|0,s=s+Math.imul(g,le)|0;var xe=(h+(i=i+Math.imul(d,pe)|0)|0)+((8191&(n=(n=n+Math.imul(d,ge)|0)+Math.imul(l,pe)|0))<<13)|0;h=((s=s+Math.imul(l,ge)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(D,F),n=(n=Math.imul(D,K))+Math.imul(z,F)|0,s=Math.imul(z,K),i=i+Math.imul(L,W)|0,n=(n=n+Math.imul(L,Y)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,Y)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(C,J)|0,s=s+Math.imul(C,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,ee)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,ee)|0,i=i+Math.imul(O,re)|0,n=(n=n+Math.imul(O,ie)|0)+Math.imul(A,re)|0,s=s+Math.imul(A,ie)|0,i=i+Math.imul(S,se)|0,n=(n=n+Math.imul(S,oe)|0)+Math.imul(I,se)|0,s=s+Math.imul(I,oe)|0,i=i+Math.imul(w,ce)|0,n=(n=n+Math.imul(w,he)|0)+Math.imul(_,ce)|0,s=s+Math.imul(_,he)|0,i=i+Math.imul(y,de)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(m,de)|0,s=s+Math.imul(m,le)|0;var Oe=(h+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;h=((s=s+Math.imul(g,ge)|0)+(n>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(D,W),n=(n=Math.imul(D,Y))+Math.imul(z,W)|0,s=Math.imul(z,Y),i=i+Math.imul(L,J)|0,n=(n=n+Math.imul(L,X)|0)+Math.imul(j,J)|0,s=s+Math.imul(j,X)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(C,Q)|0,s=s+Math.imul(C,ee)|0,i=i+Math.imul(M,re)|0,n=(n=n+Math.imul(M,ie)|0)+Math.imul(k,re)|0,s=s+Math.imul(k,ie)|0,i=i+Math.imul(O,se)|0,n=(n=n+Math.imul(O,oe)|0)+Math.imul(A,se)|0,s=s+Math.imul(A,oe)|0,i=i+Math.imul(S,ce)|0,n=(n=n+Math.imul(S,he)|0)+Math.imul(I,ce)|0,s=s+Math.imul(I,he)|0,i=i+Math.imul(w,de)|0,n=(n=n+Math.imul(w,le)|0)+Math.imul(_,de)|0,s=s+Math.imul(_,le)|0;var Ae=(h+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,ge)|0)+Math.imul(m,pe)|0))<<13)|0;h=((s=s+Math.imul(m,ge)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(D,J),n=(n=Math.imul(D,X))+Math.imul(z,J)|0,s=Math.imul(z,X),i=i+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,ee)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(C,re)|0,s=s+Math.imul(C,ie)|0,i=i+Math.imul(M,se)|0,n=(n=n+Math.imul(M,oe)|0)+Math.imul(k,se)|0,s=s+Math.imul(k,oe)|0,i=i+Math.imul(O,ce)|0,n=(n=n+Math.imul(O,he)|0)+Math.imul(A,ce)|0,s=s+Math.imul(A,he)|0,i=i+Math.imul(S,de)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(I,de)|0,s=s+Math.imul(I,le)|0;var Pe=(h+(i=i+Math.imul(w,pe)|0)|0)+((8191&(n=(n=n+Math.imul(w,ge)|0)+Math.imul(_,pe)|0))<<13)|0;h=((s=s+Math.imul(_,ge)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(D,Q),n=(n=Math.imul(D,ee))+Math.imul(z,Q)|0,s=Math.imul(z,ee),i=i+Math.imul(L,re)|0,n=(n=n+Math.imul(L,ie)|0)+Math.imul(j,re)|0,s=s+Math.imul(j,ie)|0,i=i+Math.imul(R,se)|0,n=(n=n+Math.imul(R,oe)|0)+Math.imul(C,se)|0,s=s+Math.imul(C,oe)|0,i=i+Math.imul(M,ce)|0,n=(n=n+Math.imul(M,he)|0)+Math.imul(k,ce)|0,s=s+Math.imul(k,he)|0,i=i+Math.imul(O,de)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(A,de)|0,s=s+Math.imul(A,le)|0;var Me=(h+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,ge)|0)+Math.imul(I,pe)|0))<<13)|0;h=((s=s+Math.imul(I,ge)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(D,re),n=(n=Math.imul(D,ie))+Math.imul(z,re)|0,s=Math.imul(z,ie),i=i+Math.imul(L,se)|0,n=(n=n+Math.imul(L,oe)|0)+Math.imul(j,se)|0,s=s+Math.imul(j,oe)|0,i=i+Math.imul(R,ce)|0,n=(n=n+Math.imul(R,he)|0)+Math.imul(C,ce)|0,s=s+Math.imul(C,he)|0,i=i+Math.imul(M,de)|0,n=(n=n+Math.imul(M,le)|0)+Math.imul(k,de)|0,s=s+Math.imul(k,le)|0;var ke=(h+(i=i+Math.imul(O,pe)|0)|0)+((8191&(n=(n=n+Math.imul(O,ge)|0)+Math.imul(A,pe)|0))<<13)|0;h=((s=s+Math.imul(A,ge)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(D,se),n=(n=Math.imul(D,oe))+Math.imul(z,se)|0,s=Math.imul(z,oe),i=i+Math.imul(L,ce)|0,n=(n=n+Math.imul(L,he)|0)+Math.imul(j,ce)|0,s=s+Math.imul(j,he)|0,i=i+Math.imul(R,de)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(C,de)|0,s=s+Math.imul(C,le)|0;var Te=(h+(i=i+Math.imul(M,pe)|0)|0)+((8191&(n=(n=n+Math.imul(M,ge)|0)+Math.imul(k,pe)|0))<<13)|0;h=((s=s+Math.imul(k,ge)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(D,ce),n=(n=Math.imul(D,he))+Math.imul(z,ce)|0,s=Math.imul(z,he),i=i+Math.imul(L,de)|0,n=(n=n+Math.imul(L,le)|0)+Math.imul(j,de)|0,s=s+Math.imul(j,le)|0;var Re=(h+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,ge)|0)+Math.imul(C,pe)|0))<<13)|0;h=((s=s+Math.imul(C,ge)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(D,de),n=(n=Math.imul(D,le))+Math.imul(z,de)|0,s=Math.imul(z,le);var Ce=(h+(i=i+Math.imul(L,pe)|0)|0)+((8191&(n=(n=n+Math.imul(L,ge)|0)+Math.imul(j,pe)|0))<<13)|0;h=((s=s+Math.imul(j,ge)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863;var Ne=(h+(i=Math.imul(D,pe))|0)+((8191&(n=(n=Math.imul(D,ge))+Math.imul(z,pe)|0))<<13)|0;return h=((s=Math.imul(z,ge))+(n>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,c[0]=be,c[1]=ye,c[2]=me,c[3]=ve,c[4]=we,c[5]=_e,c[6]=Ee,c[7]=Se,c[8]=Ie,c[9]=xe,c[10]=Oe,c[11]=Ae,c[12]=Pe,c[13]=Me,c[14]=ke,c[15]=Te,c[16]=Re,c[17]=Ce,c[18]=Ne,0!==h&&(c[19]=h,r.length++),r};function g(e,t,r){return(new b).mulp(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(p=f),s.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=67108863&i,c=Math.min(s,t.length-1),h=Math.max(0,s-e.length+1);h<=c;h++){var u=s-h,d=(0|e.words[u])*(0|t.words[h]),l=67108863&d;a=67108863&(l=l+a|0),n+=(o=(o=o+(d/67108864|0)|0)+(l>>>26)|0)>>>26,o&=67108863}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,e,t):g(this,e,t),r},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},b.prototype.permute=function(e,t,r,i,n,s){for(var o=0;o<s;o++)i[o]=t[e[o]],n[o]=r[e[o]]},b.prototype.transform=function(e,t,r,i,n,s){this.permute(s,e,t,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),u=0;u<n;u+=a)for(var d=c,l=h,f=0;f<o;f++){var p=r[u+f],g=i[u+f],b=r[u+f+o],y=i[u+f+o],m=d*b-l*y;y=d*y+l*b,b=m,r[u+f]=p+b,i[u+f]=g+y,r[u+f+o]=p-b,i[u+f+o]=g-y,f!==a&&(m=c*d-h*l,l=c*l+h*d,d=m)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},b.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},b.prototype.convert13b=function(e,t,r,n){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<n;++o)r[o]=0;i(0===s),i(!(-8192&s))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),s=this.stub(i),o=new Array(i),a=new Array(i),c=new Array(i),h=new Array(i),u=new Array(i),d=new Array(i),l=r.words;l.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,h,i),this.transform(o,s,a,c,i,n),this.transform(h,s,u,d,i,n);for(var f=0;f<i;f++){var p=a[f]*u[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*u[f],a[f]=p}return this.conjugate(a,c,i),this.transform(a,c,l,s,i,n),this.conjugate(l,s,i),this.normalize13b(l,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),g(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){i("number"==typeof e),i(e<67108864);for(var t=0,r=0;r<this.length;r++){var n=(0|this.words[r])*e,s=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=s>>>26,this.words[r]=67108863&s}return 0!==t&&(this.words[r]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new s(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},s.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var n;i("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(n-=o,n=Math.max(0,n),c){for(var h=0;h<o;h++)c.words[h]=this.words[h];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var d=0|this.words[h];this.words[h]=u<<26-s|d>>>s,u=d&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r)&&!!(this.words[r]&n)},s.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var n,s,o=e.length+r;this._expand(o);var a=0;for(n=0;n<e.length;n++){s=(0|this.words[n+r])+a;var c=(0|e.words[n])*t;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[n+r]=67108863&s}for(;n<this.length-r;n++)a=(s=(0|this.words[n+r])+a)>>26,this.words[n+r]=67108863&s;if(0===a)return this.strip();for(i(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),n=e,o=0|n.words[n.length-1];0!==(r=26-this._countBits(o))&&(n=n.ushln(r),i.iushln(r),o=0|n.words[n.length-1]);var a,c=i.length-n.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var u=i.clone()._ishlnsubmul(n,1,c);0===u.negative&&(i=u,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var l=67108864*(0|i.words[n.length+d])+(0|i.words[n.length+d-1]);for(l=Math.min(l/o|0,67108863),i._ishlnsubmul(n,l,d);0!==i.negative;)l--,i.negative=0,i._ishlnsubmul(n,1,d),i.isZero()||(i.negative^=1);a&&(a.words[d]=l)}return a&&a.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:a||null,mod:i}},s.prototype.divmod=function(e,t,r){return i(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var n,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){i(e<=67108863);for(var t=(1<<26)%e,r=0,n=this.length-1;n>=0;n--)r=(t*r+(0|this.words[n]))%e;return r},s.prototype.idivn=function(e){i(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*t;this.words[r]=n/e|0,t=n%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),o=new s(0),a=new s(0),c=new s(1),h=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++h;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var l=0,f=1;!(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(d)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;!(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(a),o.isub(c)):(r.isub(t),a.isub(n),c.isub(o))}return{a,b:c,gcd:r.iushln(h)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,o=new s(1),a=new s(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,u=1;!(t.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(t.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var d=0,l=1;!(r.words[0]&l)&&d<26;++d,l<<=1);if(d>0)for(r.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(n=0===t.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(e),n},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var s=t;t=r,r=s}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var s=n,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new S(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function m(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},n(v,m),v.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[n-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(w,m),n(_,m),n(E,m),E.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return y[e]=t,t},S.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){i(!(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var a=new s(1).toRed(this),c=a.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,h).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,n),l=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=o;0!==f.cmp(a);){for(var g=f,b=0;0!==g.cmp(a);b++)g=g.redSqr();i(b<p);var y=this.pow(d,new s(1).iushln(p-b-1));l=l.redMul(y),d=y.redSqr(),f=f.redMul(d),p=b}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var h=t.words[i],u=c-1;u>=0;u--){var d=h>>u&1;n!==r[0]&&(n=this.sqr(n)),0!==d||0!==o?(o<<=1,o|=d,(4===++a||0===i&&0===u)&&(n=this.mul(n,r[o]),a=0,o=0)):a=0}c=26}return n},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new I(e)},n(I,S),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,i){function n(r){e.removeListener(t,s),i(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,r)}(e,n,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,i){var n,s,o,h;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=c(e))>0&&o.length>n&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,h=u,console&&console.warn&&console.warn(h)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=u.bind(i);return n.listener=r,i.wrapFn=n,n}function l(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(s){i.once&&e.removeEventListener(t,n),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var h=c.length,u=p(c,h);for(r=0;r<h;++r)i(u[r],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,n,s,o;if(a(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return l(this,e,!0)},s.prototype.rawListeners=function(e){return l(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7952:(e,t,r)=>{var i=t;i.utils=r(7426),i.common=r(6166),i.sha=r(6229),i.ripemd=r(6784),i.hmac=r(8948),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},6166:(e,t,r)=>{"use strict";var i=r(7426),n=r(3349);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=s,s.prototype.update=function(e,t){if(e=i.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=i.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},s.prototype.digest=function(e){return this.update(this._pad()),n(null===this.pending),this._digest(e)},s.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=255&e}else for(i[n++]=255&e,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,s=8;s<this.padLength;s++)i[n++]=0;return i}},8948:(e,t,r)=>{"use strict";var i=r(7426),n=r(3349);function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(t,r))}e.exports=s,s.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),n(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},s.prototype.update=function(e,t){return this.inner.update(e,t),this},s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},6784:(e,t,r)=>{"use strict";var i=r(7426),n=r(6166),s=i.rotl32,o=i.sum32,a=i.sum32_3,c=i.sum32_4,h=n.BlockHash;function u(){if(!(this instanceof u))return new u;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function l(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}i.inherits(u,h),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],n=this.h[2],h=this.h[3],u=this.h[4],m=r,v=i,w=n,_=h,E=u,S=0;S<80;S++){var I=o(s(c(r,d(S,i,n,h),e[p[S]+t],l(S)),b[S]),u);r=u,u=h,h=s(n,10),n=i,i=I,I=o(s(c(m,d(79-S,v,w,_),e[g[S]+t],f(S)),y[S]),E),m=E,E=_,_=s(w,10),w=v,v=I}I=a(this.h[1],n,_),this.h[1]=a(this.h[2],h,E),this.h[2]=a(this.h[3],u,m),this.h[3]=a(this.h[4],r,v),this.h[4]=a(this.h[0],i,w),this.h[0]=I},u.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},6229:(e,t,r)=>{"use strict";t.sha1=r(3917),t.sha224=r(7714),t.sha256=r(2287),t.sha384=r(1911),t.sha512=r(7766)},3917:(e,t,r)=>{"use strict";var i=r(7426),n=r(6166),s=r(6225),o=i.rotl32,a=i.sum32,c=i.sum32_5,h=s.ft_1,u=n.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(l,u),e.exports=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=o(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],s=this.h[1],u=this.h[2],l=this.h[3],f=this.h[4];for(i=0;i<r.length;i++){var p=~~(i/20),g=c(o(n,5),h(p,s,u,l),f,r[i],d[p]);f=l,l=u,u=o(s,30),s=n,n=g}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],l),this.h[4]=a(this.h[4],f)},l.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},7714:(e,t,r)=>{"use strict";var i=r(7426),n=r(2287);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(s,n),e.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},2287:(e,t,r)=>{"use strict";var i=r(7426),n=r(6166),s=r(6225),o=r(3349),a=i.sum32,c=i.sum32_4,h=i.sum32_5,u=s.ch32,d=s.maj32,l=s.s0_256,f=s.s1_256,p=s.g0_256,g=s.g1_256,b=n.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;b.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}i.inherits(m,b),e.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=c(g(r[i-2]),r[i-7],p(r[i-15]),r[i-16]);var n=this.h[0],s=this.h[1],b=this.h[2],y=this.h[3],m=this.h[4],v=this.h[5],w=this.h[6],_=this.h[7];for(o(this.k.length===r.length),i=0;i<r.length;i++){var E=h(_,f(m),u(m,v,w),this.k[i],r[i]),S=a(l(n),d(n,s,b));_=w,w=v,v=m,m=a(y,E),y=b,b=s,s=n,n=a(E,S)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],b),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],m),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],_)},m.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},1911:(e,t,r)=>{"use strict";var i=r(7426),n=r(7766);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(s,n),e.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},7766:(e,t,r)=>{"use strict";var i=r(7426),n=r(6166),s=r(3349),o=i.rotr64_hi,a=i.rotr64_lo,c=i.shr64_hi,h=i.shr64_lo,u=i.sum64,d=i.sum64_hi,l=i.sum64_lo,f=i.sum64_4_hi,p=i.sum64_4_lo,g=i.sum64_5_hi,b=i.sum64_5_lo,y=n.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}function w(e,t,r,i,n){var s=e&r^~e&n;return s<0&&(s+=4294967296),s}function _(e,t,r,i,n,s){var o=t&i^~t&s;return o<0&&(o+=4294967296),o}function E(e,t,r,i,n){var s=e&r^e&n^r&n;return s<0&&(s+=4294967296),s}function S(e,t,r,i,n,s){var o=t&i^t&s^i&s;return o<0&&(o+=4294967296),o}function I(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r}function x(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function O(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=4294967296),r}function A(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function P(e,t){var r=o(e,t,1)^o(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function M(e,t){var r=a(e,t,1)^a(e,t,8)^h(e,t,7);return r<0&&(r+=4294967296),r}function k(e,t){var r=o(e,t,19)^o(t,e,29)^c(e,t,6);return r<0&&(r+=4294967296),r}function T(e,t){var r=a(e,t,19)^a(t,e,29)^h(e,t,6);return r<0&&(r+=4294967296),r}i.inherits(v,y),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var n=k(r[i-4],r[i-3]),s=T(r[i-4],r[i-3]),o=r[i-14],a=r[i-13],c=P(r[i-30],r[i-29]),h=M(r[i-30],r[i-29]),u=r[i-32],d=r[i-31];r[i]=f(n,s,o,a,c,h,u,d),r[i+1]=p(n,s,o,a,c,h,u,d)}},v.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],h=this.h[5],f=this.h[6],p=this.h[7],y=this.h[8],m=this.h[9],v=this.h[10],P=this.h[11],M=this.h[12],k=this.h[13],T=this.h[14],R=this.h[15];s(this.k.length===r.length);for(var C=0;C<r.length;C+=2){var N=T,L=R,j=O(y,m),U=A(y,m),D=w(y,m,v,P,M),z=_(y,m,v,P,M,k),q=this.k[C],B=this.k[C+1],$=r[C],V=r[C+1],F=g(N,L,j,U,D,z,q,B,$,V),K=b(N,L,j,U,D,z,q,B,$,V);N=I(i,n),L=x(i,n),j=E(i,n,o,a,c),U=S(i,n,o,a,c,h);var H=d(N,L,j,U),W=l(N,L,j,U);T=M,R=k,M=v,k=P,v=y,P=m,y=d(f,p,F,K),m=l(p,p,F,K),f=c,p=h,c=o,h=a,o=i,a=n,i=d(F,K,H,W),n=l(F,K,H,W)}u(this.h,0,i,n),u(this.h,2,o,a),u(this.h,4,c,h),u(this.h,6,f,p),u(this.h,8,y,m),u(this.h,10,v,P),u(this.h,12,M,k),u(this.h,14,T,R)},v.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},6225:(e,t,r)=>{"use strict";var i=r(7426).rotr32;function n(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}function o(e,t,r){return e^t^r}t.ft_1=function(e,t,r,i){return 0===e?n(t,r,i):1===e||3===e?o(t,r,i):2===e?s(t,r,i):void 0},t.ch32=n,t.maj32=s,t.p32=o,t.s0_256=function(e){return i(e,2)^i(e,13)^i(e,22)},t.s1_256=function(e){return i(e,6)^i(e,11)^i(e,25)},t.g0_256=function(e){return i(e,7)^i(e,18)^e>>>3},t.g1_256=function(e){return i(e,17)^i(e,19)^e>>>10}},7426:(e,t,r)=>{"use strict";var i=r(3349),n=r(6698);function s(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function o(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=n,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var i=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?r[i++]=o:o<2048?(r[i++]=o>>6|192,r[i++]=63&o|128):s(e,n)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),r[i++]=o>>18|240,r[i++]=o>>12&63|128,r[i++]=o>>6&63|128,r[i++]=63&o|128):(r[i++]=o>>12|224,r[i++]=o>>6&63|128,r[i++]=63&o|128)}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},t.htonl=o,t.toHex32=function(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];"little"===t&&(n=o(n)),r+=c(n.toString(16))}return r},t.zero2=a,t.zero8=c,t.join32=function(e,t,r,n){var s=r-t;i(s%4==0);for(var o=new Array(s/4),a=0,c=t;a<o.length;a++,c+=4){var h;h="big"===n?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],o[a]=h>>>0}return o},t.split32=function(e,t){for(var r=new Array(4*e.length),i=0,n=0;i<e.length;i++,n+=4){var s=e[i];"big"===t?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=255&s):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=255&s)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,i){return e+t+r+i>>>0},t.sum32_5=function(e,t,r,i,n){return e+t+r+i+n>>>0},t.sum64=function(e,t,r,i){var n=e[t],s=i+e[t+1]>>>0,o=(s<i?1:0)+r+n;e[t]=o>>>0,e[t+1]=s},t.sum64_hi=function(e,t,r,i){return(t+i>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,i){return t+i>>>0},t.sum64_4_hi=function(e,t,r,i,n,s,o,a){var c=0,h=t;return c+=(h=h+i>>>0)<t?1:0,c+=(h=h+s>>>0)<s?1:0,e+r+n+o+(c+=(h=h+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,r,i,n,s,o,a){return t+i+s+a>>>0},t.sum64_5_hi=function(e,t,r,i,n,s,o,a,c,h){var u=0,d=t;return u+=(d=d+i>>>0)<t?1:0,u+=(d=d+s>>>0)<s?1:0,u+=(d=d+a>>>0)<a?1:0,e+r+n+o+c+(u+=(d=d+h>>>0)<h?1:0)>>>0},t.sum64_5_lo=function(e,t,r,i,n,s,o,a,c,h){return t+i+s+a+h>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},2723:(e,t,r)=>{"use strict";var i=r(7952),n=r(4367),s=r(3349);function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=n.toArray(e.entropy,e.entropyEnc||"hex"),r=n.toArray(e.nonce,e.nonceEnc||"hex"),i=n.toArray(e.pers,e.persEnc||"hex");s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}e.exports=o,o.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,r,i){"string"!=typeof t&&(i=r,r=t,t=null),e=n.toArray(e,t),r=n.toArray(r,i),s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=n.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,n.encode(o,t)}},251:(e,t)=>{t.read=function(e,t,r,i,n){var s,o,a=8*n-i-1,c=(1<<a)-1,h=c>>1,u=-7,d=r?n-1:0,l=r?-1:1,f=e[t+d];for(d+=l,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=l,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+e[t+d],d+=l,u-=8);if(0===s)s=1-h;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=h}return(f?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var o,a,c,h=8*s-n-1,u=(1<<h)-1,d=u>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+d>=1?l/c:l*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*c-1)*Math.pow(2,n),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;e[r+f]=255&a,f+=p,a/=256,n-=8);for(o=o<<n|a,h+=n;h>0;e[r+f]=255&o,f+=p,o/=256,h-=8);e[r+f-p]|=128*g}},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},4634:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},3349:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},4367:(e,t)=>{"use strict";var r=t;function i(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(i=0;i<e.length;i++){var n=e.charCodeAt(i),s=n>>8,o=255&n;s?r.push(s,o):r.push(o)}return r},r.zero2=i,r.toHex=n,r.encode=function(e,t){return"hex"===t?n(e):e}},5606:e=>{var t,r,i=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,c=[],h=!1,u=-1;function d(){h&&a&&(h=!1,a.length?c=a.concat(c):u=-1,c.length&&l())}function l(){if(!h){var e=o(d);h=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||h||o(l)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},6479:e=>{var t;window,t=function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=256,o=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",r=0;r<e.length-2;r+=3){var i=e[r]<<16|e[r+1]<<8|e[r+2];t+=this._encodeByte(i>>>18&63),t+=this._encodeByte(i>>>12&63),t+=this._encodeByte(i>>>6&63),t+=this._encodeByte(i>>>0&63)}var n=e.length-r;return n>0&&(i=e[r]<<16|(2===n?e[r+1]<<8:0),t+=this._encodeByte(i>>>18&63),t+=this._encodeByte(i>>>12&63),t+=2===n?this._encodeByte(i>>>6&63):this._paddingCharacter||"",t+=this._paddingCharacter||""),t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),r=e.length-t,i=new Uint8Array(this.maxDecodedLength(r)),n=0,o=0,a=0,c=0,h=0,u=0,d=0;o<r-4;o+=4)c=this._decodeChar(e.charCodeAt(o+0)),h=this._decodeChar(e.charCodeAt(o+1)),u=this._decodeChar(e.charCodeAt(o+2)),d=this._decodeChar(e.charCodeAt(o+3)),i[n++]=c<<2|h>>>4,i[n++]=h<<4|u>>>2,i[n++]=u<<6|d,a|=c&s,a|=h&s,a|=u&s,a|=d&s;if(o<r-1&&(c=this._decodeChar(e.charCodeAt(o)),h=this._decodeChar(e.charCodeAt(o+1)),i[n++]=c<<2|h>>>4,a|=c&s,a|=h&s),o<r-2&&(u=this._decodeChar(e.charCodeAt(o+2)),i[n++]=h<<4|u>>>2,a|=u&s),o<r-3&&(d=this._decodeChar(e.charCodeAt(o+3)),i[n++]=u<<6|d,a|=d&s),0!==a)throw new Error("Base64Coder: incorrect characters for decoding");return i},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,t+=62-e>>>8&3,String.fromCharCode(t)},e.prototype._decodeChar=function(e){var t=s;return t+=(42-e&e-44)>>>8&-256+e-43+62,t+=(46-e&e-48)>>>8&-256+e-47+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var r=e.length-1;r>=0&&e[r]===this._paddingCharacter;r--)t++;if(e.length<4||t>2)throw new Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=o;var a=new o;t.encode=function(e){return a.encode(e)},t.decode=function(e){return a.decode(e)};var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,t+=62-e>>>8&49,String.fromCharCode(t)},t.prototype._decodeChar=function(e){var t=s;return t+=(44-e&e-46)>>>8&-256+e-45+62,t+=(94-e&e-96)>>>8&-256+e-95+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},t}(o);t.URLSafeCoder=c;var h=new c;t.encodeURLSafe=function(e){return h.encode(e)},t.decodeURLSafe=function(e){return h.decode(e)},t.encodedLength=function(e){return a.encodedLength(e)},t.maxDecodedLength=function(e){return a.maxDecodedLength(e)},t.decodedLength=function(e){return a.decodedLength(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="utf8: invalid string",n="utf8: invalid source encoding";function s(e){for(var t=0,r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<128)t+=1;else if(n<2048)t+=2;else if(n<55296)t+=3;else{if(!(n<=57343))throw new Error(i);if(r>=e.length-1)throw new Error(i);r++,t+=4}}return t}t.encode=function(e){for(var t=new Uint8Array(s(e)),r=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t[r++]=n:n<2048?(t[r++]=192|n>>6,t[r++]=128|63&n):n<55296?(t[r++]=224|n>>12,t[r++]=128|n>>6&63,t[r++]=128|63&n):(i++,n=(1023&n)<<10,n|=1023&e.charCodeAt(i),n+=65536,t[r++]=240|n>>18,t[r++]=128|n>>12&63,t[r++]=128|n>>6&63,t[r++]=128|63&n)}return t},t.encodedLength=s,t.decode=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(128&i){var s=void 0;if(i<224){if(r>=e.length)throw new Error(n);if(128!=(192&(o=e[++r])))throw new Error(n);i=(31&i)<<6|63&o,s=128}else if(i<240){if(r>=e.length-1)throw new Error(n);var o=e[++r],a=e[++r];if(128!=(192&o)||128!=(192&a))throw new Error(n);i=(15&i)<<12|(63&o)<<6|63&a,s=2048}else{if(!(i<248))throw new Error(n);if(r>=e.length-2)throw new Error(n);o=e[++r],a=e[++r];var c=e[++r];if(128!=(192&o)||128!=(192&a)||128!=(192&c))throw new Error(n);i=(15&i)<<18|(63&o)<<12|(63&a)<<6|63&c,s=65536}if(i<s||i>=55296&&i<=57343)throw new Error(n);if(i>=65536){if(i>1114111)throw new Error(n);i-=65536,t.push(String.fromCharCode(55296|i>>10)),i=56320|1023&i}}t.push(String.fromCharCode(i))}return t.join("")}},function(e,t,r){e.exports=r(3).default},function(e,t,r){"use strict";r.r(t);class i{constructor(e,t){this.lastId=0,this.prefix=e,this.name=t}create(e){this.lastId++;var t=this.lastId,r=this.prefix+t,i=this.name+"["+t+"]",n=!1,s=function(){n||(e.apply(null,arguments),n=!0)};return this[t]=s,{number:t,id:r,name:i,callback:s}}remove(e){delete this[e.number]}}var n=new i("_pusher_script_","Pusher.ScriptReceivers"),s={VERSION:"8.4.0-rc2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},o=new i("_pusher_dependencies","Pusher.DependenciesReceivers"),a=new class{constructor(e){this.options=e,this.receivers=e.receivers||n,this.loading={}}load(e,t,r){var i=this;if(i.loading[e]&&i.loading[e].length>0)i.loading[e].push(r);else{i.loading[e]=[r];var n=ut.createScriptRequest(i.getPath(e,t)),s=i.receivers.create((function(t){if(i.receivers.remove(s),i.loading[e]){var r=i.loading[e];delete i.loading[e];for(var o=function(e){e||n.cleanup()},a=0;a<r.length;a++)r[a](t,o)}}));n.send(s)}}getRoot(e){var t=ut.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version}getPath(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"}}({cdn_http:s.cdn_http,cdn_https:s.cdn_https,version:s.VERSION,suffix:s.dependency_suffix,receivers:o});const c={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var h,u=function(e){const t=c.urls[e];if(!t)return"";let r;return t.fullUrl?r=t.fullUrl:t.path&&(r=c.baseUrl+t.path),r?`See: ${r}`:""};!function(e){e.UserAuthentication="user-authentication",e.ChannelAuthorization="channel-authorization"}(h||(h={}));class d extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class l extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class f extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class p extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class m extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class v extends Error{constructor(e,t){super(t),this.status=e,Object.setPrototypeOf(this,new.target.prototype)}}for(var w=function(e,t,r,i,n){const s=ut.createXHR();for(var o in s.open("POST",r.endpoint,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.headers)s.setRequestHeader(o,r.headers[o]);if(null!=r.headersProvider){let e=r.headersProvider();for(var o in e)s.setRequestHeader(o,e[o])}return s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){let e,t=!1;try{e=JSON.parse(s.responseText),t=!0}catch(e){n(new v(200,`JSON returned from ${i.toString()} endpoint was invalid, yet status code was 200. Data was: ${s.responseText}`),null)}t&&n(null,e)}else{let e="";switch(i){case h.UserAuthentication:e=u("authenticationEndpoint");break;case h.ChannelAuthorization:e=`Clients must be authorized to join private or presence channels. ${u("authorizationEndpoint")}`}n(new v(s.status,`Unable to retrieve auth string from ${i.toString()} endpoint - received status: ${s.status} from ${r.endpoint}. ${e}`),null)}},s.send(t),s},_=String.fromCharCode,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S={},I=0;I<64;I++)S[E.charAt(I)]=I;var x=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?_(192|t>>>6)+_(128|63&t):_(224|t>>>12&15)+_(128|t>>>6&63)+_(128|63&t)},O=function(e){return e.replace(/[^\x00-\x7F]/g,x)},A=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[E.charAt(r>>>18),E.charAt(r>>>12&63),t>=2?"=":E.charAt(r>>>6&63),t>=1?"=":E.charAt(63&r)].join("")},P=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,A)},M=class{constructor(e,t,r,i){this.clear=t,this.timer=e((()=>{this.timer&&(this.timer=i(this.timer))}),r)}isRunning(){return null!==this.timer}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}};function k(e){window.clearTimeout(e)}function T(e){window.clearInterval(e)}class R extends M{constructor(e,t){super(setTimeout,k,e,(function(e){return t(),null}))}}class C extends M{constructor(e,t){super(setInterval,T,e,(function(e){return t(),e}))}}var N={now:()=>Date.now?Date.now():(new Date).valueOf(),defer:e=>new R(0,e),method(e,...t){var r=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,r.concat(arguments))}}},L=N;function j(e,...t){for(var r=0;r<t.length;r++){var i=t[r];for(var n in i)i[n]&&i[n].constructor&&i[n].constructor===Object?e[n]=j(e[n]||{},i[n]):e[n]=i[n]}return e}function U(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(Y(arguments[t]));return e.join(" : ")}function D(e,t){var r=Array.prototype.indexOf;if(null===e)return-1;if(r&&e.indexOf===r)return e.indexOf(t);for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}function z(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(e[r],r,e)}function q(e){var t=[];return z(e,(function(e,r){t.push(r)})),t}function B(e,t,r){for(var i=0;i<e.length;i++)t.call(r||window,e[i],i,e)}function $(e,t){for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i,e,r));return r}function V(e,t){t=t||function(e){return!!e};for(var r=[],i=0;i<e.length;i++)t(e[i],i,e,r)&&r.push(e[i]);return r}function F(e,t){var r={};return z(e,(function(i,n){(t&&t(i,n,e,r)||Boolean(i))&&(r[n]=i)})),r}function K(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1}function H(e){return t=function(e){return"object"==typeof e&&(e=Y(e)),encodeURIComponent((t=e.toString(),P(O(t))));var t},r={},z(e,(function(e,i){r[i]=t(e)})),r;var t,r}function W(e){var t,r,i=F(e,(function(e){return void 0!==e}));return $((t=H(i),r=[],z(t,(function(e,t){r.push([t,e])})),r),L.method("join","=")).join("&")}function Y(e){try{return JSON.stringify(e)}catch(i){return JSON.stringify((t=[],r=[],function e(i,n){var s,o,a;switch(typeof i){case"object":if(!i)return null;for(s=0;s<t.length;s+=1)if(t[s]===i)return{$ref:r[s]};if(t.push(i),r.push(n),"[object Array]"===Object.prototype.toString.apply(i))for(a=[],s=0;s<i.length;s+=1)a[s]=e(i[s],n+"["+s+"]");else for(o in a={},i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=e(i[o],n+"["+JSON.stringify(o)+"]"));return a;case"number":case"string":case"boolean":return i}}(e,"$")))}var t,r}var G=new class{constructor(){this.globalLog=e=>{window.console&&window.console.log&&window.console.log(e)}}debug(...e){this.log(this.globalLog,e)}warn(...e){this.log(this.globalLogWarn,e)}error(...e){this.log(this.globalLogError,e)}globalLogWarn(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)}globalLogError(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)}log(e,...t){var r=U.apply(this,arguments);Ct.log?Ct.log(r):Ct.logToConsole&&e.bind(this)(r)}},J=function(e,t,r,i,n){void 0===r.headers&&null==r.headersProvider||G.warn(`To send headers with the ${i.toString()} request, you must use AJAX, rather than JSONP.`);var s=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var o=e.getDocument(),a=o.createElement("script");e.auth_callbacks[s]=function(e){n(null,e)};var c="Pusher.auth_callbacks['"+s+"']";a.src=r.endpoint+"?callback="+encodeURIComponent(c)+"&"+t;var h=o.getElementsByTagName("head")[0]||o.documentElement;h.insertBefore(a,h.firstChild)};class X{constructor(e){this.src=e}send(e){var t=this,r="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(r)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+r+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(t.script,i.firstChild),t.errorScript&&i.insertBefore(t.errorScript,t.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class Z{constructor(e,t){this.url=e,this.data=t}send(e){if(!this.request){var t=W(this.data),r=this.url+"/"+e.number+"?"+t;this.request=ut.createScriptRequest(r),this.request.send(e)}}cleanup(){this.request&&this.request.cleanup()}}var Q={name:"jsonp",getAgent:function(e,t){return function(r,i){var s="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,o=ut.createJSONPRequest(s,r),a=ut.ScriptReceivers.create((function(t,r){n.remove(a),o.cleanup(),r&&r.host&&(e.host=r.host),i&&i(t,r)}));o.send(a)}}};function ee(e,t,r){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+r}function te(e,t){return"/app/"+e+"?protocol="+s.PROTOCOL+"&client=js&version="+s.VERSION+(t?"&"+t:"")}var re={getInitial:function(e,t){return ee("ws",t,(t.httpPath||"")+te(e,"flash=false"))}},ie={getInitial:function(e,t){return ee("http",t,(t.httpPath||"/pusher")+te(e))}},ne={getInitial:function(e,t){return ee("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return te(e)}};class se{constructor(){this._callbacks={}}get(e){return this._callbacks[oe(e)]}add(e,t,r){var i=oe(e);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:t,context:r})}remove(e,t,r){if(e||t||r){var i=e?[oe(e)]:q(this._callbacks);t||r?this.removeCallback(i,t,r):this.removeAllCallbacks(i)}else this._callbacks={}}removeCallback(e,t,r){B(e,(function(e){this._callbacks[e]=V(this._callbacks[e]||[],(function(e){return t&&t!==e.fn||r&&r!==e.context})),0===this._callbacks[e].length&&delete this._callbacks[e]}),this)}removeAllCallbacks(e){B(e,(function(e){delete this._callbacks[e]}),this)}}function oe(e){return"_"+e}class ae{constructor(e){this.callbacks=new se,this.global_callbacks=[],this.failThrough=e}bind(e,t,r){return this.callbacks.add(e,t,r),this}bind_global(e){return this.global_callbacks.push(e),this}unbind(e,t,r){return this.callbacks.remove(e,t,r),this}unbind_global(e){return e?(this.global_callbacks=V(this.global_callbacks||[],(t=>t!==e)),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(e,t,r){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](e,t);var n=this.callbacks.get(e),s=[];if(r?s.push(t,r):t&&s.push(t),n&&n.length>0)for(i=0;i<n.length;i++)n[i].fn.apply(n[i].context||window,s);else this.failThrough&&this.failThrough(e,t);return this}}class ce extends ae{constructor(e,t,r,i,n){super(),this.initialize=ut.transportConnectionInitializer,this.hooks=e,this.name=t,this.priority=r,this.key=i,this.options=n,this.state="new",this.timeline=n.timeline,this.activityTimeout=n.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return Boolean(this.hooks.handlesActivityChecks)}supportsPing(){return Boolean(this.hooks.supportsPing)}connect(){if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return L.defer((()=>{this.onError(e),this.changeState("closed")})),!1}return this.bindListeners(),G.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0}close(){return!!this.socket&&(this.socket.close(),!0)}send(e){return"open"===this.state&&(L.defer((()=>{this.socket&&this.socket.send(e)})),!0)}ping(){"open"===this.state&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))}onClose(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(e){this.emit("message",e)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=e=>{this.onError(e)},this.socket.onclose=e=>{this.onClose(e)},this.socket.onmessage=e=>{this.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)}buildTimelineMessage(e){return j({cid:this.id},e)}}class he{constructor(e){this.hooks=e}isSupported(e){return this.hooks.isSupported(e)}createConnection(e,t,r,i){return new ce(this.hooks,e,t,r,i)}}var ue=new he({urls:re,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(ut.getWebSocketAPI())},isSupported:function(){return Boolean(ut.getWebSocketAPI())},getSocket:function(e){return ut.createWebSocket(e)}}),de={urls:ie,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},le=j({getSocket:function(e){return ut.HTTPFactory.createStreamingSocket(e)}},de),fe=j({getSocket:function(e){return ut.HTTPFactory.createPollingSocket(e)}},de),pe={isSupported:function(){return ut.isXHRSupported()}},ge={ws:ue,xhr_streaming:new he(j({},le,pe)),xhr_polling:new he(j({},fe,pe))},be=new he({file:"sockjs",urls:ne,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:a.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),ye={isSupported:function(e){return ut.isXDRSupported(e.useTLS)}},me=new he(j({},le,ye)),ve=new he(j({},fe,ye));ge.xdr_streaming=me,ge.xdr_polling=ve,ge.sockjs=be;var we=ge,_e=new class extends ae{constructor(){super();var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",(function(){e.emit("online")}),!1),window.addEventListener("offline",(function(){e.emit("offline")}),!1))}isOnline(){return void 0===window.navigator.onLine||window.navigator.onLine}};class Ee{constructor(e,t,r){this.manager=e,this.transport=t,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}createConnection(e,t,r,i){i=j({},i,{activityTimeout:this.pingDelay});var n=this.transport.createConnection(e,t,r,i),s=null,o=function(){n.unbind("open",o),n.bind("closed",a),s=L.now()},a=e=>{if(n.unbind("closed",a),1002===e.code||1003===e.code)this.manager.reportDeath();else if(!e.wasClean&&s){var t=L.now()-s;t<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(t/2,this.minPingDelay))}};return n.bind("open",o),n}isSupported(e){return this.manager.isAlive()&&this.transport.isSupported(e)}}const Se={decodeMessage:function(e){try{var t=JSON.parse(e.data),r=t.data;if("string"==typeof r)try{r=JSON.parse(t.data)}catch(e){}var i={event:t.event,channel:t.channel,data:r};return t.user_id&&(i.user_id=t.user_id),i}catch(t){throw{type:"MessageParseError",error:t,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=Se.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}};var Ie=Se;class xe extends ae{constructor(e,t){super(),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(e){return this.transport.send(e)}send_event(e,t,r){var i={event:e,data:t};return r&&(i.channel=r),G.debug("Event sent",i),this.send(Ie.encodeMessage(i))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var e={message:e=>{var t;try{t=Ie.decodeMessage(e)}catch(t){this.emit("error",{type:"MessageParseError",error:t,data:e.data})}if(void 0!==t){switch(G.debug("Event recd",t),t.event){case"pusher:error":this.emit("error",{type:"PusherError",data:t.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong")}this.emit("message",t)}},activity:()=>{this.emit("activity")},error:e=>{this.emit("error",e)},closed:e=>{t(),e&&e.code&&this.handleCloseEvent(e),this.transport=null,this.emit("closed")}},t=()=>{z(e,((e,t)=>{this.transport.unbind(t,e)}))};z(e,((e,t)=>{this.transport.bind(t,e)}))}handleCloseEvent(e){var t=Ie.getCloseAction(e),r=Ie.getCloseError(e);r&&this.emit("error",r),t&&this.emit(t,{action:t,error:r})}}class Oe{constructor(e,t){this.transport=e,this.callback=t,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=e=>{var t;this.unbindListeners();try{t=Ie.processHandshake(e)}catch(e){return this.finish("error",{error:e}),void this.transport.close()}"connected"===t.action?this.finish("connected",{connection:new xe(t.id,this.transport),activityTimeout:t.activityTimeout}):(this.finish(t.action,{error:t.error}),this.transport.close())},this.onClosed=e=>{this.unbindListeners();var t=Ie.getCloseAction(e)||"backoff",r=Ie.getCloseError(e);this.finish(t,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(e,t){this.callback(j({transport:this.transport,action:e},t))}}class Ae{constructor(e,t){this.timeline=e,this.options=t||{}}send(e,t){this.timeline.isEmpty()||this.timeline.send(ut.TimelineTransport.getAgent(this,e),t)}}class Pe extends ae{constructor(e,t){super((function(t,r){G.debug("No callbacks on "+e+" for "+t)})),this.name=e,this.pusher=t,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(e,t){return t(null,{auth:""})}trigger(e,t){if(0!==e.indexOf("client-"))throw new d("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var r=u("triggeringClientEvents");G.warn(`Client event triggered before channel 'subscription_succeeded' event . ${r}`)}return this.pusher.send_event(e,t,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(e){var t=e.event,r=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):"pusher_internal:subscription_count"===t?this.handleSubscriptionCountEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,r,{})}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)}handleSubscriptionCountEvent(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,((e,t)=>{e?(this.subscriptionPending=!1,G.error(e.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof v?{status:e.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:t.auth,channel_data:t.channel_data,channel:this.name})})))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Me extends Pe{authorize(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)}}class ke{constructor(){this.reset()}get(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null}each(e){z(this.members,((t,r)=>{e(this.get(r))}))}setMyID(e){this.myID=e}onSubscription(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)}addMember(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)}removeMember(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Te=function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};class Re extends Me{constructor(e,t){super(e,t),this.members=new ke}authorize(e,t){super.authorize(e,((e,r)=>Te(this,void 0,void 0,(function*(){if(!e)if(null!=r.channel_data){var i=JSON.parse(r.channel_data);this.members.setMyID(i.user_id)}else{if(yield this.pusher.user.signinDonePromise,null==this.pusher.user.user_data){let e=u("authorizationEndpoint");return G.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${e}, or the user should be signed in.`),void t("Invalid auth response")}this.members.setMyID(this.pusher.user.user_data.id)}t(e,r)}))))}handleEvent(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var r=e.data,i={};e.user_id&&(i.user_id=e.user_id),this.emit(t,r,i)}}handleInternalEvent(e){var t=e.event,r=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var i=this.members.addMember(r);this.emit("pusher:member_added",i);break;case"pusher_internal:member_removed":var n=this.members.removeMember(r);n&&this.emit("pusher:member_removed",n)}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Ce=r(1),Ne=r(0);class Le extends Me{constructor(e,t,r){super(e,t),this.key=null,this.nacl=r}authorize(e,t){super.authorize(e,((e,r)=>{if(e)return void t(e,r);let i=r.shared_secret;i?(this.key=Object(Ne.decode)(i),delete r.shared_secret,t(null,r)):t(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null)}))}trigger(e,t){throw new b("Client events are not currently supported for encrypted channels")}handleEvent(e){var t=e.event,r=e.data;0!==t.indexOf("pusher_internal:")&&0!==t.indexOf("pusher:")?this.handleEncryptedEvent(t,r):super.handleEvent(e)}handleEncryptedEvent(e,t){if(!this.key)return void G.debug("Received encrypted event before key has been retrieved from the authEndpoint");if(!t.ciphertext||!t.nonce)return void G.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);let r=Object(Ne.decode)(t.ciphertext);if(r.length<this.nacl.secretbox.overheadLength)return void G.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${r.length}`);let i=Object(Ne.decode)(t.nonce);if(i.length<this.nacl.secretbox.nonceLength)return void G.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${i.length}`);let n=this.nacl.secretbox.open(r,i,this.key);if(null===n)return G.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,((t,s)=>{t?G.error(`Failed to make a request to the authEndpoint: ${s}. Unable to fetch new key, so dropping encrypted event`):(n=this.nacl.secretbox.open(r,i,this.key),null!==n?this.emit(e,this.getDataToEmit(n)):G.error("Failed to decrypt event with new key. Dropping encrypted event"))}));this.emit(e,this.getDataToEmit(n))}getDataToEmit(e){let t=Object(Ce.decode)(e);try{return JSON.parse(t)}catch(e){return t}}}class je extends ae{constructor(e,t){super(),this.state="initialized",this.connection=null,this.key=e,this.options=t,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var r=ut.getNetwork();r.bind("online",(()=>{this.timeline.info({netinfo:"online"}),"connecting"!==this.state&&"unavailable"!==this.state||this.retryIn(0)})),r.bind("offline",(()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()})),this.updateStrategy()}switchCluster(e){this.key=e,this.updateStrategy(),this.retryIn(0)}connect(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))}send(e){return!!this.connection&&this.connection.send(e)}send_event(e,t,r){return!!this.connection&&this.connection.send_event(e,t,r)}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var e=(t,r)=>{t?this.runner=this.strategy.connect(0,e):"error"===r.action?(this.emit("error",{type:"HandshakeError",error:r.error}),this.timeline.error({handshakeError:r.error})):(this.abortConnecting(),this.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,e)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(e){this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new R(e||0,(()=>{this.disconnectInternally(),this.connect()}))}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new R(this.options.unavailableTimeout,(()=>{this.updateState("unavailable")}))}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new R(this.options.pongTimeout,(()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)}))}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new R(this.activityTimeout,(()=>{this.sendActivityCheck()})))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(e){return j({},e,{message:e=>{this.resetActivityCheck(),this.emit("message",e)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:e=>{this.emit("error",e)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(e){return j({},e,{connected:e=>{this.activityTimeout=Math.min(this.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(e.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let e=e=>t=>{t.error&&this.emit("error",{type:"WebSocketError",error:t.error}),e(t)};return{tls_only:e((()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)})),refused:e((()=>{this.disconnect()})),backoff:e((()=>{this.retryIn(1e3)})),retry:e((()=>{this.retryIn(0)}))}}setConnection(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()}abandonConnection(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}}updateState(e,t){var r=this.state;if(this.state=e,r!==e){var i=e;"connected"===i&&(i+=" with new socket ID "+t.socket_id),G.debug("State changed",r+" -> "+i),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:r,current:e}),this.emit(e,t)}}shouldRetry(){return"connecting"===this.state||"connected"===this.state}}class Ue{constructor(){this.channels={}}add(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return De.createEncryptedChannel(e,t,t.config.nacl);let r="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",i=u("encryptedChannelSupport");throw new b(`${r}. ${i}`)}if(0===e.indexOf("private-"))return De.createPrivateChannel(e,t);if(0===e.indexOf("presence-"))return De.createPresenceChannel(e,t);if(0===e.indexOf("#"))throw new l('Cannot create a channel with name "'+e+'".');return De.createChannel(e,t)}(e,t)),this.channels[e]}all(){return function(e){var t=[];return z(e,(function(e){t.push(e)})),t}(this.channels)}find(e){return this.channels[e]}remove(e){var t=this.channels[e];return delete this.channels[e],t}disconnect(){z(this.channels,(function(e){e.disconnect()}))}}var De={createChannels:()=>new Ue,createConnectionManager:(e,t)=>new je(e,t),createChannel:(e,t)=>new Pe(e,t),createPrivateChannel:(e,t)=>new Me(e,t),createPresenceChannel:(e,t)=>new Re(e,t),createEncryptedChannel:(e,t,r)=>new Le(e,t,r),createTimelineSender:(e,t)=>new Ae(e,t),createHandshake:(e,t)=>new Oe(e,t),createAssistantToTheTransportManager:(e,t,r)=>new Ee(e,t,r)};class ze{constructor(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}getAssistant(e){return De.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class qe{constructor(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}isSupported(){return K(this.strategies,L.method("isSupported"))}connect(e,t){var r=this.strategies,i=0,n=this.timeout,s=null,o=(a,c)=>{c?t(null,c):(i+=1,this.loop&&(i%=r.length),i<r.length?(n&&(n*=2,this.timeoutLimit&&(n=Math.min(n,this.timeoutLimit))),s=this.tryStrategy(r[i],e,{timeout:n,failFast:this.failFast},o)):t(!0))};return s=this.tryStrategy(r[i],e,{timeout:n,failFast:this.failFast},o),{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}}tryStrategy(e,t,r,i){var n=null,s=null;return r.timeout>0&&(n=new R(r.timeout,(function(){s.abort(),i(!0)}))),s=e.connect(t,(function(e,t){e&&n&&n.isRunning()&&!r.failFast||(n&&n.ensureAborted(),i(e,t))})),{abort:function(){n&&n.ensureAborted(),s.abort()},forceMinPriority:function(e){s.forceMinPriority(e)}}}}class Be{constructor(e){this.strategies=e}isSupported(){return K(this.strategies,L.method("isSupported"))}connect(e,t){return function(e,t,r){var i=$(e,(function(e,i,n,s){return e.connect(t,r(i,s))}));return{abort:function(){B(i,$e)},forceMinPriority:function(e){B(i,(function(t){t.forceMinPriority(e)}))}}}(this.strategies,e,(function(e,r){return function(i,n){r[e].error=i,i?function(e){return function(e,t){for(var r=0;r<e.length;r++)if(!t(e[r],r,e))return!1;return!0}(e,(function(e){return Boolean(e.error)}))}(r)&&t(!0):(B(r,(function(e){e.forceMinPriority(n.transport.priority)})),t(null,n))}}))}}function $e(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}class Ve{constructor(e,t,r){this.strategy=e,this.transports=t,this.ttl=r.ttl||18e5,this.usingTLS=r.useTLS,this.timeline=r.timeline}isSupported(){return this.strategy.isSupported()}connect(e,t){var r=this.usingTLS,i=function(e){var t=ut.getLocalStorage();if(t)try{var r=t[Fe(e)];if(r)return JSON.parse(r)}catch(t){Ke(e)}return null}(r),n=i&&i.cacheSkipCount?i.cacheSkipCount:0,s=[this.strategy];if(i&&i.timestamp+this.ttl>=L.now()){var o=this.transports[i.transport];o&&(["ws","wss"].includes(i.transport)||n>3?(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),s.push(new qe([o],{timeout:2*i.latency+1e3,failFast:!0}))):n++)}var a=L.now(),c=s.pop().connect(e,(function i(o,h){o?(Ke(r),s.length>0?(a=L.now(),c=s.pop().connect(e,i)):t(o)):(function(e,t,r,i){var n=ut.getLocalStorage();if(n)try{n[Fe(e)]=Y({timestamp:L.now(),transport:t,latency:r,cacheSkipCount:i})}catch(e){}}(r,h.transport.name,L.now()-a,n),t(null,h))}));return{abort:function(){c.abort()},forceMinPriority:function(t){e=t,c&&c.forceMinPriority(t)}}}}function Fe(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function Ke(e){var t=ut.getLocalStorage();if(t)try{delete t[Fe(e)]}catch(e){}}class He{constructor(e,{delay:t}){this.strategy=e,this.options={delay:t}}isSupported(){return this.strategy.isSupported()}connect(e,t){var r,i=this.strategy,n=new R(this.options.delay,(function(){r=i.connect(e,t)}));return{abort:function(){n.ensureAborted(),r&&r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}}}class We{constructor(e,t,r){this.test=e,this.trueBranch=t,this.falseBranch=r}isSupported(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()}connect(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)}}class Ye{constructor(e){this.strategy=e}isSupported(){return this.strategy.isSupported()}connect(e,t){var r=this.strategy.connect(e,(function(e,i){i&&r.abort(),t(e,i)}));return r}}function Ge(e){return function(){return e.isSupported()}}var Je,Xe=function(e,t,r){var i={};function n(t,n,s,o,a){var c=r(e,t,n,s,o,a);return i[t]=c,c}var s,o=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),a=Object.assign({},o,{useTLS:!0}),c=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),h={loop:!0,timeout:15e3,timeoutLimit:6e4},u=new ze({minPingDelay:1e4,maxPingDelay:e.activityTimeout}),d=new ze({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),l=n("ws","ws",3,o,u),f=n("wss","ws",3,a,u),p=n("sockjs","sockjs",1,c),g=n("xhr_streaming","xhr_streaming",1,c,d),b=n("xdr_streaming","xdr_streaming",1,c,d),y=n("xhr_polling","xhr_polling",1,c),m=n("xdr_polling","xdr_polling",1,c),v=new qe([l],h),w=new qe([f],h),_=new qe([p],h),E=new qe([new We(Ge(g),g,b)],h),S=new qe([new We(Ge(y),y,m)],h),I=new qe([new We(Ge(E),new Be([E,new He(S,{delay:4e3})]),S)],h),x=new We(Ge(I),I,_);return s=t.useTLS?new Be([v,new He(x,{delay:2e3})]):new Be([v,new He(w,{delay:2e3}),new He(x,{delay:5e3})]),new Ve(new Ye(new We(Ge(l),s,x)),i,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},Ze={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new f),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}};class Qe extends ae{constructor(e,t,r){super(),this.hooks=e,this.method=t,this.url=r}start(e){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},ut.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)}close(){this.unloader&&(ut.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(e,t){for(;;){var r=this.advanceBuffer(t);if(!r)break;this.emit("chunk",{status:e,data:r})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")}advanceBuffer(e){var t=e.slice(this.position),r=t.indexOf("\n");return-1!==r?(this.position+=r+1,t.slice(0,r)):null}isBufferTooLong(e){return this.position===e.length&&e.length>262144}}!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(Je||(Je={}));var et=Je,tt=1;function rt(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+tt++}function it(e){return ut.randomInt(e)}var nt,st=class{constructor(e,t){this.hooks=e,this.session=it(1e3)+"/"+function(e){for(var t=[],r=0;r<e;r++)t.push(it(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=et.CONNECTING,this.openStream()}send(e){return this.sendRaw(JSON.stringify([e]))}ping(){this.hooks.sendHeartbeat(this)}close(e,t){this.onClose(e,t,!0)}sendRaw(e){if(this.readyState!==et.OPEN)return!1;try{return ut.createSocketRequest("POST",rt((t=this.location,r=this.session,t.base+"/"+r+"/xhr_send"))).start(e),!0}catch(e){return!1}var t,r}reconnect(){this.closeStream(),this.openStream()}onClose(e,t,r){this.closeStream(),this.readyState=et.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:r})}onChunk(e){var t;if(200===e.status)switch(this.readyState===et.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var r=0;r<t.length;r++)this.onEvent(t[r]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}}onOpen(e){var t,r,i;this.readyState===et.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,r=e.hostname,(i=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+r+i[3])),this.readyState=et.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(e){this.readyState===et.OPEN&&this.onmessage&&this.onmessage({data:e})}onActivity(){this.onactivity&&this.onactivity()}onError(e){this.onerror&&this.onerror(e)}openStream(){this.stream=ut.createSocketRequest("POST",rt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(e=>{this.onChunk(e)})),this.stream.bind("finished",(e=>{this.hooks.onFinished(this,e)})),this.stream.bind("buffer_too_long",(()=>{this.reconnect()}));try{this.stream.start()}catch(e){L.defer((()=>{this.onError(e),this.onClose(1006,"Could not start streaming",!1)}))}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}},ot={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},at={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},ct={getRequest:function(e){var t=new(ut.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},ht={createStreamingSocket(e){return this.createSocket(ot,e)},createPollingSocket(e){return this.createSocket(at,e)},createSocket:(e,t)=>new st(e,t),createXHR(e,t){return this.createRequest(ct,e,t)},createRequest:(e,t,r)=>new Qe(e,t,r),createXDR:function(e,t){return this.createRequest(Ze,e,t)}},ut={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:n,DependenciesReceivers:o,getDefaultStrategy:Xe,Transports:we,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),a.load(e.hooks.file,{useTLS:e.options.useTLS},(function(t,r){e.hooks.isInitialized()?(e.changeState("initialized"),r(!0)):(t&&e.onError(t),e.onClose(),r(!1))}))):e.onClose()},HTTPFactory:ht,TimelineTransport:Q,getXHRAPI:()=>window.XMLHttpRequest,getWebSocketAPI:()=>window.WebSocket||window.MozWebSocket,setup(e){window.Pusher=e;var t=()=>{this.onDocumentBody(e.ready)};window.JSON?t():a.load("json2",{},t)},getDocument:()=>document,getProtocol(){return this.getDocument().location.protocol},getAuthorizers:()=>({ajax:w,jsonp:J}),onDocumentBody(e){document.body?e():setTimeout((()=>{this.onDocumentBody(e)}),0)},createJSONPRequest:(e,t)=>new Z(e,t),createScriptRequest:e=>new X(e),getLocalStorage(){try{return window.localStorage}catch(e){return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){return new(this.getXHRAPI())},createMicrosoftXHR:()=>new ActiveXObject("Microsoft.XMLHTTP"),getNetwork:()=>_e,createWebSocket(e){return new(this.getWebSocketAPI())(e)},createSocketRequest(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported(e){var t=e?"https:":"http:",r=this.getProtocol();return Boolean(window.XDomainRequest)&&r===t},addUnloadListener(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)},randomInt:e=>Math.floor((window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)*e)};!function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(nt||(nt={}));var dt=nt;class lt{constructor(e,t,r){this.key=e,this.session=t,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}log(e,t){e<=this.options.level&&(this.events.push(j({},t,{timestamp:L.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(e){this.log(dt.ERROR,e)}info(e){this.log(dt.INFO,e)}debug(e){this.log(dt.DEBUG,e)}isEmpty(){return 0===this.events.length}send(e,t){var r=j({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(r,((e,r)=>{e||this.sent++,t&&t(e,r)})),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class ft{constructor(e,t,r,i){this.name=e,this.priority=t,this.transport=r,this.options=i||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(e,t){if(!this.isSupported())return pt(new m,t);if(this.priority<e)return pt(new p,t);var r=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),n=null,s=function(){i.unbind("initialized",s),i.connect()},o=function(){n=De.createHandshake(i,(function(e){r=!0,h(),t(null,e)}))},a=function(e){h(),t(e)},c=function(){var e;h(),e=Y(i),t(new g(e))},h=function(){i.unbind("initialized",s),i.unbind("open",o),i.unbind("error",a),i.unbind("closed",c)};return i.bind("initialized",s),i.bind("open",o),i.bind("error",a),i.bind("closed",c),i.initialize(),{abort:()=>{r||(h(),n?n.close():i.close())},forceMinPriority:e=>{r||this.priority<e&&(n?n.close():i.close())}}}}function pt(e,t){return L.defer((function(){t(e)})),{abort:function(){},forceMinPriority:function(){}}}const{Transports:gt}=ut;var bt=function(e,t,r,i,n,s){var o,a=gt[r];if(!a)throw new y(r);return e.enabledTransports&&-1===D(e.enabledTransports,t)||e.disabledTransports&&-1!==D(e.disabledTransports,t)?o=yt:(n=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},n),o=new ft(t,i,s?s.getAssistant(a):a,n)),o},yt={isSupported:function(){return!1},connect:function(e,t){var r=L.defer((function(){t(new m)}));return{abort:function(){r.ensureAborted()},forceMinPriority:function(){}}}},mt=e=>{if(void 0===ut.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,r)=>{const i=((e,t)=>{var r="socket_id="+encodeURIComponent(e.socketId);for(var i in t.params)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(t.params[i]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var i in e)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e[i])}return r})(t,e);ut.getAuthorizers()[e.transport](ut,i,e,h.UserAuthentication,r)}},vt=e=>{if(void 0===ut.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,r)=>{const i=((e,t)=>{var r="socket_id="+encodeURIComponent(e.socketId);for(var i in r+="&channel_name="+encodeURIComponent(e.channelName),t.params)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(t.params[i]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var i in e)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e[i])}return r})(t,e);ut.getAuthorizers()[e.transport](ut,i,e,h.ChannelAuthorization,r)}};const wt=(e,t,r)=>{const i={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return(t,n)=>{const s=e.channel(t.channelName);r(s,i).authorize(t.socketId,n)}};function _t(e,t){let r={activityTimeout:e.activityTimeout||s.activityTimeout,cluster:e.cluster,httpPath:e.httpPath||s.httpPath,httpPort:e.httpPort||s.httpPort,httpsPort:e.httpsPort||s.httpsPort,pongTimeout:e.pongTimeout||s.pongTimeout,statsHost:e.statsHost||s.stats_host,unavailableTimeout:e.unavailableTimeout||s.unavailableTimeout,wsPath:e.wsPath||s.wsPath,wsPort:e.wsPort||s.wsPort,wssPort:e.wssPort||s.wssPort,enableStats:xt(e),httpHost:Et(e),useTLS:It(e),wsHost:St(e),userAuthenticator:At(e),channelAuthorizer:Pt(e,t)};return"disabledTransports"in e&&(r.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(r.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(r.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(r.timelineParams=e.timelineParams),"nacl"in e&&(r.nacl=e.nacl),r}function Et(e){return e.httpHost?e.httpHost:e.cluster?`sockjs-${e.cluster}.pusher.com`:s.httpHost}function St(e){return e.wsHost?e.wsHost:`ws-${e.cluster}.pusher.com`}function It(e){return"https:"===ut.getProtocol()||!1!==e.forceTLS}function xt(e){return"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats}const Ot=e=>"customHandler"in e&&null!=e.customHandler;function At(e){const t=Object.assign(Object.assign({},s.userAuthentication),e.userAuthentication);return Ot(t)?t.customHandler:mt(t)}function Pt(e,t){const r=function(e,t){let r;if("channelAuthorization"in e)r=Object.assign(Object.assign({},s.channelAuthorization),e.channelAuthorization);else if(r={transport:e.authTransport||s.authTransport,endpoint:e.authEndpoint||s.authEndpoint},"auth"in e&&("params"in e.auth&&(r.params=e.auth.params),"headers"in e.auth&&(r.headers=e.auth.headers)),"authorizer"in e)return{customHandler:wt(t,r,e.authorizer)};return r}(e,t);return Ot(r)?r.customHandler:vt(r)}class Mt extends ae{constructor(e){super((function(e,t){G.debug(`No callbacks on watchlist events for ${e}`)})),this.pusher=e,this.bindWatchlistInternalEvent()}handleEvent(e){e.data.events.forEach((e=>{this.emit(e.name,e)}))}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",(e=>{"pusher_internal:watchlist_events"===e.event&&this.handleEvent(e)}))}}var kt=function(){let e,t;return{promise:new Promise(((r,i)=>{e=r,t=i})),resolve:e,reject:t}};class Tt extends ae{constructor(e){super((function(e,t){G.debug("No callbacks on user for "+e)})),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(e,t)=>{if(e)return G.warn(`Error during signin: ${e}`),void this._cleanup();this.pusher.send_event("pusher:signin",{auth:t.auth,user_data:t.user_data})},this.pusher=e,this.pusher.connection.bind("state_change",(({previous:e,current:t})=>{"connected"!==e&&"connected"===t&&this._signin(),"connected"===e&&"connected"!==t&&(this._cleanup(),this._newSigninPromiseIfNeeded())})),this.watchlist=new Mt(e),this.pusher.connection.bind("message",(e=>{"pusher:signin_success"===e.event&&this._onSigninSuccess(e.data),this.serverToUserChannel&&this.serverToUserChannel.name===e.channel&&this.serverToUserChannel.handleEvent(e)}))}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(e){try{this.user_data=JSON.parse(e.user_data)}catch(t){return G.error(`Failed parsing user data after signin: ${e.user_data}`),void this._cleanup()}if("string"!=typeof this.user_data.id||""===this.user_data.id)return G.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){this.serverToUserChannel=new Pe(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global(((e,t)=>{0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")&&this.emit(e,t)})),(e=>{e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.pusher.connection.state||e.subscribe()})(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested)return;if(this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:e,resolve:t,reject:r}=kt();e.done=!1;const i=()=>{e.done=!0};e.then(i).catch(i),this.signinDonePromise=e,this._signinDoneResolve=t}}class Rt{static ready(){Rt.isReady=!0;for(var e=0,t=Rt.instances.length;e<t;e++)Rt.instances[e].connect()}static getClientFeatures(){return q(F({ws:ut.Transports.ws},(function(e){return e.isSupported({})})))}constructor(e,t){!function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(e),function(e){if(null==e)throw"You must pass an options object";if(null==e.cluster)throw"Options object must provide a cluster";"disableStats"in e&&G.warn("The disableStats option is deprecated in favor of enableStats")}(t),this.key=e,this.options=t,this.config=_t(this.options,this),this.channels=De.createChannels(),this.global_emitter=new ae,this.sessionID=ut.randomInt(1e9),this.timeline=new lt(this.key,this.sessionID,{cluster:this.config.cluster,features:Rt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:dt.INFO,version:s.VERSION}),this.config.enableStats&&(this.timelineSender=De.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+ut.TimelineTransport.name})),this.connection=De.createConnectionManager(this.key,{getStrategy:e=>ut.getDefaultStrategy(this.config,e,bt),timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",(()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())})),this.connection.bind("message",(e=>{var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var r=this.channel(e.channel);r&&r.handleEvent(e)}t||this.global_emitter.emit(e.event,e.data)})),this.connection.bind("connecting",(()=>{this.channels.disconnect()})),this.connection.bind("disconnected",(()=>{this.channels.disconnect()})),this.connection.bind("error",(e=>{G.warn(e)})),Rt.instances.push(this),this.timeline.info({instances:Rt.instances.length}),this.user=new Tt(this),Rt.isReady&&this.connect()}switchCluster(e){const{appKey:t,cluster:r}=e;this.key=t,this.options=Object.assign(Object.assign({},this.options),{cluster:r}),this.config=_t(this.options,this),this.connection.switchCluster(this.key)}channel(e){return this.channels.find(e)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new C(6e4,(function(){t.send(e)}))}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(e,t,r){return this.global_emitter.bind(e,t,r),this}unbind(e,t,r){return this.global_emitter.unbind(e,t,r),this}bind_global(e){return this.global_emitter.bind_global(e),this}unbind_global(e){return this.global_emitter.unbind_global(e),this}unbind_all(e){return this.global_emitter.unbind_all(),this}subscribeAll(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)}subscribe(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t}unsubscribe(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()}send_event(e,t,r){return this.connection.send_event(e,t,r)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Rt.instances=[],Rt.isReady=!1,Rt.logToConsole=!1,Rt.Runtime=ut,Rt.ScriptReceivers=ut.ScriptReceivers,Rt.DependenciesReceivers=ut.DependenciesReceivers,Rt.auth_callbacks=ut.auth_callbacks;var Ct=t.default=Rt;ut.setup(Rt)}])},e.exports=t()},793:e=>{"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,i){var n=i&&i.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=new Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var h="",u=0,d=-1,l=e&&e.length||0,f=0;f<l;){if(37===e.charCodeAt(f)&&f+1<l){switch(d=d>-1?d:0,e.charCodeAt(f+1)){case 100:case 102:if(u>=c)break;if(null==r[u])break;d<f&&(h+=e.slice(d,f)),h+=Number(r[u]),d=f+2,f++;break;case 105:if(u>=c)break;if(null==r[u])break;d<f&&(h+=e.slice(d,f)),h+=Math.floor(Number(r[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c)break;if(void 0===r[u])break;d<f&&(h+=e.slice(d,f));var p=typeof r[u];if("string"===p){h+="'"+r[u]+"'",d=f+2,f++;break}if("function"===p){h+=r[u].name||"<anonymous>",d=f+2,f++;break}h+=n(r[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(h+=e.slice(d,f)),h+=String(r[u]),d=f+2,f++;break;case 37:d<f&&(h+=e.slice(d,f)),h+="%",d=f+2,f++,u--}++u}++f}if(-1===d)return e;d<l&&(h+=e.slice(d));return h}},3776:()=>{},9368:()=>{},4874:(e,t,r)=>{"use strict";const i=r(793);e.exports=o;const n=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},s={mapHttpRequest:l,mapHttpResponse:l,wrapRequestSerializer:f,wrapResponseSerializer:f,wrapErrorSerializer:f,req:l,res:l,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function o(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);const i=e.serializers||{},s=function(e,t){if(Array.isArray(e))return e.filter((function(e){return"!stdSerializers.err"!==e}));return!0===e&&Object.keys(t)}(e.browser.serialize,i);let l=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(l=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const f=e.level||"info",g=Object.create(r);g.log||(g.log=p),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,a(b,g,"error","log"),a(b,g,"fatal","error"),a(b,g,"warn","error"),a(b,g,"info","log"),a(b,g,"debug","log"),a(b,g,"trace","log")}});const b={transmit:t,serialize:s,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:d(e)};return g.levels=o.levels,g.level=f,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=p,g.serializers=i,g._serialize=s,g._stdErrSerialize=l,g.child=function(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},s&&r.serializers&&(n.serializers=r.serializers);const o=n.serializers;if(s&&o){var a=Object.assign({},i,o),d=!0===e.browser.serialize?Object.keys(a):s;delete r.serializers,c([r],d,a,this._stdErrSerialize)}function l(e){this._childLevel=1+(0|e._childLevel),this.error=h(e,r,"error"),this.fatal=h(e,r,"fatal"),this.warn=h(e,r,"warn"),this.info=h(e,r,"info"),this.debug=h(e,r,"debug"),this.trace=h(e,r,"trace"),a&&(this.serializers=a,this._serialize=d),t&&(this._logEvent=u([].concat(e._logEvent.bindings,r)))}return l.prototype=this,new l(this)},t&&(g._logEvent=u()),g}function a(e,t,r,s){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?p:a[r]?a[r]:n[r]||n[s]||p,function(e,t,r){if(!e.transmit&&t[r]===p)return;t[r]=(s=t[r],function(){const a=e.timestamp(),h=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var l=0;l<h.length;l++)h[l]=arguments[l];if(e.serialize&&!e.asObject&&c(h,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?s.call(d,function(e,t,r,n){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const s=r.slice();let a=s[0];const h={};n&&(h.time=n),h.level=o.levels.values[t];let u=1+(0|e._childLevel);if(u<1&&(u=1),null!==a&&"object"==typeof a){for(;u--&&"object"==typeof s[0];)Object.assign(h,s.shift());a=s.length?i(s.shift(),s):void 0}else"string"==typeof a&&(a=i(s.shift(),s));return void 0!==a&&(h.msg=a),h}(this,r,h,a)):s.apply(d,h),e.transmit){const i=e.transmit.level||t.level,n=o.levels.values[i],s=o.levels.values[r];if(s<n)return;!function(e,t,r){const i=t.send,n=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,h=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter((function(e){return-1===h.indexOf(e)})),e._logEvent.level.label=s,e._logEvent.level.value=o,i(s,e._logEvent,a),e._logEvent=u(h)}(this,{ts:a,methodLevel:r,methodValue:s,transmitLevel:i,transmitValue:o.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},h)}});var s}(e,t,r)}function c(e,t,r,i){for(const n in e)if(i&&e[n]instanceof Error)e[n]=o.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(const i in e[n])t&&t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function h(e,t,r){return function(){const i=new Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function u(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function d(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?g:b}function l(){return{}}function f(e){return e}function p(){}function g(){return!1}function b(){return Date.now()}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=s,o.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:b,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},1995:(e,t,r)=>{"use strict";r.d(t,{mb:()=>I,Ao:()=>m,vZ:()=>w,pV:()=>$,D8:()=>F,IN:()=>E,jL:()=>y,lH:()=>X,dC:()=>Q});Symbol();const i=Symbol();const n=Object.getPrototypeOf,s=new WeakMap,o=e=>e&&(s.has(e)?s.get(e):n(e)===Object.prototype||n(e)===Array.prototype),a=(e,t=!0)=>{s.set(e,t)},c=e=>"object"==typeof e&&null!==e,h=new WeakMap,u=new WeakSet,d=(e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>c(e)&&!u.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),n=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},s=new WeakMap,d=(e,t,r=n)=>{const i=s.get(e);if((null==i?void 0:i[0])===t)return i[1];const o=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return a(o,!0),s.set(e,[t,o]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(o,t))return;const i=Reflect.get(e,t),n={value:i,enumerable:!0,configurable:!0};if(u.has(i))a(i,!1);else if(i instanceof Promise)delete n.value,n.get=()=>r(i);else if(h.has(i)){const[e,t]=h.get(i);n.value=d(e,t(),r)}Object.defineProperty(o,t,n)})),Object.preventExtensions(o)},l=new WeakMap,f=[1,1],p=n=>{if(!c(n))throw new Error("object required");const s=l.get(n);if(s)return s;let a=f[0];const g=new Set,b=(e,t=++f[0])=>{a!==t&&(a=t,g.forEach((r=>r(e,t))))};let y=f[1];const m=e=>(t,r)=>{const i=[...t];i[1]=[e,...i[1]],b(i,r)},v=new Map,w=e=>{var t;const r=v.get(e);r&&(v.delete(e),null==(t=r[1])||t.call(r))},_=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n)),E={deleteProperty(e,t){const r=Reflect.get(e,t);w(t);const i=Reflect.deleteProperty(e,t);return i&&b(["delete",[t],r]),i},set(t,n,s,a){const d=Reflect.has(t,n),f=Reflect.get(t,n,a);if(d&&(e(f,s)||l.has(s)&&e(f,l.get(s))))return!0;w(n),c(s)&&(s=(e=>o(e)&&e[i]||null)(s)||s);let y=s;if(s instanceof Promise)s.then((e=>{s.status="fulfilled",s.value=e,b(["resolve",[n],e])})).catch((e=>{s.status="rejected",s.reason=e,b(["reject",[n],e])}));else{!h.has(s)&&r(s)&&(y=p(s));const e=!u.has(y)&&h.get(y);e&&((e,t)=>{if(v.has(e))throw new Error("prop listener already exists");if(g.size){const r=t[3](m(e));v.set(e,[t,r])}else v.set(e,[t])})(n,e)}return Reflect.set(t,n,y,a),b(["set",[n],s,f]),!0}},S=t(_,E);l.set(n,S);const I=[_,(e=++f[1])=>(y===e||g.size||(y=e,v.forEach((([t])=>{const r=t[1](e);r>a&&(a=r)}))),a),d,e=>{g.add(e),1===g.size&&v.forEach((([e,t],r)=>{if(t)throw new Error("remove already exists");const i=e[3](m(r));v.set(r,[e,i])}));return()=>{g.delete(e),0===g.size&&v.forEach((([e,t],r)=>{t&&(t(),v.set(r,[e]))}))}}];return h.set(S,I),Reflect.ownKeys(n).forEach((e=>{const t=Object.getOwnPropertyDescriptor(n,e);"value"in t&&(S[e]=n[e],delete t.value,delete t.writable),Object.defineProperty(_,e,t)})),S})=>[p,h,u,e,t,r,n,s,d,l,f],[l]=d();function f(e={}){return l(e)}function p(e,t,r){const i=h.get(e);let n;i||console.warn("Please use proxy object");const s=[],o=i[3];let a=!1;const c=o((e=>{s.push(e),r?t(s.splice(0)):n||(n=Promise.resolve().then((()=>{n=void 0,a&&t(s.splice(0))})))}));return a=!0,()=>{a=!1,c()}}var g=r(8287).hp;const b=f({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),y={state:b,subscribe:e=>p(b,(()=>e(b))),push(e,t){e!==b.view&&(b.view=e,t&&(b.data=t),b.history.push(e))},reset(e){b.view=e,b.history=[e]},replace(e){b.history.length>1&&(b.history[b.history.length-1]=e,b.view=e)},goBack(){if(b.history.length>1){b.history.pop();const[e]=b.history.slice(-1);b.view=e}},setData(e){b.data=e}},m={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>"undefined"!=typeof window&&Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>m.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){const e=navigator.userAgent.toLowerCase();return m.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,isTelegram:()=>"undefined"!=typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto)),formatNativeUrl(e,t,r){if(m.isHttpUrl(e))return this.formatUniversalUrl(e,t,r);let i=e;i.includes("://")||(i=e.replaceAll("/","").replaceAll(":",""),i=`${i}://`),i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);return`${i}wc?uri=${encodeURIComponent(t)}`},formatUniversalUrl(e,t,r){if(!m.isHttpUrl(e))return this.formatNativeUrl(e,t,r);let i=e;if(i.startsWith("https://t.me")){const e=g.from(t).toString("base64").replace(/[=]/g,"");i.endsWith("/")&&(i=i.slice(0,-1)),this.setWalletConnectDeepLink(i,r);const n=new URL(i);n.searchParams.set("startapp",e);return n.toString()}i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);return`${i}wc?uri=${encodeURIComponent(t)}`},wait:async e=>new Promise((t=>{setTimeout(t,e)})),openHref(e,t){const r=this.isTelegram()?"_blank":t;window.open(e,r,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(m.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch(e){console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(m.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch(e){console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(m.WALLETCONNECT_DEEPLINK_CHOICE)}catch(e){console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{"undefined"!=typeof localStorage&&localStorage.setItem(m.WCM_VERSION,"2.7.0")}catch(e){console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=null==(e=y.state.data)?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t}},v=f({enabled:"undefined"!=typeof location&&(location.hostname.includes("localhost")||location.protocol.includes("https")),userSessionId:"",events:[],connectedWalletId:void 0}),w={state:v,subscribe:e=>p(v.events,(()=>e(function(e,t){const r=h.get(e);r||console.warn("Please use proxy object");const[i,n,s]=r;return s(i,n(),t)}(v.events[v.events.length-1])))),initialize(){v.enabled&&void 0!==(null==crypto?void 0:crypto.randomUUID)&&(v.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){v.connectedWalletId=e},click(e){if(v.enabled){const t={type:"CLICK",name:e.name,userSessionId:v.userSessionId,timestamp:Date.now(),data:e};v.events.push(t)}},track(e){if(v.enabled){const t={type:"TRACK",name:e.name,userSessionId:v.userSessionId,timestamp:Date.now(),data:e};v.events.push(t)}},view(e){if(v.enabled){const t={type:"VIEW",name:e.name,userSessionId:v.userSessionId,timestamp:Date.now(),data:e};v.events.push(t)}}},_=f({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),E={state:_,subscribe:e=>p(_,(()=>e(_))),setChains(e){_.chains=e},setWalletConnectUri(e){_.walletConnectUri=e},setIsCustomDesktop(e){_.isCustomDesktop=e},setIsCustomMobile(e){_.isCustomMobile=e},setIsDataLoaded(e){_.isDataLoaded=e},setIsUiLoaded(e){_.isUiLoaded=e},setIsAuth(e){_.isAuth=e}},S=f({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),I={state:S,subscribe:e=>p(S,(()=>e(S))),setConfig(e){var t,r;w.initialize(),E.setChains(e.chains),E.setIsAuth(Boolean(e.enableAuthMode)),E.setIsCustomMobile(Boolean(null==(t=e.mobileWallets)?void 0:t.length)),E.setIsCustomDesktop(Boolean(null==(r=e.desktopWallets)?void 0:r.length)),m.setModalVersionInStorage(),Object.assign(S,e)}};var x=Object.defineProperty,O=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k="https://explorer-api.walletconnect.com",T="wcm",R="js-2.7.0";async function C(e,t){const r=((e,t)=>{for(var r in t||(t={}))A.call(t,r)&&M(e,r,t[r]);if(O)for(var r of O(t))P.call(t,r)&&M(e,r,t[r]);return e})({sdkType:T,sdkVersion:R},t),i=new URL(e,k);i.searchParams.append("projectId",I.state.projectId),Object.entries(r).forEach((([e,t])=>{t&&i.searchParams.append(e,String(t))}));return(await fetch(i)).json()}const N={getDesktopListings:async e=>C("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>C("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>C("/w3m/v1/getInjectedListings",e),getAllListings:async e=>C("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${k}/w3m/v1/getWalletImage/${e}?projectId=${I.state.projectId}&sdkType=${T}&sdkVersion=${R}`,getAssetImageUrl:e=>`${k}/w3m/v1/getAssetImage/${e}?projectId=${I.state.projectId}&sdkType=${T}&sdkVersion=${R}`};var L=Object.defineProperty,j=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const q=m.isMobile(),B=f({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),$={state:B,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=I.state;if("NONE"===e||"ALL"===t&&!e)return B.recomendedWallets;if(m.isArray(e)){const t={recommendedIds:e.join(",")},{listings:r}=await N.getAllListings(t),i=Object.values(r);i.sort(((t,r)=>e.indexOf(t.id)-e.indexOf(r.id))),B.recomendedWallets=i}else{const{chains:e,isAuth:r}=E.state,i=null==e?void 0:e.join(","),n=m.isArray(t),s={page:1,sdks:r?"auth_v1":void 0,entries:m.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:n?t.join(","):void 0},{listings:o}=q?await N.getMobileListings(s):await N.getDesktopListings(s);B.recomendedWallets=Object.values(o)}return B.recomendedWallets},async getWallets(e){const t=((e,t)=>{for(var r in t||(t={}))U.call(t,r)&&z(e,r,t[r]);if(j)for(var r of j(t))D.call(t,r)&&z(e,r,t[r]);return e})({},e),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:i}=I.state,{recomendedWallets:n}=B;if("ALL"===i)return B.wallets;n.length?t.excludedIds=n.map((e=>e.id)).join(","):m.isArray(r)&&(t.excludedIds=r.join(",")),m.isArray(i)&&(t.excludedIds=[t.excludedIds,i].filter(Boolean).join(",")),E.state.isAuth&&(t.sdks="auth_v1");const{page:s,search:o}=e,{listings:a,total:c}=q?await N.getMobileListings(t):await N.getDesktopListings(t),h=Object.values(a),u=o?"search":"wallets";return B[u]={listings:[...B[u].listings,...h],total:c,page:null!=s?s:1},{listings:h,total:c}},getWalletImageUrl:e=>N.getWalletImageUrl(e),getAssetImageUrl:e=>N.getAssetImageUrl(e),resetSearch(){B.search={listings:[],total:0,page:1}}},V=f({open:!1}),F={state:V,subscribe:e=>p(V,(()=>e(V))),open:async e=>new Promise((t=>{const{isUiLoaded:r,isDataLoaded:i}=E.state;if(m.removeWalletConnectDeepLink(),E.setWalletConnectUri(null==e?void 0:e.uri),E.setChains(null==e?void 0:e.chains),y.reset("ConnectWallet"),r&&i)V.open=!0,t();else{const e=setInterval((()=>{const r=E.state;r.isUiLoaded&&r.isDataLoaded&&(clearInterval(e),V.open=!0,t())}),200)}})),close(){V.open=!1}};var K=Object.defineProperty,H=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const J=f({themeMode:"undefined"!=typeof matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),X={state:J,subscribe:e=>p(J,(()=>e(J))),setThemeConfig(e){const{themeMode:t,themeVariables:r}=e;t&&(J.themeMode=t),r&&(J.themeVariables=((e,t)=>{for(var r in t||(t={}))W.call(t,r)&&G(e,r,t[r]);if(H)for(var r of H(t))Y.call(t,r)&&G(e,r,t[r]);return e})({},r))}},Z=f({open:!1,message:"",variant:"success"}),Q={state:Z,subscribe:e=>p(Z,(()=>e(Z))),openToast(e,t){Z.open=!0,Z.message=e,Z.variant=t},closeToast(){Z.open=!1}}},9999:(e,t,r)=>{"use strict";function i(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function n(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");i(e.outputLen),i(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){n(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>o,DO:()=>n,Fe:()=>i,Ht:()=>a,sd:()=>s})},9604:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>f,Fc:()=>u,Id:()=>l,O8:()=>o,qv:()=>c,po:()=>g,Ow:()=>a,ZJ:()=>d,DH:()=>s,ld:()=>p});const i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var n=r(9999);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}const c=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function h(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function u(e){for(let t=0;t<e.length;t++)e[t]=h(e[t])}function d(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),(0,n.DO)(e),e}function l(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];(0,n.DO)(i),t+=i.length}const r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){const n=e[t];r.set(n,i),i+=n.length}return r}class f{clone(){return this._cloneInto()}}function p(e){const t=t=>e().update(d(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function g(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));if(i&&"function"==typeof i.randomBytes)return i.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}},1636:e=>{"use strict";e.exports={rE:"6.6.1"}}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>666===e?"js/666.js":384===e?"js/384.js":void 0,i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},i.l=(t,r,n,s)=>{if(e[t])e[t].push(r);else{var o,a;if(void 0!==n)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var u=c[h];if(u.getAttribute("src")==t){o=u;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.src=t),e[t]=[r];var d=(r,i)=>{o.onerror=o.onload=null,clearTimeout(l);var n=e[t];if(delete e[t],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(i))),r)return r(i)},l=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),a&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/",(()=>{var e={847:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=s);var o=i.p+i.u(t),a=new Error;i.l(o,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[o,a,c]=r,h=0;if(o.some((t=>0!==e[t]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(c)c(i)}for(t&&t(r);h<o.length;h++)s=o[h],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};i.r(e),i.d(e,{identity:()=>Po});var t={};i.r(t),i.d(t,{base2:()=>Mo});var r={};i.r(r),i.d(r,{base8:()=>ko});var n={};i.r(n),i.d(n,{base10:()=>To});var s={};i.r(s),i.d(s,{base16:()=>Ro,base16upper:()=>Co});var o={};i.r(o),i.d(o,{base32:()=>No,base32hex:()=>Do,base32hexpad:()=>qo,base32hexpadupper:()=>Bo,base32hexupper:()=>zo,base32pad:()=>jo,base32padupper:()=>Uo,base32upper:()=>Lo,base32z:()=>$o});var a={};i.r(a),i.d(a,{base36:()=>Vo,base36upper:()=>Fo});var c={};i.r(c),i.d(c,{base58btc:()=>Ko,base58flickr:()=>Ho});var h={};i.r(h),i.d(h,{base64:()=>Wo,base64pad:()=>Yo,base64url:()=>Go,base64urlpad:()=>Jo});var u={};i.r(u),i.d(u,{base256emoji:()=>ea});var d={};i.r(d),i.d(d,{sha256:()=>xa,sha512:()=>Oa});var l={};i.r(l),i.d(l,{identity:()=>Pa});var f={};i.r(f),i.d(f,{code:()=>ka,decode:()=>Ra,encode:()=>Ta,name:()=>Ma});var p={};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},v.apply(this,arguments)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function S(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=_(e);if(t){var n=_(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return S(this,r)}}i.r(p),i.d(p,{code:()=>ja,decode:()=>Da,encode:()=>Ua,name:()=>La});var x=function(){function e(){b(this,e)}return m(e,[{key:"listenForWhisper",value:function(e,t){return this.listen(".client-"+e,t)}},{key:"notification",value:function(e){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",e)}},{key:"stopListeningForWhisper",value:function(e,t){return this.stopListening(".client-"+e,t)}}]),e}(),O=function(){function e(t){b(this,e),this.namespace=t}return m(e,[{key:"format",value:function(e){return[".","\\"].includes(e.charAt(0))?e.substring(1):(this.namespace&&(e=this.namespace+"."+e),e.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(e){this.namespace=e}}]),e}(),A=function(e){w(r,e);var t=I(r);function r(e,i,n){var s;return b(this,r),(s=t.call(this)).name=i,s.pusher=e,s.options=n,s.eventFormatter=new O(s.options.namespace),s.subscribe(),s}return m(r,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(e,t){return this.on(this.eventFormatter.format(e),t),this}},{key:"listenToAll",value:function(e){var t=this;return this.subscription.bind_global((function(r,i){if(!r.startsWith("pusher:")){var n=t.options.namespace.replace(/\./g,"\\"),s=r.startsWith(n)?r.substring(n.length+1):"."+r;e(s,i)}})),this}},{key:"stopListening",value:function(e,t){return t?this.subscription.unbind(this.eventFormatter.format(e),t):this.subscription.unbind(this.eventFormatter.format(e)),this}},{key:"stopListeningToAll",value:function(e){return e?this.subscription.unbind_global(e):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(e){return this.on("pusher:subscription_succeeded",(function(){e()})),this}},{key:"error",value:function(e){return this.on("pusher:subscription_error",(function(t){e(t)})),this}},{key:"on",value:function(e,t){return this.subscription.bind(e,t),this}}]),r}(x),P=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"whisper",value:function(e,t){return this.pusher.channels.channels[this.name].trigger("client-".concat(e),t),this}}]),r}(A),M=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"whisper",value:function(e,t){return this.pusher.channels.channels[this.name].trigger("client-".concat(e),t),this}}]),r}(A),k=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"here",value:function(e){return this.on("pusher:subscription_succeeded",(function(t){e(Object.keys(t.members).map((function(e){return t.members[e]})))})),this}},{key:"joining",value:function(e){return this.on("pusher:member_added",(function(t){e(t.info)})),this}},{key:"whisper",value:function(e,t){return this.pusher.channels.channels[this.name].trigger("client-".concat(e),t),this}},{key:"leaving",value:function(e){return this.on("pusher:member_removed",(function(t){e(t.info)})),this}}]),r}(P),T=function(e){w(r,e);var t=I(r);function r(e,i,n){var s;return b(this,r),(s=t.call(this)).events={},s.listeners={},s.name=i,s.socket=e,s.options=n,s.eventFormatter=new O(s.options.namespace),s.subscribe(),s}return m(r,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(e,t){return this.on(this.eventFormatter.format(e),t),this}},{key:"stopListening",value:function(e,t){return this.unbindEvent(this.eventFormatter.format(e),t),this}},{key:"subscribed",value:function(e){return this.on("connect",(function(t){e(t)})),this}},{key:"error",value:function(e){return this}},{key:"on",value:function(e,t){var r=this;return this.listeners[e]=this.listeners[e]||[],this.events[e]||(this.events[e]=function(t,i){r.name===t&&r.listeners[e]&&r.listeners[e].forEach((function(e){return e(i)}))},this.socket.on(e,this.events[e])),this.listeners[e].push(t),this}},{key:"unbind",value:function(){var e=this;Object.keys(this.events).forEach((function(t){e.unbindEvent(t)}))}},{key:"unbindEvent",value:function(e,t){this.listeners[e]=this.listeners[e]||[],t&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t}))),t&&0!==this.listeners[e].length||(this.events[e]&&(this.socket.removeListener(e,this.events[e]),delete this.events[e]),delete this.listeners[e])}}]),r}(x),R=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"whisper",value:function(e,t){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(e),data:t}),this}}]),r}(T),C=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"here",value:function(e){return this.on("presence:subscribed",(function(t){e(t.map((function(e){return e.user_info})))})),this}},{key:"joining",value:function(e){return this.on("presence:joining",(function(t){return e(t.user_info)})),this}},{key:"whisper",value:function(e,t){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(e),data:t}),this}},{key:"leaving",value:function(e){return this.on("presence:leaving",(function(t){return e(t.user_info)})),this}}]),r}(R),N=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(e,t){return this}},{key:"listenToAll",value:function(e){return this}},{key:"stopListening",value:function(e,t){return this}},{key:"subscribed",value:function(e){return this}},{key:"error",value:function(e){return this}},{key:"on",value:function(e,t){return this}}]),r}(x),L=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"whisper",value:function(e,t){return this}}]),r}(N),j=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"whisper",value:function(e,t){return this}}]),r}(N),U=function(e){w(r,e);var t=I(r);function r(){return b(this,r),t.apply(this,arguments)}return m(r,[{key:"here",value:function(e){return this}},{key:"joining",value:function(e){return this}},{key:"whisper",value:function(e,t){return this}},{key:"leaving",value:function(e){return this}}]),r}(L),D=function(){function e(t){b(this,e),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(t),this.connect()}return m(e,[{key:"setOptions",value:function(e){this.options=v(this._defaultOptions,e);var t=this.csrfToken();return t&&(this.options.auth.headers["X-CSRF-TOKEN"]=t,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=t),(t=this.options.bearerToken)&&(this.options.auth.headers.Authorization="Bearer "+t,this.options.userAuthentication.headers.Authorization="Bearer "+t),e}},{key:"csrfToken",value:function(){var e;return"undefined"!=typeof window&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:"undefined"!=typeof document&&"function"==typeof document.querySelector&&(e=document.querySelector('meta[name="csrf-token"]'))?e.getAttribute("content"):null}}]),e}(),z=function(e){w(r,e);var t=I(r);function r(){var e;return b(this,r),(e=t.apply(this,arguments)).channels={},e}return m(r,[{key:"connect",value:function(){void 0!==this.options.client?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(e,t,r){return this.channel(e).listen(t,r)}},{key:"channel",value:function(e){return this.channels[e]||(this.channels[e]=new A(this.pusher,e,this.options)),this.channels[e]}},{key:"privateChannel",value:function(e){return this.channels["private-"+e]||(this.channels["private-"+e]=new P(this.pusher,"private-"+e,this.options)),this.channels["private-"+e]}},{key:"encryptedPrivateChannel",value:function(e){return this.channels["private-encrypted-"+e]||(this.channels["private-encrypted-"+e]=new M(this.pusher,"private-encrypted-"+e,this.options)),this.channels["private-encrypted-"+e]}},{key:"presenceChannel",value:function(e){return this.channels["presence-"+e]||(this.channels["presence-"+e]=new k(this.pusher,"presence-"+e,this.options)),this.channels["presence-"+e]}},{key:"leave",value:function(e){var t=this;[e,"private-"+e,"private-encrypted-"+e,"presence-"+e].forEach((function(e,r){t.leaveChannel(e)}))}},{key:"leaveChannel",value:function(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),r}(D),q=function(e){w(r,e);var t=I(r);function r(){var e;return b(this,r),(e=t.apply(this,arguments)).channels={},e}return m(r,[{key:"connect",value:function(){var e=this,t=this.getSocketIO();return this.socket=t(this.options.host,this.options),this.socket.on("reconnect",(function(){Object.values(e.channels).forEach((function(e){e.subscribe()}))})),this.socket}},{key:"getSocketIO",value:function(){if(void 0!==this.options.client)return this.options.client;if("undefined"!=typeof io)return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(e,t,r){return this.channel(e).listen(t,r)}},{key:"channel",value:function(e){return this.channels[e]||(this.channels[e]=new T(this.socket,e,this.options)),this.channels[e]}},{key:"privateChannel",value:function(e){return this.channels["private-"+e]||(this.channels["private-"+e]=new R(this.socket,"private-"+e,this.options)),this.channels["private-"+e]}},{key:"presenceChannel",value:function(e){return this.channels["presence-"+e]||(this.channels["presence-"+e]=new C(this.socket,"presence-"+e,this.options)),this.channels["presence-"+e]}},{key:"leave",value:function(e){var t=this;[e,"private-"+e,"presence-"+e].forEach((function(e){t.leaveChannel(e)}))}},{key:"leaveChannel",value:function(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),r}(D),B=function(e){w(r,e);var t=I(r);function r(){var e;return b(this,r),(e=t.apply(this,arguments)).channels={},e}return m(r,[{key:"connect",value:function(){}},{key:"listen",value:function(e,t,r){return new N}},{key:"channel",value:function(e){return new N}},{key:"privateChannel",value:function(e){return new L}},{key:"encryptedPrivateChannel",value:function(e){return new j}},{key:"presenceChannel",value:function(e){return new U}},{key:"leave",value:function(e){}},{key:"leaveChannel",value:function(e){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),r}(D),$=function(){function e(t){b(this,e),this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return m(e,[{key:"channel",value:function(e){return this.connector.channel(e)}},{key:"connect",value:function(){if("reverb"==this.options.broadcaster)this.connector=new z(v(v({},this.options),{cluster:""}));else if("pusher"==this.options.broadcaster)this.connector=new z(this.options);else if("socket.io"==this.options.broadcaster)this.connector=new q(this.options);else if("null"==this.options.broadcaster)this.connector=new B(this.options);else{if("function"!=typeof this.options.broadcaster)throw new Error("Broadcaster ".concat(g(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."));this.connector=this.options.broadcaster(this.options)}}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(e){return this.connector.presenceChannel(e)}},{key:"leave",value:function(e){this.connector.leave(e)}},{key:"leaveChannel",value:function(e){this.connector.leaveChannel(e)}},{key:"leaveAllChannels",value:function(){for(var e in this.connector.channels)this.leaveChannel(e)}},{key:"listen",value:function(e,t,r){return this.connector.listen(e,t,r)}},{key:"private",value:function(e){return this.connector.privateChannel(e)}},{key:"encryptedPrivate",value:function(e){if(this.connector instanceof q)throw new Error("Broadcaster ".concat(g(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(e)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){"function"==typeof Vue&&Vue.http&&this.registerVueRequestInterceptor(),"function"==typeof axios&&this.registerAxiosRequestInterceptor(),"function"==typeof jQuery&&this.registerjQueryAjaxSetup(),"object"===("undefined"==typeof Turbo?"undefined":g(Turbo))&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var e=this;Vue.http.interceptors.push((function(t,r){e.socketId()&&t.headers.set("X-Socket-ID",e.socketId()),r()}))}},{key:"registerAxiosRequestInterceptor",value:function(){var e=this;axios.interceptors.request.use((function(t){return e.socketId()&&(t.headers["X-Socket-Id"]=e.socketId()),t}))}},{key:"registerjQueryAjaxSetup",value:function(){var e=this;void 0!==jQuery.ajax&&jQuery.ajaxPrefilter((function(t,r,i){e.socketId()&&i.setRequestHeader("X-Socket-Id",e.socketId())}))}},{key:"registerTurboRequestInterceptor",value:function(){var e=this;document.addEventListener("turbo:before-fetch-request",(function(t){t.detail.fetchOptions.headers["X-Socket-Id"]=e.socketId()}))}}]),e}(),V=i(6479),F=i(1995);class K{constructor(e){this.openModal=F.D8.open,this.closeModal=F.D8.close,this.subscribeModal=F.D8.subscribe,this.setTheme=F.lH.setThemeConfig,F.lH.setThemeConfig(e),F.mb.setConfig(e),this.initUi()}async initUi(){if("undefined"!=typeof window){await i.e(666).then(i.bind(i,1666));const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),F.IN.setIsUiLoaded(!0)}}}var H=i(7007),W=i.n(H),Y=i(8900);class G{}class J extends G{constructor(e){super()}}const X=Y.FIVE_SECONDS,Z="heartbeat_pulse";class Q extends J{constructor(e){super(e),this.events=new H.EventEmitter,this.interval=X,this.interval=e?.interval||X}static async init(e){const t=new Q(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),(0,Y.toMiliseconds)(this.interval))}pulse(){this.events.emit(Z)}}const ee=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,te=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,re=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function ie(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function ne(e,t={}){if("string"!=typeof e)return e;const r=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!re.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(ee.test(e)||te.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,ie)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}var se=i(8287).hp;function oe(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function ae(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return ae(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const ce="base64:";function he(e){return"string"==typeof e?e:ce+function(e){if(globalThis.Buffer)return se.from(e).toString("base64");return globalThis.btoa(String.fromCodePoint(...e))}(e)}function ue(e){return"string"!=typeof e?e:e.startsWith(ce)?function(e){if(globalThis.Buffer)return se.from(e,"base64");return Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}(e.slice(7)):e}function de(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function le(...e){return de(e.join(":"))}function fe(e){return(e=de(e))?e+":":""}const pe=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function ge(e={}){const t={mounts:{"":e.driver||pe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},i=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),n=(e,r)=>{if(t.watching){r=de(r);for(const i of t.watchListeners)i(e,r)}},s=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,i)=>{const n=new Map,s=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(const i of e){const e="string"==typeof i,n=de(e?i:i.key),o=e?void 0:i.value,a=e||!i.options?t:{...t,...i.options},c=r(n);s(c).items.push({key:n,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...n.values()].map((e=>i(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=de(e);const{relativeKey:i,driver:n}=r(e);return oe(n.hasItem,i,t)},getItem(e,t={}){e=de(e);const{relativeKey:i,driver:n}=r(e);return oe(n.getItem,i,t).then((e=>ne(e)))},getItems:(e,t={})=>o(e,t,(e=>e.driver.getItems?oe(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:le(e.base,t.key),value:ne(t.value)}))))):Promise.all(e.items.map((t=>oe(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:ne(e)})))))))),getItemRaw(e,t={}){e=de(e);const{relativeKey:i,driver:n}=r(e);return n.getItemRaw?oe(n.getItemRaw,i,t):oe(n.getItem,i,t).then((e=>ue(e)))},async setItem(e,t,i={}){if(void 0===t)return a.removeItem(e);e=de(e);const{relativeKey:s,driver:o}=r(e);o.setItem&&(await oe(o.setItem,s,ae(t),i),o.watch||n("update",e))},async setItems(e,t){await o(e,t,(async e=>{if(e.driver.setItems)return oe(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:ae(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>oe(e.driver.setItem,t.relativeKey,ae(t.value),t.options))))}))},async setItemRaw(e,t,i={}){if(void 0===t)return a.removeItem(e,i);e=de(e);const{relativeKey:s,driver:o}=r(e);if(o.setItemRaw)await oe(o.setItemRaw,s,t,i);else{if(!o.setItem)return;await oe(o.setItem,s,he(t),i)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=de(e);const{relativeKey:i,driver:s}=r(e);s.removeItem&&(await oe(s.removeItem,i,t),(t.removeMeta||t.removeMata)&&await oe(s.removeItem,i+"$",t),s.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=de(e);const{relativeKey:i,driver:n}=r(e),s=Object.create(null);if(n.getMeta&&Object.assign(s,await oe(n.getMeta,i,t)),!t.nativeOnly){const e=await oe(n.getItem,i+"$",t).then((e=>ne(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=fe(e);const r=i(e,!0);let n=[];const s=[];let o=!0;for(const e of r){e.driver.flags?.maxDepth||(o=!1);const r=await oe(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+de(t);n.some((e=>r.startsWith(e)))||s.push(r)}n=[e.mountpoint,...n.filter((t=>!t.startsWith(e.mountpoint)))]}const a=void 0!==t.maxDepth&&!o;return s.filter((r=>(!a||function(e,t){if(void 0===t)return!0;let r=0,i=e.indexOf(":");for(;i>-1;)r++,i=e.indexOf(":",i+1);return r<=t}(r,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(r,e)))},async clear(e,t={}){e=fe(e),await Promise.all(i(e,!1).map((async e=>{if(e.driver.clear)return oe(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>ye(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await be(t.mounts[e],n,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await s()}),async unwatch(){t.watchListeners=[],await s()},mount(e,r){if((e=fe(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(be(r,n,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),a},async unmount(e,r=!0){(e=fe(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await ye(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=de(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=de(e);return i(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,r={})=>a.setItem(e,t,r),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}function be(e,t,r){return e.watch?e.watch(((e,i)=>t(e,r+i))):()=>{}}async function ye(e){"function"==typeof e.dispose&&await oe(e.dispose)}function me(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function ve(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const i=me(r);return(e,r)=>i.then((i=>r(i.transaction(t,e).objectStore(t))))}let we;function _e(){return we||(we=ve("keyval-store","keyval")),we}function Ee(e,t=_e()){return t("readonly",(t=>me(t.get(e))))}function Se(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},me(e.transaction)}function Ie(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}function xe(e){return"string"==typeof e?e:(t=e,JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var t}var Oe=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let i;return e.dbName&&e.storeName&&(i=ve(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await Ee(r(e),i)>"u"),getItem:async e=>await Ee(r(e),i)??null,setItem:(e,t)=>function(e,t,r=_e()){return r("readwrite",(r=>(r.put(t,e),me(r.transaction))))}(r(e),t,i),removeItem:e=>function(e,t=_e()){return t("readwrite",(t=>(t.delete(e),me(t.transaction))))}(r(e),i),getKeys:()=>function(e=_e()){return e("readonly",(e=>{if(e.getAllKeys)return me(e.getAllKeys());const t=[];return Se(e,(e=>t.push(e.key))).then((()=>t))}))}(i),clear:()=>function(e=_e()){return e("readwrite",(e=>(e.clear(),me(e.transaction))))}(i)}};class Ae{constructor(){this.indexedDb=ge({driver:Oe({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,xe(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof i.g<"u"?i.g:typeof self<"u"?self:{},Me={exports:{}};function ke(e){var t;return[e[0],Ie(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof Pe<"u"&&Pe.localStorage?Me.exports=Pe.localStorage:typeof window<"u"&&window.localStorage?Me.exports=window.localStorage:Me.exports=new t}();class Te{constructor(){this.localStorage=Me.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(ke)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return Ie(t)}async setItem(e,t){this.localStorage.setItem(e,xe(t))}async removeItem(e){this.localStorage.removeItem(e)}}const Re=async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))};class Ce{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new Te;this.storage=e;try{(async(e,t,r)=>{const i="wc_storage_version",n=await t.getItem(i);if(n&&n>=1)return void r(t);const s=await e.getKeys();if(!s.length)return void r(t);const o=[];for(;s.length;){const r=s.shift();if(!r)continue;const i=r.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){const i=await e.getItem(r);await t.setItem(r,i),o.push(r)}}await t.setItem(i,1),r(t),Re(e,o)})(e,new Ae,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var Ne=i(4874),Le=i.n(Ne);const je="info",Ue="custom_context";class De{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class ze{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new De(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class qe{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=Ne.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new ze(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Ne.levels.values.error?console.error(e):t===Ne.levels.values.warn?console.warn(e):t===Ne.levels.values.debug?console.debug(e):t===Ne.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(xe({timestamp:(new Date).toISOString(),log:e}));const t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new ze(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(xe({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class Be{constructor(e,t=1024e3){this.baseChunkLogger=new qe(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class $e{constructor(e,t=1024e3){this.baseChunkLogger=new qe(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var Ve=Object.defineProperty,Fe=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,Ge=(e,t,r)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Je=(e,t)=>{for(var r in t||(t={}))We.call(t,r)&&Ge(e,r,t[r]);if(He)for(var r of He(t))Ye.call(t,r)&&Ge(e,r,t[r]);return e},Xe=(e,t)=>Fe(e,Ke(t));function Ze(e){return Xe(Je({},e),{level:e?.level||je})}function Qe(e,t=Ue){let r="";return r=typeof e.bindings>"u"?function(e,t=Ue){return e[t]||""}(e,t):e.bindings().context||"",r}function et(e,t,r=Ue){const i=function(e,t,r=Ue){const i=Qe(e,r);return i.trim()?`${i}/${t}`:t}(e,t,r);return function(e,t,r=Ue){return e[r]=t,e}(e.child({context:i}),i,r)}function tt(e){return typeof e.loggerOverride<"u"&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?function(e){var t,r;const i=new Be(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:Le()(Xe(Je({},e.opts),{level:"trace",browser:Xe(Je({},null==(r=e.opts)?void 0:r.browser),{write:e=>i.write(e)})})),chunkLoggerController:i}}(e):function(e){var t;const r=new $e(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:Le()(Xe(Je({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}var rt=Object.defineProperty,it=(e,t,r)=>((e,t,r)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class nt extends G{constructor(e){super(),this.opts=e,it(this,"protocol","wc"),it(this,"version",2)}}var st=Object.defineProperty,ot=(e,t,r)=>((e,t,r)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class at extends G{constructor(e,t){super(),this.core=e,this.logger=t,ot(this,"records",new Map)}}class ct{constructor(e,t){this.logger=e,this.core=t}}class ht extends G{constructor(e,t){super(),this.relayer=e,this.logger=t}}class ut extends G{constructor(e){super()}}class dt{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}Object.defineProperty;class lt extends G{constructor(e,t){super(),this.relayer=e,this.logger=t}}class ft extends G{constructor(e,t){super(),this.core=e,this.logger=t}}class pt{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class gt{constructor(e,t){this.projectId=e,this.logger=t}}class bt{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var yt=Object.defineProperty,mt=(e,t,r)=>((e,t,r)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);W();class vt{constructor(e){this.opts=e,mt(this,"protocol","wc"),mt(this,"version",2)}}H.EventEmitter;class wt{constructor(e){this.client=e}}function _t(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Et(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const St="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,It=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function xt(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),_t(e),e}class Ot{clone(){return this._cloneInto()}}function At(e=32){if(St&&"function"==typeof St.getRandomValues)return St.getRandomValues(new Uint8Array(e));if(St&&"function"==typeof St.randomBytes)return St.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}class Pt extends Ot{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=It(this.buffer)}update(e){Et(this);const{view:t,buffer:r,blockLen:i}=this,n=(e=xt(e)).length;for(let s=0;s<n;){const o=Math.min(i-this.pos,n-s);if(o!==i)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=It(e);for(;i<=n-s;s+=i)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Et(this),function(e,t){_t(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:n}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,h=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+h,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);const o=It(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,h[e],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}const Mt=BigInt(2**32-1),kt=BigInt(32);function Tt(e,t=!1){return t?{h:Number(e&Mt),l:Number(e>>kt&Mt)}:{h:0|Number(e>>kt&Mt),l:0|Number(e&Mt)}}const Rt={fromBig:Tt,split:function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:s,l:o}=Tt(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]},toBig:(e,t)=>BigInt(e>>>0)<<kt|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,i){const n=(t>>>0)+(i>>>0);return{h:e+r+(n/2**32|0)|0,l:0|n}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,i)=>t+r+i+(e/2**32|0)|0,add4L:(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H:(e,t,r,i,n)=>t+r+i+n+(e/2**32|0)|0,add5H:(e,t,r,i,n,s)=>t+r+i+n+s+(e/2**32|0)|0,add5L:(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0)},[Ct,Nt]=Rt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),Lt=new Uint32Array(80),jt=new Uint32Array(80);class Ut extends Pt{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:c,El:h,Fh:u,Fl:d,Gh:l,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,c,h,u,d,l,f,p,g]}set(e,t,r,i,n,s,o,a,c,h,u,d,l,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|h,this.Fh=0|u,this.Fl=0|d,this.Gh=0|l,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)Lt[r]=e.getUint32(t),jt[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Lt[e-15],r=0|jt[e-15],i=Rt.rotrSH(t,r,1)^Rt.rotrSH(t,r,8)^Rt.shrSH(t,r,7),n=Rt.rotrSL(t,r,1)^Rt.rotrSL(t,r,8)^Rt.shrSL(t,r,7),s=0|Lt[e-2],o=0|jt[e-2],a=Rt.rotrSH(s,o,19)^Rt.rotrBH(s,o,61)^Rt.shrSH(s,o,6),c=Rt.rotrSL(s,o,19)^Rt.rotrBL(s,o,61)^Rt.shrSL(s,o,6),h=Rt.add4L(n,c,jt[e-7],jt[e-16]),u=Rt.add4H(h,i,a,Lt[e-7],Lt[e-16]);Lt[e]=0|u,jt[e]=0|h}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:c,Dl:h,Eh:u,El:d,Fh:l,Fl:f,Gh:p,Gl:g,Hh:b,Hl:y}=this;for(let e=0;e<80;e++){const t=Rt.rotrSH(u,d,14)^Rt.rotrSH(u,d,18)^Rt.rotrBH(u,d,41),m=Rt.rotrSL(u,d,14)^Rt.rotrSL(u,d,18)^Rt.rotrBL(u,d,41),v=u&l^~u&p,w=d&f^~d&g,_=Rt.add5L(y,m,w,Nt[e],jt[e]),E=Rt.add5H(_,b,t,v,Ct[e],Lt[e]),S=0|_,I=Rt.rotrSH(r,i,28)^Rt.rotrBH(r,i,34)^Rt.rotrBH(r,i,39),x=Rt.rotrSL(r,i,28)^Rt.rotrBL(r,i,34)^Rt.rotrBL(r,i,39),O=r&n^r&o^n&o,A=i&s^i&a^s&a;b=0|p,y=0|g,p=0|l,g=0|f,l=0|u,f=0|d,({h:u,l:d}=Rt.add(0|c,0|h,0|E,0|S)),c=0|o,h=0|a,o=0|n,a=0|s,n=0|r,s=0|i;const P=Rt.add3L(S,x,A);r=Rt.add3H(P,E,I,O),i=0|P}({h:r,l:i}=Rt.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=Rt.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=Rt.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:h}=Rt.add(0|this.Dh,0|this.Dl,0|c,0|h)),({h:u,l:d}=Rt.add(0|this.Eh,0|this.El,0|u,0|d)),({h:l,l:f}=Rt.add(0|this.Fh,0|this.Fl,0|l,0|f)),({h:p,l:g}=Rt.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:b,l:y}=Rt.add(0|this.Hh,0|this.Hl,0|b,0|y)),this.set(r,i,n,s,o,a,c,h,u,d,l,f,p,g,b,y)}roundClean(){Lt.fill(0),jt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Dt=function(e){const t=t=>e().update(xt(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new Ut)),zt=BigInt(0),qt=BigInt(1),Bt=BigInt(2);function $t(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Vt(e){if(!$t(e))throw new Error("Uint8Array expected")}function Ft(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const Kt=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ht(e){Vt(e);let t="";for(let r=0;r<e.length;r++)t+=Kt[e[r]];return t}function Wt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?zt:BigInt("0x"+e)}const Yt=48,Gt=57,Jt=65,Xt=70,Zt=97,Qt=102;function er(e){return e>=Yt&&e<=Gt?e-Yt:e>=Jt&&e<=Xt?e-(Jt-10):e>=Zt&&e<=Qt?e-(Zt-10):void 0}function tr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){const r=er(e.charCodeAt(n)),s=er(e.charCodeAt(n+1));if(void 0===r||void 0===s){const t=e[n]+e[n+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+n)}i[t]=16*r+s}return i}function rr(e){return Vt(e),Wt(Ht(Uint8Array.from(e).reverse()))}function ir(e,t){return tr(e.toString(16).padStart(2*t,"0"))}function nr(e,t){return ir(e,t).reverse()}function sr(e,t,r){let i;if("string"==typeof t)try{i=tr(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!$t(t))throw new Error(e+" must be hex string or Uint8Array");i=Uint8Array.from(t)}const n=i.length;if("number"==typeof r&&n!==r)throw new Error(e+" of length "+r+" expected, got "+n);return i}function or(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Vt(i),t+=i.length}const r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){const n=e[t];r.set(n,i),i+=n.length}return r}const ar=e=>"bigint"==typeof e&&zt<=e;function cr(e,t,r,i){if(!function(e,t,r){return ar(e)&&ar(t)&&ar(r)&&t<=e&&e<r}(t,r,i))throw new Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}const hr=e=>(Bt<<BigInt(e-1))-qt,ur={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||$t(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function dr(e,t,r={}){const i=(t,r,i)=>{const n=ur[r];if("function"!=typeof n)throw new Error("invalid validator function");const s=e[t];if(!(i&&void 0===s||n(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))i(e,r,!1);for(const[e,t]of Object.entries(r))i(e,t,!0);return e}function lr(e){const t=new WeakMap;return(r,...i)=>{const n=t.get(r);if(void 0!==n)return n;const s=e(r,...i);return t.set(r,s),s}}const fr=BigInt(0),pr=BigInt(1),gr=BigInt(2),br=BigInt(3),yr=BigInt(4),mr=BigInt(5),vr=BigInt(8);function wr(e,t){const r=e%t;return r>=fr?r:t+r}function _r(e,t,r){if(t<fr)throw new Error("invalid exponent, negatives unsupported");if(r<=fr)throw new Error("invalid modulus");if(r===pr)return fr;let i=pr;for(;t>fr;)t&pr&&(i=i*e%r),e=e*e%r,t>>=pr;return i}function Er(e,t,r){let i=e;for(;t-- >fr;)i*=i,i%=r;return i}function Sr(e,t){if(e===fr)throw new Error("invert: expected non-zero number");if(t<=fr)throw new Error("invert: expected positive modulus, got "+t);let r=wr(e,t),i=t,n=fr,s=pr;for(;r!==fr;){const e=i%r,t=n-s*(i/r);i=r,r=e,n=s,s=t}if(i!==pr)throw new Error("invert: does not exist");return wr(n,t)}function Ir(e){if(e%yr===br){const t=(e+pr)/yr;return function(e,r){const i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%vr===mr){const t=(e-mr)/vr;return function(e,r){const i=e.mul(r,gr),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,gr),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-pr)/gr;let r,i,n;for(r=e-pr,i=0;r%gr===fr;r/=gr,i++);for(n=gr;n<e&&_r(n,t,e)!==e-pr;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===i){const t=(e+pr)/yr;return function(e,r){const i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw new Error("Cannot find square root");return i}}const s=(r+pr)/gr;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=i,c=e.pow(e.mul(e.ONE,n),r),h=e.pow(o,s),u=e.pow(o,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,pr<<BigInt(a-t-1));c=e.sqr(r),h=e.mul(h,r),u=e.mul(u,c),a=t}return h}}(e)}const xr=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Or(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ar(e,t,r=!1,i={}){if(e<=fr)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:n,nByteLength:s}=Or(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:n,BYTES:s,MASK:hr(n),ZERO:fr,ONE:pr,create:t=>wr(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return fr<=t&&t<e},is0:e=>e===fr,isOdd:e=>(e&pr)===pr,neg:t=>wr(-t,e),eql:(e,t)=>e===t,sqr:t=>wr(t*t,e),add:(t,r)=>wr(t+r,e),sub:(t,r)=>wr(t-r,e),mul:(t,r)=>wr(t*r,e),pow:(e,t)=>function(e,t,r){if(r<fr)throw new Error("invalid exponent, negatives unsupported");if(r===fr)return e.ONE;if(r===pr)return t;let i=e.ONE,n=t;for(;r>fr;)r&pr&&(i=e.mul(i,n)),n=e.sqr(n),r>>=pr;return i}(a,e,t),div:(t,r)=>wr(t*Sr(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Sr(t,e),sqrt:i.sqrt||(t=>(o||(o=Ir(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),i=t.reduce(((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i))),e.ONE),n=e.inv(i);return t.reduceRight(((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i))),n),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?nr(e,s):ir(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?rr(e):function(e){return Wt(Ht(e))}(e)}});return Object.freeze(a)}const Pr=BigInt(0),Mr=BigInt(1);function kr(e,t){const r=t.negate();return e?r:t}function Tr(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Rr(e,t){Tr(e,t);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Cr=new WeakMap,Nr=new WeakMap;function Lr(e){return Nr.get(e)||1}function jr(e,t,r,i){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(i,t),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const n=e.ZERO,s=function(e){let t;for(t=0;e>zt;e>>=qt,t+=1);return t}(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(n);let h=n;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(n);for(let t=0;t<i.length;t++){const n=i[t],s=Number(n>>BigInt(e)&BigInt(a));c[s]=c[s].add(r[t])}let t=n;for(let e=c.length-1,r=n;e>0;e--)r=r.add(c[e]),t=t.add(r);if(h=h.add(t),0!==e)for(let e=0;e<o;e++)h=h.double()}return h}function Ur(e){return function(e){const t=xr.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});dr(e,t)}(e.Fp),dr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Or(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Dr=BigInt(0),zr=BigInt(1),qr=BigInt(2),Br=BigInt(8),$r={zip215:!0};function Vr(e){const t=function(e){const t=Ur(e);return dr(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:i,prehash:n,hash:s,randomBytes:o,nByteLength:a,h:c}=t,h=qr<<BigInt(8*a)-zr,u=r.create,d=Ar(t.n,t.nBitLength),l=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch{return{isValid:!1,value:Dr}}}),f=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(Ft("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){cr("coordinate "+e,t,Dr,h)}function b(e){if(!(e instanceof v))throw new Error("ExtendedPoint expected")}const y=lr(((e,t)=>{const{ex:i,ey:n,ez:s}=e,o=e.is0();null==t&&(t=o?Br:r.inv(s));const a=u(i*t),c=u(n*t),h=u(s*t);if(o)return{x:Dr,y:zr};if(h!==zr)throw new Error("invZ was invalid");return{x:a,y:c}})),m=lr((e=>{const{a:r,d:i}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:n,ey:s,ez:o,et:a}=e,c=u(n*n),h=u(s*s),d=u(o*o),l=u(d*d),f=u(c*r);if(u(d*u(f+h))!==u(l+u(i*u(c*h))))throw new Error("bad point: equation left != right (1)");if(u(n*s)!==u(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class v{constructor(e,t,r,i){this.ex=e,this.ey=t,this.ez=r,this.et=i,g("x",e),g("y",t),g("z",r),g("t",i),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof v)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new v(t,r,zr,u(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(v.fromAffine)}static msm(e,t){return jr(v,d,e,t)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){m(this)}equals(e){b(e);const{ex:t,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=e,a=u(t*o),c=u(n*i),h=u(r*o),d=u(s*i);return a===c&&h===d}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:e}=t,{ex:r,ey:i,ez:n}=this,s=u(r*r),o=u(i*i),a=u(qr*u(n*n)),c=u(e*s),h=r+i,d=u(u(h*h)-s-o),l=c+o,f=l-a,p=c-o,g=u(d*f),b=u(l*p),y=u(d*p),m=u(f*l);return new v(g,b,m,y)}add(e){b(e);const{a:r,d:i}=t,{ex:n,ey:s,ez:o,et:a}=this,{ex:c,ey:h,ez:d,et:l}=e;if(r===BigInt(-1)){const e=u((s-n)*(h+c)),t=u((s+n)*(h-c)),r=u(t-e);if(r===Dr)return this.double();const i=u(o*qr*l),f=u(a*qr*d),p=f+i,g=t+e,b=f-i,y=u(p*r),m=u(g*b),w=u(p*b),_=u(r*g);return new v(y,m,_,w)}const f=u(n*c),p=u(s*h),g=u(a*i*l),y=u(o*d),m=u((n+s)*(c+h)-f-p),w=y-g,_=y+g,E=u(p-r*f),S=u(m*w),I=u(_*E),x=u(m*E),O=u(w*_);return new v(S,I,O,x)}subtract(e){return this.add(e.negate())}wNAF(e){return E.wNAFCached(this,e,v.normalizeZ)}multiply(e){const t=e;cr("scalar",t,zr,i);const{p:r,f:n}=this.wNAF(t);return v.normalizeZ([r,n])[0]}multiplyUnsafe(e,t=v.ZERO){const r=e;return cr("scalar",r,Dr,i),r===Dr?_:this.is0()||r===zr?this:E.wNAFCachedUnsafe(this,r,v.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,i).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===zr?this:this.multiplyUnsafe(e)}static fromHex(e,i=!1){const{d:n,a:s}=t,o=r.BYTES;e=sr("pointHex",e,o),Ft("zip215",i);const a=e.slice(),c=e[o-1];a[o-1]=-129&c;const d=rr(a),f=i?h:r.ORDER;cr("pointHex.y",d,Dr,f);const p=u(d*d),g=u(p-zr),b=u(n*p-s);let{isValid:y,value:m}=l(g,b);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const w=(m&zr)===zr,_=!!(128&c);if(!i&&m===Dr&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==w&&(m=u(-m)),v.fromAffine({x:m,y:d})}static fromPrivateKey(e){return x(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),i=nr(t,r.BYTES);return i[i.length-1]|=e&zr?128:0,i}toHex(){return Ht(this.toRawBytes())}}v.BASE=new v(t.Gx,t.Gy,zr,u(t.Gx*t.Gy)),v.ZERO=new v(Dr,zr,zr,Dr);const{BASE:w,ZERO:_}=v,E=function(e,t){return{constTimeNegate:kr,hasPrecomputes:e=>1!==Lr(e),unsafeLadder(t,r,i=e.ZERO){let n=t;for(;r>Pr;)r&Mr&&(i=i.add(n)),n=n.double(),r>>=Mr;return i},precomputeWindow(e,r){const{windows:i,windowSize:n}=Rr(r,t),s=[];let o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,i,n){const{windows:s,windowSize:o}=Rr(r,t);let a=e.ZERO,c=e.BASE;const h=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(n&h);n>>=d,r>o&&(r-=u,n+=Mr);const s=t,l=t+Math.abs(r)-1,f=e%2!=0,p=r<0;0===r?c=c.add(kr(f,i[s])):a=a.add(kr(p,i[l]))}return{p:a,f:c}},wNAFUnsafe(r,i,n,s=e.ZERO){const{windows:o,windowSize:a}=Rr(r,t),c=BigInt(2**r-1),h=2**r,u=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(n===Pr)break;let r=Number(n&c);if(n>>=u,r>a&&(r-=h,n+=Mr),0===r)continue;let o=i[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let i=Cr.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&Cr.set(t,r(i))),i},wNAFCached(e,t,r){const i=Lr(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){const n=Lr(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){Tr(r,t),Nr.set(e,r),Cr.delete(e)}}}(v,8*a);function S(e){return wr(e,i)}function I(e){return S(rr(e))}function x(e){const t=r.BYTES;e=sr("private key",e,t);const i=sr("hashed private key",s(e),2*t),n=f(i.slice(0,t)),o=i.slice(t,2*t),a=I(n),c=w.multiply(a),h=c.toRawBytes();return{head:n,prefix:o,scalar:a,point:c,pointBytes:h}}function O(e=new Uint8Array,...t){const r=or(...t);return I(s(p(r,sr("context",e),!!n)))}const A=$r;return w._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return x(e).pointBytes},sign:function(e,t,s={}){e=sr("message",e),n&&(e=n(e));const{prefix:o,scalar:a,pointBytes:c}=x(t),h=O(s.context,o,e),u=w.multiply(h).toRawBytes(),d=S(h+O(s.context,u,c,e)*a);return cr("signature.s",d,Dr,i),sr("result",or(u,nr(d,r.BYTES)),2*r.BYTES)},verify:function(e,t,i,s=A){const{context:o,zip215:a}=s,c=r.BYTES;e=sr("signature",e,2*c),t=sr("message",t),i=sr("publicKey",i,c),void 0!==a&&Ft("zip215",a),n&&(t=n(t));const h=rr(e.slice(c,2*c));let u,d,l;try{u=v.fromHex(i,a),d=v.fromHex(e.slice(0,c),a),l=w.multiplyUnsafe(h)}catch{return!1}if(!a&&u.isSmallOrder())return!1;const f=O(o,d.toRawBytes(),u.toRawBytes(),t);return d.add(u.multiplyUnsafe(f)).subtract(l).clearCofactor().equals(v.ZERO)},ExtendedPoint:v,utils:{getExtendedPublicKey:x,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=v.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}BigInt(0),BigInt(1);const Fr=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Kr=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Hr=BigInt(1),Wr=BigInt(2);BigInt(3);const Yr=BigInt(5),Gr=BigInt(8);function Jr(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Xr(e,t){const r=Fr,i=wr(t*t*t,r),n=function(e){const t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=Fr,o=e*e%s*e%s,a=Er(o,Wr,s)*o%s,c=Er(a,Hr,s)*e%s,h=Er(c,Yr,s)*c%s,u=Er(h,t,s)*h%s,d=Er(u,r,s)*u%s,l=Er(d,i,s)*d%s,f=Er(l,n,s)*l%s,p=Er(f,n,s)*l%s,g=Er(p,t,s)*h%s;return{pow_p_5_8:Er(g,Wr,s)*e%s,b2:o}}(e*wr(i*i*t,r)).pow_p_5_8;let s=wr(e*i*n,r);const o=wr(t*s*s,r),a=s,c=wr(s*Kr,r),h=o===e,u=o===wr(-e,r),d=o===wr(-e*Kr,r);return h&&(s=a),(u||d)&&(s=c),((e,t)=>(wr(e,t)&pr)===pr)(s,r)&&(s=wr(-s,r)),{isValid:h||u,value:s}}const Zr=Ar(Fr,void 0,!0),Qr=Vr({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Zr,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Gr,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Dt,randomBytes:At,adjustScalarBytes:Jr,uvRatio:Xr}),ei="EdDSA",ti=".",ri="base64url",ii="utf8",ni="utf8",si="did",oi="key",ai="base58btc";function ci(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function hi(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?ci(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ui(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=hi(t);let i=0;for(const t of e)r.set(t,i),i+=t.length;return ci(r)}var di=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),h=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*h+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,l=s-1;(0!==u||d<n)&&-1!==l;l--,d++)u+=a*o[l]>>>0,o[l]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");n=d,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,h=new Uint8Array(o);n!==s;){for(var d=t[n],l=0,f=o-1;(0!==d||l<i)&&-1!==f;f--,l++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=l,n++}for(var p=o-i;p!==o&&0===h[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(h[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}}},li=di;const fi=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class pi{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class gi{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return yi(this,e)}}class bi{constructor(e){this.decoders=e}or(e){return yi(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const yi=(e,t)=>new bi({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class mi{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new pi(e,t,r),this.decoder=new gi(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const vi=({name:e,prefix:t,encode:r,decode:i})=>new mi(e,t,r,i),wi=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=li(r,t);return vi({prefix:e,name:t,encode:i,decode:e=>fi(n(e))})},_i=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>vi({prefix:t,name:e,encode:e=>((e,t,r)=>{const i="="===t[t.length-1],n=(1<<r)-1;let s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s})(e,i,r),decode:t=>((e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,h=0;for(let t=0;t<s;++t){const s=n[e[t]];if(void 0===s)throw new SyntaxError(`Non-${i} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[h++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,i,r,e)}),Ei=vi({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var Si=Object.freeze({__proto__:null,identity:Ei});const Ii=_i({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xi=Object.freeze({__proto__:null,base2:Ii});const Oi=_i({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ai=Object.freeze({__proto__:null,base8:Oi});const Pi=wi({prefix:"9",name:"base10",alphabet:"0123456789"});var Mi=Object.freeze({__proto__:null,base10:Pi});const ki=_i({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ti=_i({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ri=Object.freeze({__proto__:null,base16:ki,base16upper:Ti});const Ci=_i({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ni=_i({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Li=_i({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ji=_i({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ui=_i({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Di=_i({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zi=_i({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qi=_i({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bi=_i({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var $i=Object.freeze({__proto__:null,base32:Ci,base32upper:Ni,base32pad:Li,base32padupper:ji,base32hex:Ui,base32hexupper:Di,base32hexpad:zi,base32hexpadupper:qi,base32z:Bi});const Vi=wi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fi=wi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ki=Object.freeze({__proto__:null,base36:Vi,base36upper:Fi});const Hi=wi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wi=wi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Yi=Object.freeze({__proto__:null,base58btc:Hi,base58flickr:Wi});const Gi=_i({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ji=_i({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Xi=_i({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Zi=_i({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Qi=Object.freeze({__proto__:null,base64:Gi,base64pad:Ji,base64url:Xi,base64urlpad:Zi});const en=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),tn=en.reduce(((e,t,r)=>(e[r]=t,e)),[]),rn=en.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const nn=vi({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=tn[t]),"")},decode:function(e){const t=[];for(const r of e){const e=rn[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var sn=Object.freeze({__proto__:null,base256emoji:nn}),on=function e(t,r,i){r=r||[];for(var n=i=i||0;t>=hn;)r[i++]=255&t|an,t/=128;for(;t&cn;)r[i++]=255&t|an,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},an=128,cn=-128,hn=Math.pow(2,31);var un=function e(t,r){var i,n=0,s=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");i=t[o++],n+=s<28?(i&ln)<<s:(i&ln)*Math.pow(2,s),s+=7}while(i>=dn);return e.bytes=o-r,n},dn=128,ln=127;var fn=Math.pow(2,7),pn=Math.pow(2,14),gn=Math.pow(2,21),bn=Math.pow(2,28),yn=Math.pow(2,35),mn=Math.pow(2,42),vn=Math.pow(2,49),wn=Math.pow(2,56),_n=Math.pow(2,63),En={encode:on,decode:un,encodingLength:function(e){return e<fn?1:e<pn?2:e<gn?3:e<bn?4:e<yn?5:e<mn?6:e<vn?7:e<wn?8:e<_n?9:10}};const Sn=(e,t,r=0)=>(En.encode(e,t,r),t),In=e=>En.encodingLength(e),xn=(e,t)=>{const r=t.byteLength,i=In(e),n=i+In(r),s=new Uint8Array(n+r);return Sn(e,s,0),Sn(r,s,i),s.set(t,n),new On(e,r,t,s)};class On{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const An=({name:e,code:t,encode:r})=>new Pn(e,t,r);class Pn{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?xn(this.code,t):t.then((e=>xn(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Mn=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),kn=An({name:"sha2-256",code:18,encode:Mn("SHA-256")}),Tn=An({name:"sha2-512",code:19,encode:Mn("SHA-512")});Object.freeze({__proto__:null,sha256:kn,sha512:Tn});const Rn=fi,Cn={code:0,name:"identity",encode:Rn,digest:e=>xn(0,Rn(e))};Object.freeze({__proto__:null,identity:Cn});new TextEncoder,new TextDecoder;const Nn={...Si,...xi,...Ai,...Mi,...Ri,...$i,...Ki,...Yi,...Qi,...sn};function Ln(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const jn=Ln("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Un=Ln("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=hi((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Dn={utf8:jn,"utf-8":jn,hex:Nn.base16,latin1:Un,ascii:Un,binary:Un,...Nn};function zn(e,t="utf8"){const r=Dn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function qn(e,t="utf8"){const r=Dn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):ci(globalThis.Buffer.from(e,"utf-8"))}function Bn(e){return Ie(zn(qn(e,ri),ii))}function $n(e){return zn(qn(xe(e),ii),ri)}function Vn(e){const t="z"+zn(ui([qn("K36",ai),e]),ai);return[si,oi,t].join(":")}function Fn(e){return zn(e,ri)}function Kn(e){const t=e.split(ti),r=Bn(t[0]),i=Bn(t[1]),n=function(e){return qn(e,ri)}(t[2]);return{header:r,payload:i,signature:n,data:qn(t.slice(0,2).join(ti),ni)}}function Hn(e=At(32)){const t=Qr.getPublicKey(e);return{secretKey:ui([e,t]),publicKey:t}}async function Wn(e,t,r,i,n=(0,Y.fromMiliseconds)(Date.now())){const s={alg:ei,typ:"JWT"},o={iss:Vn(i.publicKey),sub:e,aud:t,iat:n,exp:n+r},a=function(e){return qn([$n(e.header),$n(e.payload)].join(ti),ni)}({header:s,payload:o});return function(e){return[$n(e.header),$n(e.payload),Fn(e.signature)].join(ti)}({header:s,payload:o,signature:Qr.sign(a,i.secretKey.slice(0,32))})}var Yn=i(5606),Gn=function(e,t,r){if(r||2===arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Jn=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},Xn=function(e){this.version=e,this.type="node",this.name="node",this.os=Yn.platform},Zn=function(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"},Qn=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},es=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},ts=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,rs=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],is=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ns(e){return e?os(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new es:"undefined"!=typeof navigator?os(navigator.userAgent):void 0!==Yn&&Yn.version?new Xn(Yn.version.slice(1)):null}function ss(e){return""!==e&&rs.reduce((function(t,r){var i=r[0],n=r[1];if(t)return t;var s=n.exec(e);return!!s&&[i,s]}),!1)}function os(e){var t=ss(e);if(!t)return null;var r=t[0],i=t[1];if("searchbot"===r)return new Qn;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<3&&(n=Gn(Gn([],n,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-n.length),!0)):n=[];var s=n.join("."),o=function(e){for(var t=0,r=is.length;t<r;t++){var i=is[t],n=i[0];if(i[1].exec(e))return n}return null}(e),a=ts.exec(e);return a&&a[1]?new Zn(r,s,o,a[1]):new Jn(r,s,o)}var as=i(8196),cs=i(2063);const hs="2.23.2";let us={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${hs}`};class ds extends Error{constructor(e,t={}){const r=t.cause instanceof ds?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof ds&&t.cause.docsPath||t.docsPath,n=us.getDocsUrl?.({...t,docsPath:i});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...r?[`Details: ${r}`]:[],...us.version?[`Version: ${us.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=hs}walk(e){return ls(this,e)}}function ls(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?ls(e.cause,t):t?null:e}function fs(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}class ps extends ds{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function gs(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const i=e.replace("0x","");if(i.length>2*r)throw new ps({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new ps({size:e.length,targetSize:r,type:"bytes"});const i=new Uint8Array(r);for(let n=0;n<r;n++){const s="right"===t;i[s?n:r-n-1]=e[s?n:e.length-n-1]}return i}(e,{dir:t,size:r})}class bs extends ds{constructor({max:e,min:t,signed:r,size:i,value:n}){super(`Number "${n}" is not in safe ${i?`${8*i}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class ys extends ds{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function ms(e){return fs(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function vs(e,{size:t}){if(ms(e)>t)throw new ys({givenSize:ms(e),maxSize:t})}function ws(e,t={}){const{signed:r}=t;t.size&&vs(e,{size:t.size});const i=BigInt(e);if(!r)return i;const n=(e.length-2)/2;return i<=(1n<<8n*BigInt(n)-1n)-1n?i:i-BigInt(`0x${"f".padStart(2*n,"f")}`)-1n}function _s(e,t={}){return Number(ws(e,t))}const Es=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ss(e,t={}){return"number"==typeof e||"bigint"==typeof e?xs(e,t):"string"==typeof e?function(e,t={}){const r=Os.encode(e);return Is(r,t)}(e,t):"boolean"==typeof e?function(e,t={}){const r=`0x${Number(e)}`;if("number"==typeof t.size)return vs(r,{size:t.size}),gs(r,{size:t.size});return r}(e,t):Is(e,t)}function Is(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=Es[e[t]];const i=`0x${r}`;return"number"==typeof t.size?(vs(i,{size:t.size}),gs(i,{dir:"right",size:t.size})):i}function xs(e,t={}){const{signed:r,size:i}=t,n=BigInt(e);let s;i?s=r?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof s&&r?-s-1n:0;if(s&&n>s||n<o){const t="bigint"==typeof e?"n":"";throw new bs({max:s?`${s}${t}`:void 0,min:`${o}${t}`,signed:r,size:i,value:`${e}${t}`})}const a=`0x${(r&&n<0?(1n<<BigInt(8*i))+BigInt(n):n).toString(16)}`;return i?gs(a,{size:i}):a}const Os=new TextEncoder;const As=new TextEncoder;function Ps(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const r=xs(e,t);return Ts(r)}(e,t):"boolean"==typeof e?function(e,t={}){const r=new Uint8Array(1);if(r[0]=Number(e),"number"==typeof t.size)return vs(r,{size:t.size}),gs(r,{size:t.size});return r}(e,t):fs(e)?Ts(e,t):Rs(e,t)}const Ms={zero:48,nine:57,A:65,F:70,a:97,f:102};function ks(e){return e>=Ms.zero&&e<=Ms.nine?e-Ms.zero:e>=Ms.A&&e<=Ms.F?e-(Ms.A-10):e>=Ms.a&&e<=Ms.f?e-(Ms.a-10):void 0}function Ts(e,t={}){let r=e;t.size&&(vs(r,{size:t.size}),r=gs(r,{dir:"right",size:t.size}));let i=r.slice(2);i.length%2&&(i=`0${i}`);const n=i.length/2,s=new Uint8Array(n);for(let e=0,t=0;e<n;e++){const r=ks(i.charCodeAt(t++)),n=ks(i.charCodeAt(t++));if(void 0===r||void 0===n)throw new ds(`Invalid byte sequence ("${i[t-2]}${i[t-1]}" in "${i}").`);s[e]=16*r+n}return s}function Rs(e,t={}){const r=As.encode(e);return"number"==typeof t.size?(vs(r,{size:t.size}),gs(r,{dir:"right",size:t.size})):r}var Cs=i(9999);const Ns=BigInt(2**32-1),Ls=BigInt(32);function js(e,t=!1){return t?{h:Number(e&Ns),l:Number(e>>Ls&Ns)}:{h:0|Number(e>>Ls&Ns),l:0|Number(e&Ns)}}function Us(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:s,l:o}=js(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}const Ds=(e,t,r)=>e<<r|t>>>32-r,zs=(e,t,r)=>t<<r|e>>>32-r,qs=(e,t,r)=>t<<r-32|e>>>64-r,Bs=(e,t,r)=>e<<r-32|t>>>64-r;var $s=i(9604);const Vs=[],Fs=[],Ks=[],Hs=BigInt(0),Ws=BigInt(1),Ys=BigInt(2),Gs=BigInt(7),Js=BigInt(256),Xs=BigInt(113);for(let e=0,t=Ws,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],Vs.push(2*(5*i+r)),Fs.push((e+1)*(e+2)/2%64);let n=Hs;for(let e=0;e<7;e++)t=(t<<Ws^(t>>Gs)*Xs)%Js,t&Ys&&(n^=Ws<<(Ws<<BigInt(e))-Ws);Ks.push(n)}const[Zs,Qs]=Us(Ks,!0),eo=(e,t,r)=>r>32?qs(e,t,r):Ds(e,t,r),to=(e,t,r)=>r>32?Bs(e,t,r):zs(e,t,r);class ro extends $s.Vw{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Cs.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,$s.DH)(this.state)}keccak(){$s.qv||(0,$s.Fc)(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=eo(s,o,1)^r[i],c=to(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){const i=Fs[r],s=eo(t,n,i),o=to(t,n,i),a=Vs[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=Zs[i],e[1]^=Qs[i]}r.fill(0)}(this.state32,this.rounds),$s.qv||(0,$s.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Cs.CC)(this);const{blockLen:t,state:r}=this,i=(e=(0,$s.ZJ)(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,128&t&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,Cs.CC)(this,!1),(0,Cs.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Cs.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Cs.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new ro(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}const no=(e,t,r)=>(0,$s.ld)((()=>new ro(t,e,r))),so=no(1,136,32);function oo(e,t){const r=t||"hex",i=so(fs(e,{strict:!1})?Ps(e):e);return"bytes"===r?i:Ss(i)}class ao extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const co=new ao(8192);function ho(e,t){if(co.has(`${e}.${t}`))return co.get(`${e}.${t}`);const r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),i=oo(Rs(r),"bytes"),n=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&i[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());const s=`0x${n.join("")}`;return co.set(`${e}.${t}`,s),s}function uo(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function lo({hash:e,signature:t}){return r=await async function({hash:e,signature:t}){const r=fs(e)?e:Ss(e),{secp256k1:n}=await i.e(384).then(i.bind(i,6384)),s=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:r,v:i,yParity:s}=t,o=uo(Number(s??i));return new n.Signature(ws(e),ws(r)).addRecoveryBit(o)}const e=fs(t)?t:Ss(t),r=uo(_s(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})();return`0x${s.recoverPublicKey(r.substring(2)).toHex(!1)}`}({hash:e,signature:t}),ho(`0x${oo(`0x${r.substring(4)}`).substring(26)}`);var r}const fo=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){const i=e.charAt(r),n=i.charCodeAt(0);if(255!==t[n])throw new TypeError(i+" is ambiguous");t[n]=r}const r=e.length,i=e.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===i;)o++,s++;const c=(e.length-s)*n+1>>>0,h=new Uint8Array(c);for(;s<e.length;){const i=e.charCodeAt(s);if(i>255)return;let n=t[i];if(255===n)return;let o=0;for(let e=c-1;(0!==n||o<a)&&-1!==e;e--,o++)n+=r*h[e]>>>0,h[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");a=o,s++}let u=c-a;for(;u!==c&&0===h[u];)u++;const d=new Uint8Array(o+(c-u));let l=o;for(;u!==c;)d[l++]=h[u++];return d}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let n=0,o=0,a=0;const c=t.length;for(;a!==c&&0===t[a];)a++,n++;const h=(c-a)*s+1>>>0,u=new Uint8Array(h);for(;a!==c;){let e=t[a],i=0;for(let t=h-1;(0!==e||i<o)&&-1!==t;t--,i++)e+=256*u[t]>>>0,u[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");o=i,a++}let d=h-o;for(;d!==h&&0===u[d];)d++;let l=i.repeat(n);for(;d<h;++d)l+=e.charAt(u[d]);return l},decodeUnsafe:o,decode:function(e){const t=o(e);if(t)return t;throw new Error("Non-base"+r+" character")}}};const po=fo("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function go(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function bo(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=go(t);let i=0;for(const t of e)r.set(t,i),i+=t.length;return r}var yo=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),h=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*h+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,l=s-1;(0!==u||d<n)&&-1!==l;l--,d++)u+=a*o[l]>>>0,o[l]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");n=d,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,h=new Uint8Array(o);n!==s;){for(var d=t[n],l=0,f=o-1;(0!==d||l<i)&&-1!==f;f--,l++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=l,n++}for(var p=o-i;p!==o&&0===h[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(h[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const mo=yo,vo=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class wo{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _o{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return So(this,e)}}class Eo{constructor(e){this.decoders=e}or(e){return So(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const So=(e,t)=>new Eo({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Io{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new wo(e,t,r),this.decoder=new _o(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const xo=({name:e,prefix:t,encode:r,decode:i})=>new Io(e,t,r,i),Oo=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=mo(r,t);return xo({prefix:e,name:t,encode:i,decode:e=>vo(n(e))})},Ao=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>xo({prefix:t,name:e,encode:e=>((e,t,r)=>{const i="="===t[t.length-1],n=(1<<r)-1;let s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s})(e,i,r),decode:t=>((e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,h=0;for(let t=0;t<s;++t){const s=n[e[t]];if(void 0===s)throw new SyntaxError(`Non-${i} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[h++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,i,r,e)}),Po=xo({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)}),Mo=Ao({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ko=Ao({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),To=Oo({prefix:"9",name:"base10",alphabet:"0123456789"}),Ro=Ao({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Co=Ao({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),No=Ao({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lo=Ao({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jo=Ao({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Uo=Ao({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Do=Ao({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zo=Ao({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qo=Ao({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bo=Ao({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$o=Ao({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Vo=Oo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fo=Oo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ko=Oo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ho=Oo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Wo=Ao({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Yo=Ao({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Go=Ao({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Jo=Ao({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Xo=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Zo=Xo.reduce(((e,t,r)=>(e[r]=t,e)),[]),Qo=Xo.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const ea=xo({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Zo[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Qo[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var ta=function e(t,r,i){r=r||[];var n=i=i||0;for(;t>=na;)r[i++]=255&t|ra,t/=128;for(;t&ia;)r[i++]=255&t|ra,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},ra=128,ia=-128,na=Math.pow(2,31);var sa=function e(t,r){var i,n=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");i=t[o++],n+=s<28?(i&aa)<<s:(i&aa)*Math.pow(2,s),s+=7}while(i>=oa);return e.bytes=o-r,n},oa=128,aa=127;var ca=Math.pow(2,7),ha=Math.pow(2,14),ua=Math.pow(2,21),da=Math.pow(2,28),la=Math.pow(2,35),fa=Math.pow(2,42),pa=Math.pow(2,49),ga=Math.pow(2,56),ba=Math.pow(2,63);const ya={encode:ta,decode:sa,encodingLength:function(e){return e<ca?1:e<ha?2:e<ua?3:e<da?4:e<la?5:e<fa?6:e<pa?7:e<ga?8:e<ba?9:10}},ma=(e,t,r=0)=>(ya.encode(e,t,r),t),va=e=>ya.encodingLength(e),wa=(e,t)=>{const r=t.byteLength,i=va(e),n=i+va(r),s=new Uint8Array(n+r);return ma(e,s,0),ma(r,s,i),s.set(t,n),new _a(e,r,t,s)};class _a{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const Ea=({name:e,code:t,encode:r})=>new Sa(e,t,r);class Sa{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?wa(this.code,t):t.then((e=>wa(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Ia=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),xa=Ea({name:"sha2-256",code:18,encode:Ia("SHA-256")}),Oa=Ea({name:"sha2-512",code:19,encode:Ia("SHA-512")}),Aa=vo,Pa={code:0,name:"identity",encode:Aa,digest:e=>wa(0,Aa(e))},Ma="raw",ka=85,Ta=e=>vo(e),Ra=e=>vo(e),Ca=new TextEncoder,Na=new TextDecoder,La="json",ja=512,Ua=e=>Ca.encode(JSON.stringify(e)),Da=e=>JSON.parse(Na.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const za={...e,...t,...r,...n,...s,...o,...a,...c,...h,...u};function qa(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Ba=qa("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),$a=qa("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=go((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Va={utf8:Ba,"utf-8":Ba,hex:za.base16,latin1:$a,ascii:$a,binary:$a,...za};function Fa(e,t="utf8"){const r=Va[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}function Ka(e,t="utf8"){const r=Va[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Ha=i(6729);const Wa={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Ya=i(5606),Ga=i(8287).hp;const Ja=":";function Xa(e){const[t,r]=e.split(Ja);return{namespace:t,reference:r}}function Za(e,t){return e.includes(":")?[e]:t.chains||[]}const Qa="react-native",ec="node",tc="browser",rc="unknown",ic="js";function nc(){return typeof Ya<"u"&&typeof Ya.versions<"u"&&typeof Ya.versions.node<"u"}function sc(){return!(0,as.getDocument)()&&!!(0,as.getNavigator)()&&"ReactNative"===navigator.product}function oc(){return!nc()&&!!(0,as.getNavigator)()&&!!(0,as.getDocument)()}function ac(){return sc()?Qa:nc()?ec:oc()?tc:rc}function cc(){var e;try{return sc()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Application)<"u"?null==(e=i.g.Application)?void 0:e.applicationId:void 0}catch{return}}function hc(){return(0,cs.g)()||{name:"",description:"",url:"",icons:[""]}}function uc(e,t,r){const n=function(){if(ac()===Qa&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"){const{OS:e,Version:t}=i.g.Platform;return[e,t].join("-")}const e=ns();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),s=function(){var e;const t=ac();return t===tc?[t,(null==(e=(0,as.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[ic,r].join("-"),n,s].join("/")}function dc({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const h=r.split("?"),u={auth:n,ua:uc(e,t,i),projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},d=function(e,t){const r=new URLSearchParams(e);for(const e of Object.keys(t).sort())if(t.hasOwnProperty(e)){const i=t[e];void 0!==i&&r.set(e,i)}return r.toString()}(h[1]||"",u);return h[0]+"?"+d}function lc(e,t){return e.filter((e=>t.includes(e))).length===e.length}function fc(e){return Object.fromEntries(e.entries())}function pc(e){return new Map(Object.entries(e))}function gc(e=Y.FIVE_MINUTES,t){const r=(0,Y.toMiliseconds)(e||Y.FIVE_MINUTES);let i,n,s,o;return{resolve:e=>{s&&i&&(clearTimeout(s),i(e),o=Promise.resolve(e))},reject:e=>{s&&n&&(clearTimeout(s),n(e))},done:()=>new Promise(((e,a)=>{if(o)return e(o);s=setTimeout((()=>{const e=new Error(t);o=Promise.reject(e),a(e)}),r),i=e,n=a}))}}function bc(e,t,r){return new Promise((async(i,n)=>{const s=setTimeout((()=>n(new Error(r))),t);try{i(await e)}catch(e){n(e)}clearTimeout(s)}))}function yc(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function mc(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);i.id=Number(r)}return i}function vc(e,t){return(0,Y.fromMiliseconds)((t||Date.now())+(0,Y.toMiliseconds)(e))}function wc(e){return Date.now()>=(0,Y.toMiliseconds)(e)}function _c(e,t){return`${e}${t?`:${t}`:""}`}function Ec(e=[],t=[]){return[...new Set([...e,...t])]}async function Sc({id:e,topic:t,wcDeepLink:r}){var n;try{if(!r)return;const s="string"==typeof r?JSON.parse(r):r,o=s?.href;if("string"!=typeof o)return;const a=function(e,t,r){const i=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;if(e.startsWith("https://t.me")){n=`${n}${e.includes("?")?"&startapp=":"?startapp="}${function(e,t=!1){const r=Ga.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(i,!0)}`}else n=`${n}/wc?${i}`;return n}(o,e,t),c=ac();if(c===tc){if(null==(n=(0,as.getDocument)())||!n.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");!function(e){let t="_self";!function(){try{return window.self!==window.top}catch{return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}(a)}else c===Qa&&typeof(null==i.g?void 0:i.g.Linking)<"u"&&await i.g.Linking.openURL(a)}catch(e){console.error(e)}}function Ic(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),i=r.indexOf(t);return r[i+2]}function xc(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Oc(){return typeof Ya<"u"&&"true"===Ya.env.IS_VITEST}function Ac(e){return Ga.from(e,"base64").toString("utf-8")}function Pc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Mc(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function kc(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Pc(e.outputLen),Pc(e.blockLen)}function Tc(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Rc(e,t){Mc(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Cc=BigInt(2**32-1),Nc=BigInt(32);function Lc(e,t=!1){return t?{h:Number(e&Cc),l:Number(e>>Nc&Cc)}:{h:0|Number(e>>Nc&Cc),l:0|Number(e&Cc)}}const jc="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Uc(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Dc(e,t){return e<<32-t|e>>>t}const zc=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function qc(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Bc(e){for(let t=0;t<e.length;t++)e[t]=qc(e[t])}function $c(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Mc(e),e}class Vc{clone(){return this._cloneInto()}}function Fc(e){const t=t=>e().update($c(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Kc(e=32){if(jc&&"function"==typeof jc.getRandomValues)return jc.getRandomValues(new Uint8Array(e));if(jc&&"function"==typeof jc.randomBytes)return jc.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Hc=[],Wc=[],Yc=[],Gc=BigInt(0),Jc=BigInt(1),Xc=BigInt(2),Zc=BigInt(7),Qc=BigInt(256),eh=BigInt(113);for(let e=0,t=Jc,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],Hc.push(2*(5*i+r)),Wc.push((e+1)*(e+2)/2%64);let n=Gc;for(let e=0;e<7;e++)t=(t<<Jc^(t>>Zc)*eh)%Qc,t&Xc&&(n^=Jc<<(Jc<<BigInt(e))-Jc);Yc.push(n)}const[th,rh]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:s,l:o}=Lc(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(Yc,!0),ih=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),nh=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class sh extends Vc{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Pc(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}(this.state)}keccak(){zc||Bc(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=ih(s,o,1)^r[i],c=nh(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){const i=Wc[r],s=ih(t,n,i),o=nh(t,n,i),a=Hc[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=th[i],e[1]^=rh[i]}r.fill(0)}(this.state32,this.rounds),zc||Bc(this.state32),this.posOut=0,this.pos=0}update(e){Tc(this);const{blockLen:t,state:r}=this,i=(e=$c(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,!!(128&t)&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Tc(this,!1),Mc(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Pc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Rc(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new sh(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}const oh=((e,t,r)=>Fc((()=>new sh(t,e,r))))(1,136,32),ah="https://rpc.walletconnect.org/v1";function ch(e){const t=`Ethereum Signed Message:\n${e.length}`,r=(new TextEncoder).encode(t+e);return"0x"+Ga.from(oh(r)).toString("hex")}async function hh(e,t,r,i,n,s){switch(r.t){case"eip191":return await async function(e,t,r){return(await lo({hash:ch(t),signature:r})).toLowerCase()===e.toLowerCase()}(e,t,r.s);case"eip1271":return await async function(e,t,r,i,n,s){const o=Xa(i);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",h=r.substring(2),u=o+ch(t).substring(2)+a+c+h,d=await fetch(`${s||ah}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:uh(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:u},"latest"]})}),{result:l}=await d.json();return!!l&&l.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}(e,t,r.s,i,n,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function uh(){return Date.now()+Math.floor(1e3*Math.random())}var dh=Object.defineProperty,lh=Object.defineProperties,fh=Object.getOwnPropertyDescriptors,ph=Object.getOwnPropertySymbols,gh=Object.prototype.hasOwnProperty,bh=Object.prototype.propertyIsEnumerable,yh=(e,t,r)=>t in e?dh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mh=(e,t)=>{for(var r in t||(t={}))gh.call(t,r)&&yh(e,r,t[r]);if(ph)for(var r of ph(t))bh.call(t,r)&&yh(e,r,t[r]);return e},vh=(e,t)=>lh(e,fh(t));const wh=e=>e?.split(":"),_h=e=>{const t=e&&wh(e);if(t)return t[2]+":"+t[3]},Eh=e=>{const t=e&&wh(e);if(t)return t.pop()};async function Sh(e){const{cacao:t,projectId:r}=e,{s:i,p:n}=t,s=Ih(n,n.iss),o=Eh(n.iss);return await hh(o,s,i,_h(n.iss),r)}const Ih=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,i=Eh(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${(e=>{const t=e&&wh(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,c=`Nonce: ${e.nonce}`,h=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,d=e.nbf?`Not Before: ${e.nbf}`:void 0,l=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,p=Lh(e.resources);if(p){n=Rh(n,Ph(p))}return[r,i,"",n,"",s,o,a,c,h,u,d,l,f].filter((e=>null!=e)).join("\n")};function xh(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const r=e.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach((e=>{const t=r[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function Oh(e,t,r={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const i=t.map((t=>({[`${e}/${t}`]:[r]})));return Object.assign({},...i)}function Ah(e){return xh(e),`urn:recap:${function(e){return Ga.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,"")}`}function Ph(e){const t=function(e){return JSON.parse(Ga.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return xh(t),t}function Mh(e,t,r){const i=function(e,t,r,i={}){return r?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:Oh(t,r,i)}}}(e,t,r);return Ah(i)}function kh(e){return e&&e.includes("urn:recap:")}function Th(e,t){const r=function(e,t){xh(e),xh(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),i={att:{}};return r.forEach((r=>{var n,s;Object.keys((null==(n=e.att)?void 0:n[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((n=>{var s,o;i.att[r]=vh(mh({},i.att[r]),{[n]:(null==(s=e.att[r])?void 0:s[n])||(null==(o=t.att[r])?void 0:o[n])})}))})),i}(Ph(e),Ph(t));return Ah(r)}function Rh(e="",t){xh(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const i=[];let n=0;Object.keys(t.att).forEach((e=>{const r=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));r.sort(((e,t)=>e.action.localeCompare(t.action)));const s={};r.forEach((e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)}));const o=Object.keys(s).map((t=>(n++,`(${n}) '${t}': '${s[t].join("', '")}' for '${e}'.`)));i.push(o.join(", ").replace(".,","."))}));return`${e?e+" ":""}${`${r}${i.join(" ")}`}`}function Ch(e){var t;const r=Ph(e);xh(r);const i=null==(t=r.att)?void 0:t.eip155;return i?Object.keys(i).map((e=>e.split("/")[1])):[]}function Nh(e){const t=Ph(e);xh(t);const r=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)}))})),[...new Set(r.flat())]}function Lh(e){if(!e)return;const t=e?.[e.length-1];return kh(t)?t:void 0}function jh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Uh(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Dh(e,...t){if(!Uh(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function zh(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function qh(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}const Bh=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function $h(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!Uh(e))throw new Error("Uint8Array expected, got "+typeof e);e=Kh(e)}return e}function Vh(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function Fh(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,h=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+h,a,i)}function Kh(e){return Uint8Array.from(e)}function Hh(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const Wh=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),Yh=Wh("expand 16-byte k"),Gh=Wh("expand 32-byte k"),Jh=Bh(Yh),Xh=Bh(Gh);function Zh(e,t){return e<<t|e>>>32-t}function Qh(e){return e.byteOffset%4==0}const eu=2**32-1,tu=new Uint32Array;const ru=(e,t)=>255&e[t++]|(255&e[t++])<<8;class iu{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Dh(e=$h(e),32);const t=ru(e,0),r=ru(e,2),i=ru(e,4),n=ru(e,6),s=ru(e,8),o=ru(e,10),a=ru(e,12),c=ru(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|n<<9),this.r[4]=255&(n>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=ru(e,16+2*t)}process(e,t,r=!1){const i=r?0:2048,{h:n,r:s}=this,o=s[0],a=s[1],c=s[2],h=s[3],u=s[4],d=s[5],l=s[6],f=s[7],p=s[8],g=s[9],b=ru(e,t+0),y=ru(e,t+2),m=ru(e,t+4),v=ru(e,t+6),w=ru(e,t+8),_=ru(e,t+10),E=ru(e,t+12),S=ru(e,t+14);let I=n[0]+(8191&b),x=n[1]+(8191&(b>>>13|y<<3)),O=n[2]+(8191&(y>>>10|m<<6)),A=n[3]+(8191&(m>>>7|v<<9)),P=n[4]+(8191&(v>>>4|w<<12)),M=n[5]+(w>>>1&8191),k=n[6]+(8191&(w>>>14|_<<2)),T=n[7]+(8191&(_>>>11|E<<5)),R=n[8]+(8191&(E>>>8|S<<8)),C=n[9]+(S>>>5|i),N=0,L=N+I*o+x*(5*g)+O*(5*p)+A*(5*f)+P*(5*l);N=L>>>13,L&=8191,L+=M*(5*d)+k*(5*u)+T*(5*h)+R*(5*c)+C*(5*a),N+=L>>>13,L&=8191;let j=N+I*a+x*o+O*(5*g)+A*(5*p)+P*(5*f);N=j>>>13,j&=8191,j+=M*(5*l)+k*(5*d)+T*(5*u)+R*(5*h)+C*(5*c),N+=j>>>13,j&=8191;let U=N+I*c+x*a+O*o+A*(5*g)+P*(5*p);N=U>>>13,U&=8191,U+=M*(5*f)+k*(5*l)+T*(5*d)+R*(5*u)+C*(5*h),N+=U>>>13,U&=8191;let D=N+I*h+x*c+O*a+A*o+P*(5*g);N=D>>>13,D&=8191,D+=M*(5*p)+k*(5*f)+T*(5*l)+R*(5*d)+C*(5*u),N+=D>>>13,D&=8191;let z=N+I*u+x*h+O*c+A*a+P*o;N=z>>>13,z&=8191,z+=M*(5*g)+k*(5*p)+T*(5*f)+R*(5*l)+C*(5*d),N+=z>>>13,z&=8191;let q=N+I*d+x*u+O*h+A*c+P*a;N=q>>>13,q&=8191,q+=M*o+k*(5*g)+T*(5*p)+R*(5*f)+C*(5*l),N+=q>>>13,q&=8191;let B=N+I*l+x*d+O*u+A*h+P*c;N=B>>>13,B&=8191,B+=M*a+k*o+T*(5*g)+R*(5*p)+C*(5*f),N+=B>>>13,B&=8191;let $=N+I*f+x*l+O*d+A*u+P*h;N=$>>>13,$&=8191,$+=M*c+k*a+T*o+R*(5*g)+C*(5*p),N+=$>>>13,$&=8191;let V=N+I*p+x*f+O*l+A*d+P*u;N=V>>>13,V&=8191,V+=M*h+k*c+T*a+R*o+C*(5*g),N+=V>>>13,V&=8191;let F=N+I*g+x*p+O*f+A*l+P*d;N=F>>>13,F&=8191,F+=M*u+k*h+T*c+R*a+C*o,N+=F>>>13,F&=8191,N=(N<<2)+N|0,N=N+L|0,L=8191&N,N>>>=13,j+=N,n[0]=L,n[1]=j,n[2]=U,n[3]=D,n[4]=z,n[5]=q,n[6]=B,n[7]=$,n[8]=V,n[9]=F}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;Hh(r)}update(e){zh(this);const{buffer:t,blockLen:r}=this,i=(e=$h(e)).length;for(let n=0;n<i;){const s=Math.min(r-this.pos,i-n);if(s!==r)t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=i-n;n+=r)this.process(e,n)}return this}destroy(){Hh(this.h,this.r,this.buffer,this.pad)}digestInto(e){zh(this),function(e,t){Dh(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const nu=function(e){const t=(t,r)=>e(r).update($h(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new iu(e)));const su=function(e,t){const{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw new Error("core must be a function");return jh(n),jh(o),qh(s),qh(r),(t,a,c,h,u=0)=>{Dh(t),Dh(a),Dh(c);const d=c.length;if(void 0===h&&(h=new Uint8Array(d)),Dh(h),jh(u),u<0||u>=eu)throw new Error("arx: counter overflow");if(h.length<d)throw new Error(`arx: output (${h.length}) is shorter than data (${d})`);const l=[];let f,p,g=t.length;if(32===g)l.push(f=Kh(t)),p=Xh;else{if(16!==g||!r)throw new Error(`arx: invalid 32-byte key, got length=${g}`);f=new Uint8Array(32),f.set(t),f.set(t,16),p=Jh,l.push(f)}Qh(a)||l.push(a=Kh(a));const b=Bh(f);if(i){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");i(p,b,Bh(a.subarray(0,16)),b),a=a.subarray(16)}const y=16-n;if(y!==a.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,l.push(a)}const m=Bh(a);return function(e,t,r,i,n,s,o,a){const c=n.length,h=new Uint8Array(64),u=Bh(h),d=Qh(n)&&Qh(s),l=d?Bh(n):tu,f=d?Bh(s):tu;for(let p=0;p<c;o++){if(e(t,r,i,u,o,a),o>=eu)throw new Error("arx: counter overflow");const g=Math.min(64,c-p);if(d&&64===g){const e=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(let t,r=0;r<16;r++)t=e+r,f[t]=l[t]^u[r];p+=64}else{for(let e,t=0;t<g;t++)e=p+t,s[e]=n[e]^h[t];p+=g}}}(e,p,b,m,c,h,u,o),Hh(...l),h}}((function(e,t,r,i,n,s=20){let o=e[0],a=e[1],c=e[2],h=e[3],u=t[0],d=t[1],l=t[2],f=t[3],p=t[4],g=t[5],b=t[6],y=t[7],m=n,v=r[0],w=r[1],_=r[2],E=o,S=a,I=c,x=h,O=u,A=d,P=l,M=f,k=p,T=g,R=b,C=y,N=m,L=v,j=w,U=_;for(let e=0;e<s;e+=2)E=E+O|0,N=Zh(N^E,16),k=k+N|0,O=Zh(O^k,12),E=E+O|0,N=Zh(N^E,8),k=k+N|0,O=Zh(O^k,7),S=S+A|0,L=Zh(L^S,16),T=T+L|0,A=Zh(A^T,12),S=S+A|0,L=Zh(L^S,8),T=T+L|0,A=Zh(A^T,7),I=I+P|0,j=Zh(j^I,16),R=R+j|0,P=Zh(P^R,12),I=I+P|0,j=Zh(j^I,8),R=R+j|0,P=Zh(P^R,7),x=x+M|0,U=Zh(U^x,16),C=C+U|0,M=Zh(M^C,12),x=x+M|0,U=Zh(U^x,8),C=C+U|0,M=Zh(M^C,7),E=E+A|0,U=Zh(U^E,16),R=R+U|0,A=Zh(A^R,12),E=E+A|0,U=Zh(U^E,8),R=R+U|0,A=Zh(A^R,7),S=S+P|0,N=Zh(N^S,16),C=C+N|0,P=Zh(P^C,12),S=S+P|0,N=Zh(N^S,8),C=C+N|0,P=Zh(P^C,7),I=I+M|0,L=Zh(L^I,16),k=k+L|0,M=Zh(M^k,12),I=I+M|0,L=Zh(L^I,8),k=k+L|0,M=Zh(M^k,7),x=x+O|0,j=Zh(j^x,16),T=T+j|0,O=Zh(O^T,12),x=x+O|0,j=Zh(j^x,8),T=T+j|0,O=Zh(O^T,7);let D=0;i[D++]=o+E|0,i[D++]=a+S|0,i[D++]=c+I|0,i[D++]=h+x|0,i[D++]=u+O|0,i[D++]=d+A|0,i[D++]=l+P|0,i[D++]=f+M|0,i[D++]=p+k|0,i[D++]=g+T|0,i[D++]=b+R|0,i[D++]=y+C|0,i[D++]=m+N|0,i[D++]=v+L|0,i[D++]=w+j|0,i[D++]=_+U|0}),{counterRight:!1,counterLength:4,allowShortKeys:!1}),ou=new Uint8Array(16),au=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(ou.subarray(r))},cu=new Uint8Array(32);function hu(e,t,r,i,n){const s=e(t,r,cu),o=nu.create(s);n&&au(o,n),au(o,i);const a=new Uint8Array(16),c=(e=>new DataView(e.buffer,e.byteOffset,e.byteLength))(a);Fh(c,0,BigInt(n?n.length:0),!0),Fh(c,8,BigInt(i.length),!0),o.update(a);const h=o.digest();return Hh(s,a),h}const uu=((e,t)=>{function r(r,...i){if(Dh(r),void 0!==e.nonceLength){const t=i[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?Dh(t):Dh(t,e.nonceLength)}const n=e.tagLength;n&&void 0!==i[1]&&Dh(i[1]);const s=t(r,...i),o=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");Dh(t)}};let a=!1;return{encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,Dh(e),o(s.encrypt.length,t),s.encrypt(e,t)},decrypt(e,t){if(Dh(e),n&&e.length<n)throw new Error("invalid ciphertext length: smaller than tagLength="+n);return o(s.decrypt.length,t),s.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e=>(t,r,i)=>({encrypt(n,s){const o=n.length;(s=Vh(o+16,s,!1)).set(n);const a=s.subarray(0,-16);e(t,r,a,a,1);const c=hu(e,t,r,a,i);return s.set(c,o),Hh(c),s},decrypt(n,s){s=Vh(n.length-16,s,!1);const o=n.subarray(0,-16),a=n.subarray(-16),c=hu(e,t,r,o,i);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}(a,c))throw new Error("invalid tag");return s.set(n.subarray(0,-16)),e(t,r,s,s,1),Hh(c),s}}))(su));class du extends Vc{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,kc(e);const r=$c(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return Tc(this),this.iHash.update(e),this}digestInto(e){Tc(this),Mc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const lu=(e,t,r)=>new du(e,t).update(r).digest();lu.create=(e,t)=>new du(e,t);const fu=new Uint8Array([0]),pu=new Uint8Array;const gu=(e,t,r,i,n)=>function(e,t,r,i=32){if(kc(e),Pc(i),i>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const n=Math.ceil(i/e.outputLen);void 0===r&&(r=pu);const s=new Uint8Array(n*e.outputLen),o=lu.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<n;t++)fu[0]=t+1,a.update(0===t?pu:c).update(r).update(fu).digestInto(c),s.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),fu.fill(0),s.slice(0,i)}(e,function(e,t,r){return kc(e),void 0===r&&(r=new Uint8Array(e.outputLen)),lu(e,$c(r),$c(t))}(e,t,r),i,n);function bu(e,t,r){return e&t^~e&r}function yu(e,t,r){return e&t^e&r^t&r}class mu extends Vc{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Uc(this.buffer)}update(e){Tc(this);const{view:t,buffer:r,blockLen:i}=this,n=(e=$c(e)).length;for(let s=0;s<n;){const o=Math.min(i-this.pos,n-s);if(o!==i)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=Uc(e);for(;i<=n-s;s+=i)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Tc(this),Rc(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:n}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,h=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+h,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);const o=Uc(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,h[e],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}const vu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_u=new Uint32Array(64);class Eu extends mu{constructor(){super(64,32,8,!1),this.A=0|wu[0],this.B=0|wu[1],this.C=0|wu[2],this.D=0|wu[3],this.E=0|wu[4],this.F=0|wu[5],this.G=0|wu[6],this.H=0|wu[7]}get(){const{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)_u[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=_u[e-15],r=_u[e-2],i=Dc(t,7)^Dc(t,18)^t>>>3,n=Dc(r,17)^Dc(r,19)^r>>>10;_u[e]=n+_u[e-7]+i+_u[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:c,H:h}=this;for(let e=0;e<64;e++){const t=h+(Dc(o,6)^Dc(o,11)^Dc(o,25))+bu(o,a,c)+vu[e]+_u[e]|0,u=(Dc(r,2)^Dc(r,13)^Dc(r,22))+yu(r,i,n)|0;h=c,c=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+u|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(r,i,n,s,o,a,c,h)}roundClean(){_u.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Su=Fc((()=>new Eu)),Iu=BigInt(0);function xu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Ou(e){if(!xu(e))throw new Error("Uint8Array expected")}const Au=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const Pu=48,Mu=57,ku=65,Tu=70,Ru=97,Cu=102;function Nu(e){return e>=Pu&&e<=Mu?e-Pu:e>=ku&&e<=Tu?e-(ku-10):e>=Ru&&e<=Cu?e-(Ru-10):void 0}function Lu(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){const r=Nu(e.charCodeAt(n)),s=Nu(e.charCodeAt(n+1));if(void 0===r||void 0===s){const t=e[n]+e[n+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+n)}i[t]=16*r+s}return i}function ju(e){return Ou(e),function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Iu:BigInt("0x"+e)}(function(e){Ou(e);let t="";for(let r=0;r<e.length;r++)t+=Au[e[r]];return t}(Uint8Array.from(e).reverse()))}function Uu(e,t){return function(e,t){return Lu(e.toString(16).padStart(2*t,"0"))}(e,t).reverse()}function Du(e,t,r){let i;if("string"==typeof t)try{i=Lu(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!xu(t))throw new Error(e+" must be hex string or Uint8Array");i=Uint8Array.from(t)}const n=i.length;if("number"==typeof r&&n!==r)throw new Error(e+" of length "+r+" expected, got "+n);return i}const zu=e=>"bigint"==typeof e&&Iu<=e;function qu(e,t,r,i){if(!function(e,t,r){return zu(e)&&zu(t)&&zu(r)&&t<=e&&e<r}(t,r,i))throw new Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}const Bu={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||xu(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};const $u=BigInt(0),Vu=BigInt(1);function Fu(e,t){const r=e%t;return r>=$u?r:t+r}function Ku(e,t,r){let i=e;for(;t-- >$u;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Hu=BigInt(0),Wu=BigInt(1);function Yu(e){return function(e,t,r={}){const i=(t,r,i)=>{const n=Bu[r];if("function"!=typeof n)throw new Error("invalid validator function");const s=e[t];if(!(i&&void 0===s||n(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))i(e,r,!1);for(const[e,t]of Object.entries(r))i(e,t,!0)}(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}const Gu=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Ju=BigInt(1),Xu=BigInt(2),Zu=BigInt(3),Qu=BigInt(5);BigInt(8);const ed=function(e){const t=Yu(e),{P:r}=t,i=e=>Fu(e,r),n=t.montgomeryBits,s=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>function(e,t,r){if(t<$u)throw new Error("invalid exponent, negatives unsupported");if(r<=$u)throw new Error("invalid modulus");if(r===Vu)return $u;let i=Vu;for(;t>$u;)t&Vu&&(i=i*e%r),e=e*e%r,t>>=Vu;return i}(e,r-BigInt(2),r));function h(e,t,r){const n=i(e*(t-r));return[t=i(t-n),r=i(r+n)]}const u=(t.a-BigInt(2))/BigInt(4);function d(e){return Uu(i(e),s)}function l(e,t){const l=function(e){const t=Du("u coordinate",e,s);return 32===o&&(t[31]&=127),ju(t)}(t),f=function(e){const t=Du("scalar",e),r=t.length;if(r!==s&&r!==o)throw new Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return ju(a(t))}(e),p=function(e,t){qu("u",e,Hu,r),qu("scalar",t,Hu,r);const s=t,o=e;let a,d=Wu,l=Hu,f=e,p=Wu,g=Hu;for(let e=BigInt(n-1);e>=Hu;e--){const t=s>>e&Wu;g^=t,a=h(g,d,f),d=a[0],f=a[1],a=h(g,l,p),l=a[0],p=a[1],g=t;const r=d+l,n=i(r*r),c=d-l,b=i(c*c),y=n-b,m=f+p,v=i((f-p)*r),w=i(m*c),_=v+w,E=v-w;f=i(_*_),p=i(o*i(E*E)),d=i(n*b),l=i(y*(n+i(u*y)))}a=h(g,d,f),d=a[0],f=a[1],a=h(g,l,p),l=a[0],p=a[1];const b=c(l);return i(d*b)}(l,f);if(p===Hu)throw new Error("invalid private or public key received");return d(p)}const f=d(t.Gu);function p(e){return l(e,f)}return{scalarMult:l,scalarMultBase:p,getSharedSecret:(e,t)=>l(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:f}}({P:Gu,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=Gu,{pow_p_5_8:r,b2:i}=function(e){const t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=Gu,o=e*e%s*e%s,a=Ku(o,Xu,s)*o%s,c=Ku(a,Ju,s)*e%s,h=Ku(c,Qu,s)*c%s,u=Ku(h,t,s)*h%s,d=Ku(u,r,s)*u%s,l=Ku(d,i,s)*d%s,f=Ku(l,n,s)*l%s,p=Ku(f,n,s)*l%s,g=Ku(p,t,s)*h%s;return{pow_p_5_8:Ku(g,Xu,s)*e%s,b2:o}}(e);return Fu(Ku(r,Zu,t)*i,t)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:Kc}),td="base10",rd="base16",id="base64pad",nd="base64url",sd="utf8";function od(){return Ka(Kc(32),rd)}function ad(e){return Ka(Su(Fa(e,rd)),rd)}function cd(e){return Ka(Su(Fa(e,sd)),rd)}function hd(e){return Fa(`${e}`,td)}function ud(e){return Number(Ka(e,td))}function dd(e){const{encoding:t=id}=e;if(2===ud(e.type))return Ka(bo([e.type,e.sealed]),t);if(1===ud(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ka(bo([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return Ka(bo([e.type,e.iv,e.sealed]),t)}function ld(e){const{encoded:t,encoding:r=id}=e,i=Fa(t,r),n=i.slice(0,1);if(1===ud(n)){const e=33,t=e+12,r=i.slice(1,e),s=i.slice(e,t);return{type:n,sealed:i.slice(t),iv:s,senderPublicKey:r}}if(2===ud(n)){return{type:n,sealed:i.slice(1),iv:Kc(12)}}const s=i.slice(1,13);return{type:n,sealed:i.slice(13),iv:s}}function fd(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function pd(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function gd(e){return 2===e.type}function bd(e,t){const[r,i,n]=e.split("."),s=function(e){return Ga.from(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const r=t.length%4;return r>0&&(t+="=".repeat(4-r)),t}(e),"base64")}(n);if(64!==s.length)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=Su(`${r}.${i}`),h=function(e){return new Ha.ec("p256").keyFromPublic({x:Ga.from(e.x,"base64").toString("hex"),y:Ga.from(e.y,"base64").toString("hex")},"hex")}(t),u=Ka(c,rd);if(!h.verify(u,{r:o,s:a}))throw new Error("Invalid signature");return Kn(e).payload}function yd(e){return e?.relay||{protocol:"irn"}}function md(e){const t=Wa[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function vd(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(i)){const n=t.replace(i,""),s=e[t];r[n]=s}})),r}function wd(e){if(!e.includes("wc:")){const t=Ac(e);null!=t&&t.includes("wc:")&&(e=t)}const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,i=e.substring(0,t),n=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(s),a={};o.forEach(((e,t)=>{a[t]=e}));const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:i,topic:_d(n[0]),version:parseInt(n[1],10),symKey:a.symKey,relay:vd(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function _d(e){return e.startsWith("//")?e.substring(2):e}function Ed(e){const t=new URLSearchParams,r=function(e,t="-"){const r={};return Object.keys(e).forEach((i=>{const n=i,s="relay"+t+n;e[n]&&(r[s]=e[n])})),r}(e.relay);Object.keys(r).sort().forEach((e=>{t.set(e,r[e])})),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const i=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${i}`}function Sd(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function Id(e){const t=[];return e.forEach((e=>{const[r,i]=e.split(":");t.push(`${r}:${i}`)})),t}function xd(e,t){t=t.map((e=>e.replace("did:pkh:","")));const r=function(e){const t={};return e?.forEach((e=>{var r;const[i,n]=e.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(e),null==(r=t[i].chains)||r.push(`${i}:${n}`)})),t}(t);for(const[t,i]of Object.entries(r))i.methods?i.methods=Ec(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}const Od={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ad={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Pd(e,t){const{message:r,code:i}=Ad[e];return{message:t?`${r} ${t}`:r,code:i}}function Md(e,t){const{message:r,code:i}=Od[e];return{message:t?`${r} ${t}`:r,code:i}}function kd(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function Td(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Rd(e){return typeof e>"u"}function Cd(e,t){return!(!t||!Rd(e))||"string"==typeof e&&!!e.trim().length}function Nd(e,t){return!(!t||!Rd(e))||"number"==typeof e&&!isNaN(e)}function Ld(e){return!(!Cd(e,!1)||!e.includes(":"))&&2===e.split(":").length}function jd(e){let t=!0;return kd(e)?e.length&&(t=e.every((e=>Cd(e,!1)))):t=!1,t}function Ud(e,t,r){let i=null;return Object.entries(e).forEach((([e,n])=>{if(i)return;const s=function(e,t,r){let i=null;return kd(t)&&t.length?t.forEach((e=>{i||Ld(e)||(i=Md("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):Ld(e)||(i=Md("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}(e,Za(e,n),`${t} ${r}`);s&&(i=s)})),i}function Dd(e,t){let r=null;return kd(e)?e.forEach((e=>{r||function(e){if(Cd(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&Ld(e)}}return!1}(e)||(r=Md("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=Md("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function zd(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const i=function(e,t){let r=null;return jd(e?.methods)?jd(e?.events)||(r=Md("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Md("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(e,`${t}, namespace`);i&&(r=i)})),r}function qd(e,t){let r=null;if(e&&Td(e)){const i=zd(e,t);i&&(r=i);const n=function(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const i=Dd(e?.accounts,`${t} namespace`);i&&(r=i)})),r}(e,t);n&&(r=n)}else r=Pd("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Bd(e){return Cd(e.protocol,!0)}function $d(e){return typeof e<"u"&&null!==typeof e}function Vd(e,t){return!(!Ld(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...Id(e.accounts))})),t}(e).includes(t))}function Fd(e,t,r){return!!Cd(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{Id(e.accounts).includes(t)&&r.push(...e.methods)})),r}(e,t).includes(r)}function Kd(e,t,r){return!!Cd(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{Id(e.accounts).includes(t)&&r.push(...e.events)})),r}(e,t).includes(r)}function Hd(e,t,r){let i=null;const n=function(e){const t={};return Object.keys(e).forEach((r=>{var i;r.includes(":")?t[r]=e[r]:null==(i=e[r].chains)||i.forEach((i=>{t[i]={methods:e[r].methods,events:e[r].events}}))})),t}(e),s=function(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const i=Id(e[r].accounts);i?.forEach((i=>{t[i]={accounts:e[r].accounts.filter((e=>e.includes(`${i}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}(t),o=Object.keys(n),a=Object.keys(s),c=Wd(Object.keys(e)),h=Wd(Object.keys(t)),u=c.filter((e=>!h.includes(e)));return u.length&&(i=Pd("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),lc(o,a)||(i=Pd("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||i)return;const n=Id(t[e].accounts);n.includes(e)||(i=Pd("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${n.toString()}`))})),o.forEach((e=>{i||(lc(n[e].methods,s[e].methods)?lc(n[e].events,s[e].events)||(i=Pd("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):i=Pd("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),i}function Wd(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function Yd(){const e=ac();return new Promise((t=>{switch(e){case tc:t(oc()&&navigator?.onLine);break;case Qa:t(async function(){if(sc()&&typeof i.g<"u"&&null!=i.g&&i.g.NetInfo){const e=await(null==i.g?void 0:i.g.NetInfo.fetch());return e?.isConnected}return!0}());break;default:t(!0)}}))}function Gd(e){switch(ac()){case tc:!function(e){!sc()&&oc()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case Qa:!function(e){sc()&&typeof i.g<"u"&&null!=i.g&&i.g.NetInfo&&i.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e)}}const Jd={};class Xd{static get(e){return Jd[e]}static set(e,t){Jd[e]=t}static delete(e){delete Jd[e]}}const Zd="PARSE_ERROR",Qd="INVALID_REQUEST",el="METHOD_NOT_FOUND",tl="INVALID_PARAMS",rl="INTERNAL_ERROR",il="SERVER_ERROR",nl=[-32700,-32600,-32601,-32602,-32603],sl={[Zd]:{code:-32700,message:"Parse error"},[Qd]:{code:-32600,message:"Invalid Request"},[el]:{code:-32601,message:"Method not found"},[tl]:{code:-32602,message:"Invalid params"},[rl]:{code:-32603,message:"Internal error"},[il]:{code:-32e3,message:"Server error"}},ol=il;function al(e){return nl.includes(e)}function cl(e){return Object.keys(sl).includes(e)?sl[e]:sl[ol]}function hl(e){const t=Object.values(sl).find((t=>t.code===e));return t||sl[ol]}var ul=i(5682);function dl(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function ll(e=6){return BigInt(dl(e))}function fl(e,t,r){return{id:r||dl(),jsonrpc:"2.0",method:e,params:t}}function pl(e,t){return{id:e,jsonrpc:"2.0",result:t}}function gl(e,t,r){return{id:e,jsonrpc:"2.0",error:bl(t,r)}}function bl(e,t){return void 0===e?cl(rl):("string"==typeof e&&(e=Object.assign(Object.assign({},cl(il)),{message:e})),void 0!==t&&(e.data=t),al(e.code)&&(e=hl(e.code)),e)}class yl{}class ml extends yl{constructor(){super()}}class vl extends ml{constructor(e){super()}}function wl(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function _l(e){return wl(e,"^wss?:")}function El(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function Sl(e){return El(e)&&"method"in e}function Il(e){return El(e)&&(xl(e)||Ol(e))}function xl(e){return"result"in e}function Ol(e){return"error"in e}class Al extends vl{constructor(e){super(e),this.events=new H.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(fl(e.method,e.params||[],e.id||ll().toString()),t)}async requestStrict(e,t){return new Promise((async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(e){i(e)}this.events.on(`${e.id}`,(e=>{Ol(e)?i(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(e){i(e)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Il(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const Pl=e=>e.split("?")[0],Ml=typeof WebSocket<"u"?WebSocket:typeof i.g<"u"&&typeof i.g.WebSocket<"u"?i.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:i(796);class kl{constructor(e){if(this.url=e,this.events=new H.EventEmitter,this.registering=!1,!_l(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(xe(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!_l(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,r)=>{const n=(0,ul.isReactNative)()?void 0:{rejectUnauthorized:(o=e,!new RegExp("wss?://localhost(:d{2,5})?").test(o))},s=new Ml(e,[],n);var o;typeof WebSocket<"u"||typeof i.g<"u"&&typeof i.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?s.onerror=e=>{const t=e;r(this.emitError(t.error))}:s.on("error",(e=>{r(this.emitError(e))})),s.onopen=()=>{this.onOpen(s),t(s)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Ie(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=gl(e,r.message||r.toString());this.events.emit("payload",i)}parseError(e,t=this.url){return function(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}(e,Pl(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Pl(this.url)}`));return this.events.emit("register_error",t),t}}var Tl=i(8287).hp;const Rl="core",Cl=`wc@2:${Rl}:`,Nl="error",Ll={database:":memory:"},jl="client_ed25519_seed",Ul=Y.ONE_DAY,Dl=Y.SIX_HOURS,zl="wss://relay.walletconnect.org",ql="relayer_message",Bl="relayer_message_ack",$l="relayer_connect",Vl="relayer_disconnect",Fl="relayer_error",Kl="relayer_connection_stalled",Hl="relayer_publish",Wl="payload",Yl="connect",Gl="disconnect",Jl="error",Xl="2.19.1",Zl={link_mode:"link_mode",relay:"relay"},Ql="inbound",ef="outbound",tf="WALLETCONNECT_LINK_MODE_APPS",rf="subscription_created",nf="subscription_deleted",sf="subscription_sync",of="subscription_resubscribed",af=(Y.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Y.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Y.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:0},res:{ttl:Y.ONE_DAY,prompt:!1,tag:0}}}),cf="pairing_create",hf="pairing_expire",uf="pairing_delete",df="pairing_ping",lf="history_created",ff="history_updated",pf="history_deleted",gf="history_sync",bf="expirer_created",yf="expirer_deleted",mf="expirer_expired",vf="expirer_sync",wf="https://verify.walletconnect.org",_f=wf,Ef=`${_f}/v3`,Sf=["https://verify.walletconnect.com",wf],If="pairing_started",xf="pairing_uri_validation_success",Of="pairing_uri_not_expired",Af="store_new_pairing",Pf="subscribing_pairing_topic",Mf="subscribe_pairing_topic_success",kf="existing_pairing",Tf="pairing_not_expired",Rf="emit_inactive_pairing",Cf="emit_session_proposal",Nf="no_internet_connection",Lf="malformed_pairing_uri",jf="active_pairing_already_exists",Uf="subscribe_pairing_topic_failure",Df="pairing_expired",zf="proposal_listener_not_found",qf="session_approve_started",Bf="session_namespaces_validation_success",$f="subscribing_session_topic",Vf="subscribe_session_topic_success",Ff="publishing_session_approve",Kf="session_approve_publish_success",Hf="store_session",Wf="publishing_session_settle",Yf="session_settle_publish_success",Gf="no_internet_connection",Jf="proposal_expired",Xf="subscribe_session_topic_failure",Zf="session_approve_publish_failure",Qf="session_settle_publish_failure",ep="session_approve_namespace_validation_failure",tp="proposal_not_found",rp="authenticated_session_approve_started",ip="create_authenticated_session_topic",np="cacaos_verified",sp="store_authenticated_session",op="subscribing_authenticated_session_topic",ap="subscribe_authenticated_session_topic_success",cp="publishing_authenticated_session_approve",hp="no_internet_connection",up="invalid_cacao",dp="subscribe_authenticated_session_topic_failure",lp="authenticated_session_approve_publish_failure",fp="authenticated_session_pending_request_not_found";var pp=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),h=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*h+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,l=s-1;(0!==u||d<n)&&-1!==l;l--,d++)u+=a*o[l]>>>0,o[l]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");n=d,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,h=new Uint8Array(o);n!==s;){for(var d=t[n],l=0,f=o-1;(0!==d||l<i)&&-1!==f;f--,l++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=l,n++}for(var p=o-i;p!==o&&0===h[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(h[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}}},gp=pp;const bp=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class yp{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class mp{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return wp(this,e)}}class vp{constructor(e){this.decoders=e}or(e){return wp(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const wp=(e,t)=>new vp({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class _p{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new yp(e,t,r),this.decoder=new mp(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ep=({name:e,prefix:t,encode:r,decode:i})=>new _p(e,t,r,i),Sp=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=gp(r,t);return Ep({prefix:e,name:t,encode:i,decode:e=>bp(n(e))})},Ip=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>Ep({prefix:t,name:e,encode:e=>((e,t,r)=>{const i="="===t[t.length-1],n=(1<<r)-1;let s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s})(e,i,r),decode:t=>((e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,h=0;for(let t=0;t<s;++t){const s=n[e[t]];if(void 0===s)throw new SyntaxError(`Non-${i} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[h++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,i,r,e)}),xp=Ep({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var Op=Object.freeze({__proto__:null,identity:xp});const Ap=Ip({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Pp=Object.freeze({__proto__:null,base2:Ap});const Mp=Ip({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var kp=Object.freeze({__proto__:null,base8:Mp});const Tp=Sp({prefix:"9",name:"base10",alphabet:"0123456789"});var Rp=Object.freeze({__proto__:null,base10:Tp});const Cp=Ip({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Np=Ip({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Lp=Object.freeze({__proto__:null,base16:Cp,base16upper:Np});const jp=Ip({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Up=Ip({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dp=Ip({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zp=Ip({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qp=Ip({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Bp=Ip({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$p=Ip({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vp=Ip({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fp=Ip({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Kp=Object.freeze({__proto__:null,base32:jp,base32upper:Up,base32pad:Dp,base32padupper:zp,base32hex:qp,base32hexupper:Bp,base32hexpad:$p,base32hexpadupper:Vp,base32z:Fp});const Hp=Sp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Wp=Sp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Yp=Object.freeze({__proto__:null,base36:Hp,base36upper:Wp});const Gp=Sp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Jp=Sp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Xp=Object.freeze({__proto__:null,base58btc:Gp,base58flickr:Jp});const Zp=Ip({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Qp=Ip({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eg=Ip({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tg=Ip({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var rg=Object.freeze({__proto__:null,base64:Zp,base64pad:Qp,base64url:eg,base64urlpad:tg});const ig=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ng=ig.reduce(((e,t,r)=>(e[r]=t,e)),[]),sg=ig.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const og=Ep({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=ng[t]),"")},decode:function(e){const t=[];for(const r of e){const e=sg[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var ag=Object.freeze({__proto__:null,base256emoji:og}),cg=function e(t,r,i){r=r||[];for(var n=i=i||0;t>=dg;)r[i++]=255&t|hg,t/=128;for(;t&ug;)r[i++]=255&t|hg,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},hg=128,ug=-128,dg=Math.pow(2,31);var lg=function e(t,r){var i,n=0,s=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");i=t[o++],n+=s<28?(i&pg)<<s:(i&pg)*Math.pow(2,s),s+=7}while(i>=fg);return e.bytes=o-r,n},fg=128,pg=127;var gg=Math.pow(2,7),bg=Math.pow(2,14),yg=Math.pow(2,21),mg=Math.pow(2,28),vg=Math.pow(2,35),wg=Math.pow(2,42),_g=Math.pow(2,49),Eg=Math.pow(2,56),Sg=Math.pow(2,63),Ig={encode:cg,decode:lg,encodingLength:function(e){return e<gg?1:e<bg?2:e<yg?3:e<mg?4:e<vg?5:e<wg?6:e<_g?7:e<Eg?8:e<Sg?9:10}},xg=Ig;const Og=(e,t,r=0)=>(xg.encode(e,t,r),t),Ag=e=>xg.encodingLength(e),Pg=(e,t)=>{const r=t.byteLength,i=Ag(e),n=i+Ag(r),s=new Uint8Array(n+r);return Og(e,s,0),Og(r,s,i),s.set(t,n),new Mg(e,r,t,s)};class Mg{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const kg=({name:e,code:t,encode:r})=>new Tg(e,t,r);class Tg{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Pg(this.code,t):t.then((e=>Pg(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Rg=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Cg=kg({name:"sha2-256",code:18,encode:Rg("SHA-256")}),Ng=kg({name:"sha2-512",code:19,encode:Rg("SHA-512")});Object.freeze({__proto__:null,sha256:Cg,sha512:Ng});const Lg=bp,jg={code:0,name:"identity",encode:Lg,digest:e=>Pg(0,Lg(e))};Object.freeze({__proto__:null,identity:jg});new TextEncoder,new TextDecoder;const Ug={...Op,...Pp,...kp,...Rp,...Lp,...Kp,...Yp,...Xp,...rg,...ag};function Dg(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const zg=Dg("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),qg=Dg("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Bg={utf8:zg,"utf-8":zg,hex:Ug.base16,latin1:qg,ascii:qg,binary:qg,...Ug};var $g=Object.defineProperty,Vg=(e,t,r)=>((e,t,r)=>t in e?$g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Fg{constructor(e,t){this.core=e,this.logger=t,Vg(this,"keychain",new Map),Vg(this,"name","keychain"),Vg(this,"version","0.3"),Vg(this,"initialized",!1),Vg(this,"storagePrefix",Cl),Vg(this,"init",(async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}})),Vg(this,"has",(e=>(this.isInitialized(),this.keychain.has(e)))),Vg(this,"set",(async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()})),Vg(this,"get",(e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=Pd("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t})),Vg(this,"del",(async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()})),this.core=e,this.logger=et(t,this.name)}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,fc(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?pc(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Kg=Object.defineProperty,Hg=(e,t,r)=>((e,t,r)=>t in e?Kg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Wg{constructor(e,t,r){this.core=e,this.logger=t,Hg(this,"name","crypto"),Hg(this,"keychain"),Hg(this,"randomSessionIdentifier",od()),Hg(this,"initialized",!1),Hg(this,"init",(async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)})),Hg(this,"hasKeys",(e=>(this.isInitialized(),this.keychain.has(e)))),Hg(this,"getClientId",(async()=>{this.isInitialized();return Vn(Hn(await this.getClientSeed()).publicKey)})),Hg(this,"generateKeyPair",(()=>{this.isInitialized();const e=function(){const e=ed.utils.randomPrivateKey(),t=ed.getPublicKey(e);return{privateKey:Ka(e,rd),publicKey:Ka(t,rd)}}();return this.setPrivateKey(e.publicKey,e.privateKey)})),Hg(this,"signJWT",(async e=>{this.isInitialized();const t=Hn(await this.getClientSeed()),r=this.randomSessionIdentifier,i=Ul;return await Wn(r,e,i,t)})),Hg(this,"generateSharedKey",((e,t,r)=>{this.isInitialized();const i=function(e,t){const r=ed.getSharedSecret(Fa(e,rd),Fa(t,rd));return Ka(gu(Su,r,void 0,void 0,32),rd)}(this.getPrivateKey(e),t);return this.setSymKey(i,r)})),Hg(this,"setSymKey",(async(e,t)=>{this.isInitialized();const r=t||ad(e);return await this.keychain.set(r,e),r})),Hg(this,"deleteKeyPair",(async e=>{this.isInitialized(),await this.keychain.del(e)})),Hg(this,"deleteSymKey",(async e=>{this.isInitialized(),await this.keychain.del(e)})),Hg(this,"encode",(async(e,t,r)=>{this.isInitialized();const i=fd(r),n=xe(t);if(gd(i))return function(e,t){const r=hd(2),i=Kc(12);return dd({type:r,sealed:Fa(e,sd),iv:i,encoding:t})}(n,r?.encoding);if(pd(i)){const t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}const s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return function(e){const t=hd(typeof e.type<"u"?e.type:0);if(1===ud(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Fa(e.senderPublicKey,rd):void 0,i=typeof e.iv<"u"?Fa(e.iv,rd):Kc(12),n=Fa(e.symKey,rd);return dd({type:t,sealed:uu(n,i).encrypt(Fa(e.message,sd)),iv:i,senderPublicKey:r,encoding:e.encoding})}({type:o,symKey:s,message:n,senderPublicKey:a,encoding:r?.encoding})})),Hg(this,"decode",(async(e,t,r)=>{this.isInitialized();const i=function(e,t){const r=ld({encoded:e,encoding:t?.encoding});return fd({type:ud(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ka(r.senderPublicKey,rd):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(gd(i)){const e=function(e,t){const{sealed:r}=ld({encoded:e,encoding:t});return Ka(r,sd)}(t,r?.encoding);return Ie(e)}if(pd(i)){const t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const i=function(e){const t=Fa(e.symKey,rd),{sealed:r,iv:i}=ld(e),n=uu(t,i).decrypt(r);if(null===n)throw new Error("Failed to decrypt");return Ka(n,sd)}({symKey:this.getSymKey(e),encoded:t,encoding:r?.encoding});return Ie(i)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}})),Hg(this,"getPayloadType",((e,t=id)=>ud(ld({encoded:e,encoding:t}).type))),Hg(this,"getPayloadSenderPublicKey",((e,t=id)=>{const r=ld({encoded:e,encoding:t});return r.senderPublicKey?Ka(r.senderPublicKey,rd):void 0})),this.core=e,this.logger=et(t,this.name),this.keychain=r||new Fg(this.core,this.logger)}get context(){return Qe(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(jl)}catch{e=od(),await this.keychain.set(jl,e)}return function(e,t="utf8"){const r=Bg[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Yg=Object.defineProperty,Gg=Object.defineProperties,Jg=Object.getOwnPropertyDescriptors,Xg=Object.getOwnPropertySymbols,Zg=Object.prototype.hasOwnProperty,Qg=Object.prototype.propertyIsEnumerable,eb=(e,t,r)=>t in e?Yg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tb=(e,t,r)=>eb(e,"symbol"!=typeof t?t+"":t,r);class rb extends ct{constructor(e,t){super(e,t),this.logger=e,this.core=t,tb(this,"messages",new Map),tb(this,"messagesWithoutClientAck",new Map),tb(this,"name","messages"),tb(this,"version","0.3"),tb(this,"initialized",!1),tb(this,"storagePrefix",Cl),tb(this,"init",(async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e);const t=await this.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}})),tb(this,"set",(async(e,t,r)=>{this.isInitialized();const i=cd(t);let n=this.messages.get(e);if(typeof n>"u"&&(n={}),typeof n[i]<"u")return i;if(n[i]=t,this.messages.set(e,n),r===Ql){const r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,((e,t)=>Gg(e,Jg(t)))(((e,t)=>{for(var r in t||(t={}))Zg.call(t,r)&&eb(e,r,t[r]);if(Xg)for(var r of Xg(t))Qg.call(t,r)&&eb(e,r,t[r]);return e})({},r),{[i]:t}))}return await this.persist(),i})),tb(this,"get",(e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t})),tb(this,"getWithoutAck",(e=>{this.isInitialized();const t={};for(const r of e){const e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t})),tb(this,"has",((e,t)=>{this.isInitialized();return typeof this.get(e)[cd(t)]<"u"})),tb(this,"ack",(async(e,t)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(e);if(typeof r>"u")return;delete r[cd(t)],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist()})),tb(this,"del",(async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()})),this.logger=et(e,this.name),this.core=t}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,fc(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,fc(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?pc(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?pc(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ib=Object.defineProperty,nb=Object.defineProperties,sb=Object.getOwnPropertyDescriptors,ob=Object.getOwnPropertySymbols,ab=Object.prototype.hasOwnProperty,cb=Object.prototype.propertyIsEnumerable,hb=(e,t,r)=>t in e?ib(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ub=(e,t)=>{for(var r in t||(t={}))ab.call(t,r)&&hb(e,r,t[r]);if(ob)for(var r of ob(t))cb.call(t,r)&&hb(e,r,t[r]);return e},db=(e,t)=>nb(e,sb(t)),lb=(e,t,r)=>hb(e,"symbol"!=typeof t?t+"":t,r);class fb extends ht{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,lb(this,"events",new H.EventEmitter),lb(this,"name","publisher"),lb(this,"queue",new Map),lb(this,"publishTimeout",(0,Y.toMiliseconds)(Y.ONE_MINUTE)),lb(this,"initialPublishTimeout",(0,Y.toMiliseconds)(15*Y.ONE_SECOND)),lb(this,"needsTransportRestart",!1),lb(this,"publish",(async(e,t,r)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});const n=r?.ttl||Dl,s=yd(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||ll().toString(),h={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},u=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const i=new Promise((async i=>{const s=({id:e})=>{h.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(Hl,s),i(h))};this.relayer.events.on(Hl,s);const u=bc(new Promise(((i,s)=>{this.rpcPublish({topic:e,message:t,ttl:n,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(i).catch((e=>{this.logger.warn(e,e?.message),s(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await u,this.events.removeListener(Hl,s)}catch(e){this.queue.set(c,db(ub({},h),{attempt:1})),this.logger.warn(e,e?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await bc(i,this.publishTimeout,u)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(i=r?.internal)&&i.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}})),lb(this,"on",((e,t)=>{this.events.on(e,t)})),lb(this,"once",((e,t)=>{this.events.once(e,t)})),lb(this,"off",((e,t)=>{this.events.off(e,t)})),lb(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.relayer=e,this.logger=et(t,this.name),this.registerEventListeners()}get context(){return Qe(this.logger)}async rpcPublish(e){var t,r,i,n;const{topic:s,message:o,ttl:a=Dl,prompt:c,tag:h,id:u,attestation:d,tvf:l}=e,f={method:md(yd().protocol).publish,params:ub({topic:s,message:o,ttl:a,prompt:c,tag:h,attestation:d},l),id:u};Rd(null==(t=f.params)?void 0:t.prompt)&&(null==(r=f.params)||delete r.prompt),Rd(null==(i=f.params)?void 0:i.tag)&&(null==(n=f.params)||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});const p=await this.relayer.request(f);return this.relayer.events.emit(Hl,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const r=e.attempt+1;this.queue.set(t,db(ub({},e),{attempt:r}));const{topic:i,message:n,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(db(ub({},e),{topic:i,message:n,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(Z,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Kl);this.checkQueue()})),this.relayer.on(Bl,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}var pb=Object.defineProperty,gb=(e,t,r)=>((e,t,r)=>t in e?pb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class bb{constructor(){gb(this,"map",new Map),gb(this,"set",((e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])})),gb(this,"get",(e=>this.map.get(e)||[])),gb(this,"exists",((e,t)=>this.get(e).includes(t))),gb(this,"delete",((e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const i=r.filter((e=>e!==t));i.length?this.map.set(e,i):this.map.delete(e)})),gb(this,"clear",(()=>{this.map.clear()}))}get topics(){return Array.from(this.map.keys())}}var yb=Object.defineProperty,mb=Object.defineProperties,vb=Object.getOwnPropertyDescriptors,wb=Object.getOwnPropertySymbols,_b=Object.prototype.hasOwnProperty,Eb=Object.prototype.propertyIsEnumerable,Sb=(e,t,r)=>t in e?yb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ib=(e,t)=>{for(var r in t||(t={}))_b.call(t,r)&&Sb(e,r,t[r]);if(wb)for(var r of wb(t))Eb.call(t,r)&&Sb(e,r,t[r]);return e},xb=(e,t)=>mb(e,vb(t)),Ob=(e,t,r)=>Sb(e,"symbol"!=typeof t?t+"":t,r);class Ab extends lt{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Ob(this,"subscriptions",new Map),Ob(this,"topicMap",new bb),Ob(this,"events",new H.EventEmitter),Ob(this,"name","subscription"),Ob(this,"version","0.3"),Ob(this,"pending",new Map),Ob(this,"cached",[]),Ob(this,"initialized",!1),Ob(this,"storagePrefix",Cl),Ob(this,"subscribeTimeout",(0,Y.toMiliseconds)(Y.ONE_MINUTE)),Ob(this,"initialSubscribeTimeout",(0,Y.toMiliseconds)(15*Y.ONE_SECOND)),Ob(this,"clientId"),Ob(this,"batchSubscribeTopicsLimit",500),Ob(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0})),Ob(this,"subscribe",(async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=yd(t),i={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,i);const n=await this.rpcSubscribe(e,r,t);return"string"==typeof n&&(this.onSubscribe(n,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}})),Ob(this,"unsubscribe",(async(e,t)=>{this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)})),Ob(this,"isSubscribed",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e))})))),Ob(this,"isKnownTopic",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some((t=>t.topic===e)))})))),Ob(this,"on",((e,t)=>{this.events.on(e,t)})),Ob(this,"once",((e,t)=>{this.events.once(e,t)})),Ob(this,"off",((e,t)=>{this.events.off(e,t)})),Ob(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),Ob(this,"start",(async()=>{await this.onConnect()})),Ob(this,"stop",(async()=>{await this.onDisconnect()})),Ob(this,"restart",(async()=>{await this.restore(),await this.onRestart()})),Ob(this,"checkPending",(async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)})),Ob(this,"registerEventListeners",(()=>{this.relayer.core.heartbeat.on(Z,(async()=>{await this.checkPending()})),this.events.on(rf,(async e=>{const t=rf;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(nf,(async e=>{const t=nf;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))})),this.relayer=e,this.logger=et(t,this.name),this.clientId=""}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const i=yd(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);const n=Md("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var i;(!r||r?.transportType===Zl.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const n={method:md(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});const s=null==(i=r?.internal)?void 0:i.throwOnFailedPublish;try{const t=await this.getSubscriptionId(e);if(r?.transportType===Zl.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch((e=>this.logger.warn(e)))}),(0,Y.toMiliseconds)(Y.ONE_SECOND)),t;const i=new Promise((async t=>{const r=i=>{i.topic===e&&(this.events.removeListener(rf,r),t(i.id))};this.events.on(rf,r);try{const i=await bc(new Promise(((e,t)=>{this.relayer.request(n).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(rf,r),t(i)}catch{}})),o=await bc(i,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw new Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Kl),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:md(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await bc(new Promise((e=>{this.relayer.request(t).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Kl)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t={method:md(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let r;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{r=await await bc(new Promise(((e,r)=>{this.relayer.request(t).catch((e=>{this.logger.warn(e),r(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Kl)}return r}rpcUnsubscribe(e,t,r){const i={method:md(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,xb(Ib({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,Ib({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Ib({},t)),this.topicMap.set(t.topic,e),this.events.emit(rf,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=Pd("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(nf,xb(Ib({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(sf)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(of)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=Pd("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map((async e=>xb(Ib({},e),{id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await function(e){return new Promise((t=>setTimeout(t,e)))}((0,Y.toMiliseconds)(Y.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return cd(e+await this.getClientId())}}var Pb=Object.defineProperty,Mb=Object.getOwnPropertySymbols,kb=Object.prototype.hasOwnProperty,Tb=Object.prototype.propertyIsEnumerable,Rb=(e,t,r)=>t in e?Pb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cb=(e,t)=>{for(var r in t||(t={}))kb.call(t,r)&&Rb(e,r,t[r]);if(Mb)for(var r of Mb(t))Tb.call(t,r)&&Rb(e,r,t[r]);return e},Nb=(e,t,r)=>Rb(e,"symbol"!=typeof t?t+"":t,r);class Lb extends ut{constructor(e){super(e),Nb(this,"protocol","wc"),Nb(this,"version",2),Nb(this,"core"),Nb(this,"logger"),Nb(this,"events",new H.EventEmitter),Nb(this,"provider"),Nb(this,"messages"),Nb(this,"subscriber"),Nb(this,"publisher"),Nb(this,"name","relayer"),Nb(this,"transportExplicitlyClosed",!1),Nb(this,"initialized",!1),Nb(this,"connectionAttemptInProgress",!1),Nb(this,"relayUrl"),Nb(this,"projectId"),Nb(this,"packageName"),Nb(this,"bundleId"),Nb(this,"hasExperiencedNetworkDisruption",!1),Nb(this,"pingTimeout"),Nb(this,"heartBeatTimeout",(0,Y.toMiliseconds)(Y.THIRTY_SECONDS+Y.FIVE_SECONDS)),Nb(this,"reconnectTimeout"),Nb(this,"connectPromise"),Nb(this,"reconnectInProgress",!1),Nb(this,"requestsInFlight",[]),Nb(this,"connectTimeout",(0,Y.toMiliseconds)(15*Y.ONE_SECOND)),Nb(this,"request",(async e=>{var t,r;this.logger.debug("Publishing Request Payload");const i=e.id||ll().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const n=`${i}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(n);const s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==n)),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${i}`),e}})),Nb(this,"resetPingTimeout",(()=>{nc()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,r,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(i=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||i.call(r)}catch(e){this.logger.warn(e,e?.message)}}),this.heartBeatTimeout))})),Nb(this,"onPayloadHandler",(e=>{this.onProviderPayload(e),this.resetPingTimeout()})),Nb(this,"onConnectHandler",(()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit($l)})),Nb(this,"onDisconnectHandler",(()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()})),Nb(this,"onProviderErrorHandler",(e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(Fl,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()})),Nb(this,"registerProviderListeners",(()=>{this.provider.on(Wl,this.onPayloadHandler),this.provider.on(Yl,this.onConnectHandler),this.provider.on(Gl,this.onDisconnectHandler),this.provider.on(Jl,this.onProviderErrorHandler)})),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?et(e.logger,this.name):Le()(Ze({level:e.logger||"error"})),this.messages=new rb(this.logger,e.core),this.subscriber=new Ab(this,this.logger),this.publisher=new fb(this,this.logger),this.relayUrl=e?.relayUrl||zl,this.projectId=e.projectId,sc()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"&&"android"===(null==i.g?void 0:i.g.Platform.OS)?this.packageName=cc():sc()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"&&"ios"===(null==i.g?void 0:i.g.Platform.OS)&&(this.bundleId=cc()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return Qe(this.logger)}get connected(){var e,t,r;return 1===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||!1}get connecting(){var e,t,r;return 0===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||void 0!==this.connectPromise||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Zl.relay},ef)}async subscribe(e,t){var r,i,n;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish);let o,a=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(rf,c),o())};return await Promise.all([new Promise((e=>{o=e,this.subscriber.on(rf,c)})),new Promise((async(r,i)=>{a=await this.subscriber.subscribe(e,Cb({internal:{throwOnFailedPublish:s}},t)).catch((e=>{s&&i(e)}))||a,r()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await bc(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,r)=>{await this.connect(e).then(t).catch(r).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.warn("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Yd())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const e of t)try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const e={topic:r,expiry:vc(Y.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,e)}this.events.emit(ql,e),await this.recordMessageEvent(e,Ql)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Gl,r),await bc(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(Gl,r),clearTimeout(this.reconnectTimeout)})),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Gl,r),await this.subscriber.start().then(e).catch(t).finally((()=>{this.provider.off(Gl,r)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(e){await this.subscriber.stop();const t=e;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,Y.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,r,i,n;if(nc())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(n=null==(i=null==(r=this.provider)?void 0:r.connection)?void 0:i.socket)||n.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Al(new kl(dc({sdkVersion:Xl,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Sl(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:r,message:i,publishedAt:n,attestation:s}=t.data,o={topic:r,message:i,publishedAt:n,transportType:Zl.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Cb({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Il(e)&&this.events.emit(Bl,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Ql),this.events.emit(ql,e))}async acknowledgePayload(e){const t=pl(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Wl,this.onPayloadHandler),this.provider.off(Yl,this.onConnectHandler),this.provider.off(Gl,this.onDisconnectHandler),this.provider.off(Jl,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Yd();Gd((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Vl),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e,e?.message))),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,Y.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function jb(){}function Ub(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function Db(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function zb(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const qb="[object Arguments]",Bb="[object Object]";function $b(e,t,r,i,n,s,o){const a=o(e,t,r,i,n,s);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return Vb(e,t,s,o)}return Vb(e,t,s,o)}function Vb(e,t,r,i){if(Object.is(e,t))return!0;let n=zb(e),s=zb(t);if(n===qb&&(n=Bb),s===qb&&(s=Bb),n!==s)return!1;switch(n){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}const o=(r=r??new Map).get(e),a=r.get(t);if(null!=o&&null!=a)return o===t;r.set(e,t),r.set(t,e);try{switch(n){case"[object Map]":if(e.size!==t.size)return!1;for(const[n,s]of e.entries())if(!t.has(n)||!$b(s,t.get(n),n,e,t,r,i))return!1;return!0;case"[object Set]":{if(e.size!==t.size)return!1;const n=Array.from(e.values()),s=Array.from(t.values());for(let o=0;o<n.length;o++){const a=n[o],c=s.findIndex((n=>$b(a,n,void 0,e,t,r,i)));if(-1===c)return!1;s.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Tl<"u"&&Tl.isBuffer(e)!==Tl.isBuffer(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!$b(e[n],t[n],n,e,t,r,i))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&Vb(new Uint8Array(e),new Uint8Array(t),r,i);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&Vb(new Uint8Array(e),new Uint8Array(t),r,i);case"[object Error]":return e.name===t.name&&e.message===t.message;case Bb:{if(!(Vb(e.constructor,t.constructor,r,i)||Ub(e)&&Ub(t)))return!1;const n=[...Object.keys(e),...Db(e)],s=[...Object.keys(t),...Db(t)];if(n.length!==s.length)return!1;for(let s=0;s<n.length;s++){const o=n[s],a=e[o];if(!Object.hasOwn(t,o))return!1;if(!$b(a,t[o],o,e,t,r,i))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}function Fb(e,t){return function(e,t,r){return $b(e,t,void 0,void 0,void 0,void 0,r)}(e,t,jb)}var Kb=Object.defineProperty,Hb=Object.getOwnPropertySymbols,Wb=Object.prototype.hasOwnProperty,Yb=Object.prototype.propertyIsEnumerable,Gb=(e,t,r)=>t in e?Kb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jb=(e,t)=>{for(var r in t||(t={}))Wb.call(t,r)&&Gb(e,r,t[r]);if(Hb)for(var r of Hb(t))Yb.call(t,r)&&Gb(e,r,t[r]);return e},Xb=(e,t,r)=>Gb(e,"symbol"!=typeof t?t+"":t,r);class Zb extends dt{constructor(e,t,r,i=Cl,n=void 0){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,Xb(this,"map",new Map),Xb(this,"version","0.3"),Xb(this,"cached",[]),Xb(this,"initialized",!1),Xb(this,"getKey"),Xb(this,"storagePrefix",Cl),Xb(this,"recentlyDeleted",[]),Xb(this,"recentlyDeletedLimit",200),Xb(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!Rd(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)})),Xb(this,"set",(async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())})),Xb(this,"get",(e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)))),Xb(this,"getAll",(e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>Fb(t[r],e[r]))))):this.values))),Xb(this,"update",(async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=Jb(Jb({},this.getData(e)),t);this.map.set(e,r),await this.persist()})),Xb(this,"delete",(async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())})),this.logger=et(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=Pd("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=Pd("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=Pd("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Qb=Object.defineProperty,ey=(e,t,r)=>((e,t,r)=>t in e?Qb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ty{constructor(e,t){this.core=e,this.logger=t,ey(this,"name","pairing"),ey(this,"version","0.3"),ey(this,"events",new(W())),ey(this,"pairings"),ey(this,"initialized",!1),ey(this,"storagePrefix",Cl),ey(this,"ignoredPayloadTypes",[1]),ey(this,"registeredMethods",[]),ey(this,"init",(async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),ey(this,"register",(({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]})),ey(this,"create",(async e=>{this.isInitialized();const t=od(),r=await this.core.crypto.setSymKey(t),i=vc(Y.FIVE_MINUTES),n={protocol:"irn"},s={topic:r,expiry:i,relay:n,active:!1,methods:e?.methods},o=Ed({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i,methods:e?.methods});return this.events.emit(cf,s),this.core.expirer.set(r,i),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}})),ey(this,"pair",(async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[If]}});this.isValidPair(e,t);const{topic:r,symKey:i,relay:n,expiryTimestamp:s,methods:o}=wd(e.uri);let a;if(t.props.properties.topic=r,t.addTrace(xf),t.addTrace(Of),this.pairings.keys.includes(r)){if(a=this.pairings.get(r),t.addTrace(kf),a.active)throw t.setError(jf),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace(Tf)}const c=s||vc(Y.FIVE_MINUTES),h={topic:r,relay:n,expiry:c,active:!1,methods:o};this.core.expirer.set(r,c),await this.pairings.set(r,h),t.addTrace(Af),e.activatePairing&&await this.activate({topic:r}),this.events.emit(cf,h),t.addTrace(Rf),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(i,r),t.addTrace(Pf);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError(Nf)}try{await this.core.relayer.subscribe(r,{relay:n})}catch(e){throw t.setError(Uf),e}return t.addTrace(Mf),h})),ey(this,"activate",(async({topic:e})=>{this.isInitialized();const t=vc(Y.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})})),ey(this,"ping",(async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=gc();this.events.once(_c("pairing_ping",e),(({error:e})=>{e?n(e):i()})),await r()}})),ey(this,"updateExpiry",(async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})})),ey(this,"updateMetadata",(async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})})),ey(this,"getPairings",(()=>(this.isInitialized(),this.pairings.values))),ey(this,"disconnect",(async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",Md("USER_DISCONNECTED")),await this.deletePairing(t))})),ey(this,"formatUriFromPairing",(e=>{this.isInitialized();const{topic:t,relay:r,expiry:i,methods:n}=e,s=this.core.crypto.keychain.get(t);return Ed({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:i,methods:n})})),ey(this,"sendRequest",(async(e,t,r)=>{const i=fl(t,r),n=await this.core.crypto.encode(e,i),s=af[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id})),ey(this,"sendResult",(async(e,t,r)=>{const i=pl(e,r),n=await this.core.crypto.encode(t,i),s=(await this.core.history.get(t,e)).request.method,o=af[s].res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)})),ey(this,"sendError",(async(e,t,r)=>{const i=gl(e,r),n=await this.core.crypto.encode(t,i),s=(await this.core.history.get(t,e)).request.method,o=af[s]?af[s].res:af.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)})),ey(this,"deletePairing",(async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,Md("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])})),ey(this,"cleanup",(async()=>{const e=this.pairings.getAll().filter((e=>wc(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))})),ey(this,"onRelayEventRequest",(async e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}})),ey(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)})),ey(this,"onPairingPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(df,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),ey(this,"onPairingPingResponse",((e,t)=>{const{id:r}=t;setTimeout((()=>{xl(t)?this.events.emit(_c("pairing_ping",r),{}):Ol(t)&&this.events.emit(_c("pairing_ping",r),{error:t.error})}),500)})),ey(this,"onPairingDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(uf,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),ey(this,"onUnknownRpcMethodRequest",(async(e,t)=>{const{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;const t=Md("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),ey(this,"onUnknownRpcMethodResponse",(e=>{this.registeredMethods.includes(e)||this.logger.error(Md("WC_METHOD_UNSUPPORTED",e))})),ey(this,"isValidPair",((e,t)=>{var r;if(!$d(e)){const{message:r}=Pd("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(Lf),new Error(r)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(Cd(e,!1))return!!t(e)||t(Ac(e))}catch{}return!1}(e.uri)){const{message:r}=Pd("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(Lf),new Error(r)}const i=wd(e?.uri);if(null==(r=i?.relay)||!r.protocol){const{message:e}=Pd("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(Lf),new Error(e)}if(null==i||!i.symKey){const{message:e}=Pd("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(Lf),new Error(e)}if(null!=i&&i.expiryTimestamp&&(0,Y.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError(Df);const{message:e}=Pd("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}})),ey(this,"isValidPing",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),ey(this,"isValidDisconnect",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),ey(this,"isValidPairingTopic",(async e=>{if(!Cd(e,!1)){const{message:t}=Pd("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=Pd("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(wc(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=Pd("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}})),this.core=e,this.logger=et(t,this.name),this.pairings=new Zb(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ql,(async e=>{const{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==Zl.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const e=await this.core.crypto.decode(t,r);Sl(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):Il(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(mf,(async e=>{const{topic:t}=mc(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(hf,{topic:t}))}))}}var ry=Object.defineProperty,iy=(e,t,r)=>((e,t,r)=>t in e?ry(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ny extends at{constructor(e,t){super(e,t),this.core=e,this.logger=t,iy(this,"records",new Map),iy(this,"events",new H.EventEmitter),iy(this,"name","history"),iy(this,"version","0.3"),iy(this,"cached",[]),iy(this,"initialized",!1),iy(this,"storagePrefix",Cl),iy(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),iy(this,"set",((e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:vc(Y.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(lf,i)})),iy(this,"resolve",(async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=Ol(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(ff,t))})),iy(this,"get",(async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)))),iy(this,"delete",((e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit(pf,r)}})),this.persist()})),iy(this,"exists",(async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e))),iy(this,"on",((e,t)=>{this.events.on(e,t)})),iy(this,"once",((e,t)=>{this.events.once(e,t)})),iy(this,"off",((e,t)=>{this.events.off(e,t)})),iy(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=et(t,this.name)}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:fl(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=Pd("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(gf)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=Pd("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(lf,(e=>{const t=lf;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(ff,(e=>{const t=ff;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(pf,(e=>{const t=pf;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(Z,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,Y.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(pf,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sy=Object.defineProperty,oy=(e,t,r)=>((e,t,r)=>t in e?sy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ay extends ft{constructor(e,t){super(e,t),this.core=e,this.logger=t,oy(this,"expirations",new Map),oy(this,"events",new H.EventEmitter),oy(this,"name","expirer"),oy(this,"version","0.3"),oy(this,"cached",[]),oy(this,"initialized",!1),oy(this,"storagePrefix",Cl),oy(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),oy(this,"has",(e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}})),oy(this,"set",((e,t)=>{this.isInitialized();const r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(bf,{target:r,expiration:i})})),oy(this,"get",(e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)})),oy(this,"del",(e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(yf,{target:t,expiration:r})}})),oy(this,"on",((e,t)=>{this.events.on(e,t)})),oy(this,"once",((e,t)=>{this.events.once(e,t)})),oy(this,"off",((e,t)=>{this.events.off(e,t)})),oy(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=et(t,this.name)}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return yc("topic",e)}(e);if("number"==typeof e)return function(e){return yc("id",e)}(e);const{message:t}=Pd("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(vf)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=Pd("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=Pd("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,Y.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(mf,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(Z,(()=>this.checkExpirations())),this.events.on(bf,(e=>{const t=bf;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(mf,(e=>{const t=mf;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(yf,(e=>{const t=yf;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}}var cy=Object.defineProperty,hy=(e,t,r)=>((e,t,r)=>t in e?cy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class uy extends pt{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,hy(this,"name","verify-api"),hy(this,"abortController"),hy(this,"isDevEnv"),hy(this,"verifyUrlV3",Ef),hy(this,"storagePrefix",Cl),hy(this,"version",2),hy(this,"publicKey"),hy(this,"fetchPromise"),hy(this,"init",(async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,Y.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))})),hy(this,"register",(async e=>{if(!oc()||this.isDevEnv)return;const t=window.location.origin,{id:r,decryptedId:i}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${i}`;try{const e=(0,as.getDocument)(),t=this.startAbortTimer(5*Y.ONE_SECOND),i=await new Promise(((i,s)=>{const o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);const a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});const c=n=>{if(n.data&&"string"==typeof n.data)try{const s=JSON.parse(n.data);if("verify_attestation"===s.type){if(Kn(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),i(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",i),i}catch(e){this.logger.warn(e)}return""})),hy(this,"resolve",(async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:r,encryptedId:i}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(Kn(t).payload.id!==i)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;const n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)})),hy(this,"fetchAttestation",(async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(5*Y.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0})),hy(this,"getVerifyUrl",(e=>{let t=e||_f;return Sf.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${_f}`),t=_f),t})),hy(this,"fetchPublicKey",(async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(Y.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}})),hy(this,"persistPublicKey",(async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e})),hy(this,"removePublicKey",(async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0})),hy(this,"isValidJwtAttestation",(async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}const r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}})),hy(this,"getPublicKey",(async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey())),hy(this,"fetchAndPersistPublicKey",(async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e})),hy(this,"validateAttestation",((e,t)=>{const r=bd(e,t.publicKey),i={hasExpired:(0,Y.toMiliseconds)(r.exp)<Date.now(),payload:r};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}})),this.logger=et(t,this.name),this.abortController=new AbortController,this.isDevEnv=Oc(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Qe(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,Y.toMiliseconds)(e))}}var dy=Object.defineProperty,ly=(e,t,r)=>((e,t,r)=>t in e?dy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class fy extends gt{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,ly(this,"context","echo"),ly(this,"registerDeviceToken",(async e=>{const{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})})),this.logger=et(t,this.context)}}var py=Object.defineProperty,gy=Object.getOwnPropertySymbols,by=Object.prototype.hasOwnProperty,yy=Object.prototype.propertyIsEnumerable,my=(e,t,r)=>t in e?py(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vy=(e,t)=>{for(var r in t||(t={}))by.call(t,r)&&my(e,r,t[r]);if(gy)for(var r of gy(t))yy.call(t,r)&&my(e,r,t[r]);return e},wy=(e,t,r)=>my(e,"symbol"!=typeof t?t+"":t,r);class _y extends bt{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,wy(this,"context","event-client"),wy(this,"storagePrefix",Cl),wy(this,"storageVersion",.1),wy(this,"events",new Map),wy(this,"shouldPersist",!1),wy(this,"init",(async()=>{if(!Oc())try{const e={eventId:xc(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:uc(this.core.relayer.protocol,this.core.relayer.version,Xl)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}})),wy(this,"createEvent",(e=>{const{event:t="ERROR",type:r="",properties:{topic:i,trace:n}}=e,s=xc(),o=this.core.projectId||"",a=Date.now(),c=vy({eventId:s,timestamp:a,props:{event:t,type:r,properties:{topic:i,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,c),this.shouldPersist=!0),c})),wy(this,"getEvent",(e=>{const{eventId:t,topic:r}=e;if(t)return this.events.get(t);const i=Array.from(this.events.values()).find((e=>e.props.properties.topic===r));return i?vy(vy({},i),this.setMethods(i.eventId)):void 0})),wy(this,"deleteEvent",(e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0})),wy(this,"setEventListeners",(()=>{this.core.heartbeat.on(Z,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,Y.fromMiliseconds)(Date.now())-(0,Y.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))})),wy(this,"setMethods",(e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}))),wy(this,"addTrace",((e,t)=>{const r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)})),wy(this,"setError",((e,t)=>{const r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)})),wy(this,"persist",(async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),wy(this,"restore",(async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,vy(vy({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}})),wy(this,"submit",(async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}})),wy(this,"sendEvent",(async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Xl}${t}`,{method:"POST",body:JSON.stringify(e)})})),wy(this,"getAppDomain",(()=>hc().url)),this.logger=et(t,this.context),this.telemetryEnabled=r,r?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Ey=Object.defineProperty,Sy=Object.getOwnPropertySymbols,Iy=Object.prototype.hasOwnProperty,xy=Object.prototype.propertyIsEnumerable,Oy=(e,t,r)=>t in e?Ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ay=(e,t)=>{for(var r in t||(t={}))Iy.call(t,r)&&Oy(e,r,t[r]);if(Sy)for(var r of Sy(t))xy.call(t,r)&&Oy(e,r,t[r]);return e},Py=(e,t,r)=>Oy(e,"symbol"!=typeof t?t+"":t,r);class My extends nt{constructor(e){var t;super(e),Py(this,"protocol","wc"),Py(this,"version",2),Py(this,"name",Rl),Py(this,"relayUrl"),Py(this,"projectId"),Py(this,"customStoragePrefix"),Py(this,"events",new H.EventEmitter),Py(this,"logger"),Py(this,"heartbeat"),Py(this,"relayer"),Py(this,"crypto"),Py(this,"storage"),Py(this,"history"),Py(this,"expirer"),Py(this,"pairing"),Py(this,"verify"),Py(this,"echoClient"),Py(this,"linkModeSupportedApps"),Py(this,"eventClient"),Py(this,"initialized",!1),Py(this,"logChunkController"),Py(this,"on",((e,t)=>this.events.on(e,t))),Py(this,"once",((e,t)=>this.events.once(e,t))),Py(this,"off",((e,t)=>this.events.off(e,t))),Py(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),Py(this,"dispatchEnvelope",(({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;const i={topic:e,message:t,publishedAt:Date.now(),transportType:Zl.link_mode};this.relayer.onLinkMessageEvent(i,{sessionExists:r})})),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||zl,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=Ze({level:"string"==typeof e?.logger&&e.logger?e.logger:Nl,name:Rl}),{logger:i,chunkLoggerController:n}=tt({opts:r,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=n,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=et(i,this.name),this.heartbeat=new Q,this.crypto=new Wg(this,this.logger,e?.keychain),this.history=new ny(this,this.logger),this.expirer=new ay(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Ce(Ay(Ay({},Ll),e?.storageOptions)),this.relayer=new Lb({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new ty(this,this.logger),this.verify=new uy(this,this.logger,this.storage),this.echoClient=new fy(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new _y(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new My(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return Qe(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(tf,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(tf)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const ky=My,Ty="client",Ry=`wc@2:${Ty}:`,Cy=Ty,Ny="error",Ly="WALLETCONNECT_DEEPLINK_CHOICE",jy="Proposal expired",Uy=Y.SEVEN_DAYS,Dy={wc_sessionPropose:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Y.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Y.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1119}}},zy={min:Y.FIVE_MINUTES,max:Y.SEVEN_DAYS},qy="IDLE",By="ACTIVE",$y={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},Vy=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Fy="wc@1.5:auth:",Ky=`${Fy}:PUB_KEY`;var Hy=Object.defineProperty,Wy=Object.defineProperties,Yy=Object.getOwnPropertyDescriptors,Gy=Object.getOwnPropertySymbols,Jy=Object.prototype.hasOwnProperty,Xy=Object.prototype.propertyIsEnumerable,Zy=(e,t,r)=>t in e?Hy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qy=(e,t)=>{for(var r in t||(t={}))Jy.call(t,r)&&Zy(e,r,t[r]);if(Gy)for(var r of Gy(t))Xy.call(t,r)&&Zy(e,r,t[r]);return e},em=(e,t)=>Wy(e,Yy(t)),tm=(e,t,r)=>Zy(e,"symbol"!=typeof t?t+"":t,r);class rm extends wt{constructor(e){super(e),tm(this,"name","engine"),tm(this,"events",new(W())),tm(this,"initialized",!1),tm(this,"requestQueue",{state:qy,queue:[]}),tm(this,"sessionRequestQueue",{state:qy,queue:[]}),tm(this,"requestQueueDelay",Y.ONE_SECOND),tm(this,"expectedPairingMethodMap",new Map),tm(this,"recentlyDeletedMap",new Map),tm(this,"recentlyDeletedLimit",200),tm(this,"relayMessageCache",[]),tm(this,"pendingSessions",new Map),tm(this,"init",(async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Dy)}),this.initialized=!0,setTimeout((async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,Y.toMiliseconds)(this.requestQueueDelay)))})),tm(this,"connect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=em(Qy({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:o,relays:a}=t;let c,h=r,u=!1;try{if(h){const e=this.client.core.pairing.pairings.get(h);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),u=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${h}) failed`),e}if(!h||!u){const{topic:e,uri:t}=await this.client.core.pairing.create();h=e,c=t}if(!h){const{message:e}=Pd("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(e)}const d=await this.client.core.crypto.generateKeyPair(),l=Dy.wc_sessionPropose.req.ttl||Y.FIVE_MINUTES,f=vc(l),p=em(Qy(Qy({requiredNamespaces:i,optionalNamespaces:n,relays:a??[{protocol:"irn"}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:h},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:dl()}),g=_c("session_connect",p.id),{reject:b,resolve:y,done:m}=gc(l,jy),v=({id:e})=>{e===p.id&&(this.client.events.off("proposal_expire",v),this.pendingSessions.delete(p.id),this.events.emit(g,{error:{message:jy,code:0}}))};return this.client.events.on("proposal_expire",v),this.events.once(g,(({error:e,session:t})=>{this.client.events.off("proposal_expire",v),e?b(e):t&&y(t)})),await this.sendRequest({topic:h,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:c,approval:m}})),tm(this,"pair",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}})),tm(this,"approve",(async e=>{var t,r,i;const n=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[qf]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw n.setError(Gf),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),n.setError(tp),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),n.setError(ep),e}const{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,scopedProperties:h,sessionConfig:u}=e,d=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:n.eventId});const{pairingTopic:l,proposer:f,requiredNamespaces:p,optionalNamespaces:g}=d;let b=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:l});b||(b=null==(i=this.client.core.eventClient)?void 0:i.createEvent({type:qf,properties:{topic:l,trace:[qf,Bf]}}));const y=await this.client.core.crypto.generateKeyPair(),m=f.publicKey,v=await this.client.core.crypto.generateSharedKey(y,m),w=Qy(Qy(Qy({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:vc(Uy)},c&&{sessionProperties:c}),h&&{scopedProperties:h}),u&&{sessionConfig:u}),_=Zl.relay;b.addTrace($f);try{await this.client.core.relayer.subscribe(v,{transportType:_})}catch(e){throw b.setError(Xf),e}b.addTrace(Vf);const E=em(Qy({},w),{topic:v,requiredNamespaces:p,optionalNamespaces:g,pairingTopic:l,acknowledged:!1,self:w.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:y,transportType:Zl.relay});await this.client.session.set(v,E),b.addTrace(Hf);try{b.addTrace(Wf),await this.sendRequest({topic:v,method:"wc_sessionSettle",params:w,throwOnFailedPublish:!0}).catch((e=>{throw b?.setError(Qf),e})),b.addTrace(Yf),b.addTrace(Ff),await this.sendResult({id:s,topic:l,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch((e=>{throw b?.setError(Zf),e})),b.addTrace(Kf)}catch(e){throw this.client.logger.error(e),this.client.session.delete(v,Md("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(v),e}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:l,metadata:f.metadata}),await this.client.proposal.delete(s,Md("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}),await this.setExpiry(v,vc(Uy)),{topic:v,acknowledged:()=>Promise.resolve(this.client.session.get(v))}})),tm(this,"reject",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}const{id:t,reason:r}=e;let i;try{i=this.client.proposal.get(t).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),e}i&&(await this.sendError({id:t,topic:i,error:r,rpcOpts:Dy.wc_sessionPropose.reject}),await this.client.proposal.delete(t,Md("USER_DISCONNECTED")))})),tm(this,"update",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}const{topic:t,namespaces:r}=e,{done:i,resolve:n,reject:s}=gc(),o=dl(),a=ll().toString(),c=this.client.session.get(t).namespaces;return this.events.once(_c("session_update",o),(({error:e})=>{e?s(e):n()})),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)})),{acknowledged:i}})),tm(this,"extend",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}const{topic:t}=e,r=dl(),{done:i,resolve:n,reject:s}=gc();return this.events.once(_c("session_extend",r),(({error:e})=>{e?s(e):n()})),await this.setExpiry(t,vc(Uy)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch((e=>{s(e)})),{acknowledged:i}})),tm(this,"request",(async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}const{chainId:t,request:r,topic:i,expiry:n=Dy.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===Zl.relay&&await this.confirmOnlineStateOrThrow();const o=dl(),a=ll().toString(),{done:c,resolve:h,reject:u}=gc(n,"Request expired. Please try again.");this.events.once(_c("session_request",o),(({error:e,result:t})=>{e?u(e):h(t)}));const d="wc_sessionRequest",l=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(l)return await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:d,params:{request:em(Qy({},r),{expiryTimestamp:vc(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0,appLink:l}).catch((e=>u(e))),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),await c();const f={request:em(Qy({},r),{expiryTimestamp:vc(n)}),chainId:t},p=this.shouldSetTVF(d,f);return await Promise.all([new Promise((async e=>{await this.sendRequest(Qy({clientRpcId:o,relayRpcId:a,topic:i,method:d,params:f,expiry:n,throwOnFailedPublish:!0},p&&{tvf:this.getTVFParams(o,f)})).catch((e=>u(e))),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),e()})),new Promise((async e=>{var t;if(null==(t=s.sessionConfig)||!t.disableDeepLink){const e=await async function(e,t){let r="";try{if(oc()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}(this.client.core.storage,Ly);await Sc({id:o,topic:i,wcDeepLink:e})}e()})),c()]).then((e=>e[2]))})),tm(this,"respond",(async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:i}=r,n=this.client.session.get(t);n.transportType===Zl.relay&&await this.confirmOnlineStateOrThrow();const s=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);xl(r)?await this.sendResult({id:i,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):Ol(r)&&await this.sendError({id:i,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)})),tm(this,"ping",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=dl(),r=ll().toString(),{done:i,resolve:n,reject:s}=gc();this.events.once(_c("session_ping",e),(({error:e})=>{e?s(e):n()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),i()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))})),tm(this,"emit",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:r,chainId:i}=e,n=ll().toString(),s=dl();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:i},throwOnFailedPublish:!0,relayRpcId:n,clientRpcId:s})})),tm(this,"disconnect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:Md("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=Pd("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}})),tm(this,"find",(e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r);let s=!0;return!!lc(n,i)&&(i.forEach((t=>{const{accounts:i,methods:n,events:o}=e.namespaces[t],a=Id(i),c=r[t];lc(Za(t,c),a)&&lc(c.methods,n)&&lc(c.events,o)||(s=!1)})),s)}(t,e)))))),tm(this,"getPendingSessionRequests",(()=>this.client.pendingRequest.getAll())),tm(this,"authenticate",(async(e,t)=>{var r;this.isInitialized(),this.isValidAuthenticate(e);const i=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),n=i?Zl.link_mode:Zl.relay;n===Zl.relay&&await this.confirmOnlineStateOrThrow();const{chains:s,statement:o="",uri:a,domain:c,nonce:h,type:u,exp:d,nbf:l,methods:f=[],expiry:p}=e,g=[...e.resources||[]],{topic:b,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:n});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:y}});const m=await this.client.core.crypto.generateKeyPair(),v=ad(m);if(await Promise.all([this.client.auth.authKeys.set(Ky,{responseTopic:v,publicKey:m}),this.client.auth.pairingTopics.set(v,{topic:v,pairingTopic:b})]),await this.client.core.relayer.subscribe(v,{transportType:n}),this.client.logger.info(`sending request to new pairing topic: ${b}`),f.length>0){const{namespace:e}=Xa(s[0]);let t=Mh(e,"request",f);Lh(g)&&(t=Th(t,g.pop())),g.push(t)}const w=p&&p>Dy.wc_sessionAuthenticate.req.ttl?p:Dy.wc_sessionAuthenticate.req.ttl,_={authPayload:{type:u??"caip122",chains:s,statement:o,aud:a,domain:c,version:"1",nonce:h,iat:(new Date).toISOString(),exp:d,nbf:l,resources:g},requester:{publicKey:m,metadata:this.client.metadata},expiryTimestamp:vc(w)},E={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:s,methods:[...new Set(["personal_sign",...f])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:m,metadata:this.client.metadata},expiryTimestamp:vc(Dy.wc_sessionPropose.req.ttl),id:dl()},{done:S,resolve:I,reject:x}=gc(w,"Request expired"),O=dl(),A=_c("session_connect",E.id),P=_c("session_request",O),M=async({error:e,session:t})=>{this.events.off(P,k),e?x(e):t&&I({session:t})},k=async e=>{var r,i,s;if(await this.deletePendingAuthRequest(O,{message:"fulfilled",code:0}),e.error){const t=Md("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(A,M),x(e.error.message))}await this.deleteProposal(E.id),this.events.off(A,M);const{cacaos:o,responder:a}=e.result,c=[],h=[];for(const e of o){await Sh({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),x(Md("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:t}=e,r=Lh(t.resources),i=[_h(t.iss)],n=Eh(t.iss);if(r){const e=Ch(r),t=Nh(r);c.push(...e),i.push(...t)}for(const e of i)h.push(`${e}:${n}`)}const u=await this.client.core.crypto.generateSharedKey(m,a.publicKey);let d;c.length>0&&(d={topic:u,acknowledged:!0,self:{publicKey:m,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:vc(Uy),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:xd([...new Set(c)],[...new Set(h)]),transportType:n},await this.client.core.relayer.subscribe(u,{transportType:n}),await this.client.session.set(u,d),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:a.metadata}),d=this.client.session.get(u)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(i=a.metadata.redirect)&&i.linkMode&&null!=(s=a.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(u,{transportType:Zl.link_mode})),I({auths:o,session:d})};let T;this.events.once(A,M),this.events.once(P,k);try{if(i){const e=fl("wc_sessionAuthenticate",_,O);this.client.core.history.set(b,e);const r=await this.client.core.crypto.encode("",e,{type:2,encoding:nd});T=Sd(t,b,r)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:_,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:O}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:E,expiry:Dy.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:E.id})])}catch(e){throw this.events.off(A,M),this.events.off(P,k),e}return await this.setProposal(E.id,E),await this.setAuthRequest(O,{request:em(Qy({},_),{verifyContext:{}}),pairingTopic:b,transportType:n}),{uri:T??y,response:S}})),tm(this,"approveSessionAuthenticate",(async e=>{const{id:t,auths:r}=e,i=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:[rp]}});try{this.isInitialized()}catch(e){throw i.setError(hp),e}const n=this.getPendingAuthRequest(t);if(!n)throw i.setError(fp),new Error(`Could not find pending auth request with id ${t}`);const s=n.transportType||Zl.relay;s===Zl.relay&&await this.confirmOnlineStateOrThrow();const o=n.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=ad(o),h={type:1,receiverPublicKey:o,senderPublicKey:a},u=[],d=[];for(const e of r){if(!await Sh({cacao:e,projectId:this.client.core.projectId})){i.setError(up);const e=Md("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:h}),new Error(e.message)}i.addTrace(np);const{p:r}=e,n=Lh(r.resources),s=[_h(r.iss)],o=Eh(r.iss);if(n){const e=Ch(n),t=Nh(n);u.push(...e),s.push(...t)}for(const e of s)d.push(`${e}:${o}`)}const l=await this.client.core.crypto.generateSharedKey(a,o);let f;if(i.addTrace(ip),u?.length>0){f={topic:l,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:n.requester.metadata},controller:o,expiry:vc(Uy),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:n.pairingTopic,namespaces:xd([...new Set(u)],[...new Set(d)]),transportType:s},i.addTrace(op);try{await this.client.core.relayer.subscribe(l,{transportType:s})}catch(e){throw i.setError(dp),e}i.addTrace(ap),await this.client.session.set(l,f),i.addTrace(sp),await this.client.core.pairing.updateMetadata({topic:n.pairingTopic,metadata:n.requester.metadata})}i.addTrace(cp);try{await this.sendResult({topic:c,id:t,result:{cacaos:r,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(n.requester.metadata,s)})}catch(e){throw i.setError(lp),e}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:n.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:f}})),tm(this,"rejectSessionAuthenticate",(async e=>{this.isInitialized();const{id:t,reason:r}=e,i=this.getPendingAuthRequest(t);if(!i)throw new Error(`Could not find pending auth request with id ${t}`);i.transportType===Zl.relay&&await this.confirmOnlineStateOrThrow();const n=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=ad(n),a={type:1,receiverPublicKey:n,senderPublicKey:s};await this.sendError({id:t,topic:o,error:r,encodeOpts:a,rpcOpts:Dy.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,Md("USER_DISCONNECTED"))})),tm(this,"formatAuthMessage",(e=>{this.isInitialized();const{request:t,iss:r}=e;return Ih(t,r)})),tm(this,"processRelayMessageCache",(()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)})),tm(this,"cleanupDuplicatePairings",(async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var i,n;return(null==(i=r.peerMetadata)?void 0:i.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}})),tm(this,"deleteSession",(async e=>{var t;const{topic:r,expirerHasDeleted:i=!1,emitEvent:n=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,Md("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Ly).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,Md("USER_DISCONNECTED"))})),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=qy),n&&this.client.events.emit("session_delete",{id:s,topic:r})})),tm(this,"deleteProposal",(async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError(Jf)}catch{}await Promise.all([this.client.proposal.delete(e,Md("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")})),tm(this,"deletePendingSessionRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=qy,this.client.events.emit("session_request_expire",{id:e}))})),tm(this,"deletePendingAuthRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])})),tm(this,"setExpiry",(async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))})),tm(this,"setProposal",(async(e,t)=>{this.client.core.expirer.set(e,vc(Dy.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)})),tm(this,"setAuthRequest",(async(e,t)=>{const{request:r,pairingTopic:i,transportType:n=Zl.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:i,verifyContext:r.verifyContext,transportType:n})})),tm(this,"setPendingSessionRequest",(async e=>{const{id:t,topic:r,params:i,verifyContext:n}=e,s=i.request.expiryTimestamp||vc(Dy.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:i,verifyContext:n})})),tm(this,"sendRequest",(async e=>{const{topic:t,method:r,params:n,expiry:s,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:h,tvf:u}=e,d=fl(r,n,a);let l;const f=!!h;try{const e=f?nd:id;l=await this.client.core.crypto.encode(t,d,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),e}let p;if(Vy.includes(r)){const e=cd(JSON.stringify(d)),t=cd(l);p=await this.client.core.verify.register({id:t,decryptedId:e})}const g=Dy[r].req;if(g.attestation=p,s&&(g.ttl=s),o&&(g.id=o),this.client.core.history.set(t,d),f){const e=Sd(h,t,l);await i.g.Linking.openURL(e,this.client.name)}else{const e=Dy[r].req;s&&(e.ttl=s),o&&(e.id=o),e.tvf=em(Qy({},u),{correlationId:d.id}),c?(e.internal=em(Qy({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,l,e)):this.client.core.relayer.publish(t,l,e).catch((e=>this.client.logger.error(e)))}return d.id})),tm(this,"sendResult",(async e=>{const{id:t,topic:r,result:n,throwOnFailedPublish:s,encodeOpts:o,appLink:a}=e,c=pl(t,n);let h;const u=a&&typeof(null==i.g?void 0:i.g.Linking)<"u";try{const e=u?nd:id;h=await this.client.core.crypto.encode(r,c,em(Qy({},o||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${r} failed`),e}let d,l;try{d=await this.client.core.history.get(r,t);const e=d.request;try{this.shouldSetTVF(e.method,e.params)&&(l=this.getTVFParams(t,e.params,n))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${r}, ${t}) failed`),e}if(u){const e=Sd(a,r,h);await i.g.Linking.openURL(e,this.client.name)}else{const e=d.request.method,i=Dy[e].res;i.tvf=em(Qy({},l),{correlationId:t}),s?(i.internal=em(Qy({},i.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,h,i)):this.client.core.relayer.publish(r,h,i).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)})),tm(this,"sendError",(async e=>{const{id:t,topic:r,error:n,encodeOpts:s,rpcOpts:o,appLink:a}=e,c=gl(t,n);let h;const u=a&&typeof(null==i.g?void 0:i.g.Linking)<"u";try{const e=u?nd:id;h=await this.client.core.crypto.encode(r,c,em(Qy({},s||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${r} failed`),e}let d;try{d=await this.client.core.history.get(r,t)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${r}, ${t}) failed`),e}if(u){const e=Sd(a,r,h);await i.g.Linking.openURL(e,this.client.name)}else{const e=d.request.method,t=o||Dy[e].res;this.client.core.relayer.publish(r,h,t)}await this.client.core.history.resolve(c)})),tm(this,"cleanup",(async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let r=!1;wc(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{wc(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])})),tm(this,"onProviderMessageEvent",(async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)})),tm(this,"onRelayEventRequest",(async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()})),tm(this,"processRequestsQueue",(async()=>{if(this.requestQueue.state!==By){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=By;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=qy}else this.client.logger.info("Request queue already active, skipping...")})),tm(this,"processRequest",(async e=>{const{topic:t,payload:r,attestation:i,transportType:n,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:i,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});default:return this.client.logger.info(`Unsupported request method ${o}`)}})),tm(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r,transportType:i}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}})),tm(this,"onRelayEventUnknownPayload",(e=>{const{topic:t}=e,{message:r}=Pd("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)})),tm(this,"shouldIgnorePairingRequest",(e=>{const{topic:t,requestMethod:r}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(r))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)})),tm(this,"onSessionProposeRequest",(async e=>{const{topic:t,payload:r,attestation:i,encryptedId:n}=e,{params:s,id:o}=r;try{const e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(zf)),this.isValidConnect(Qy({},r.params));const a=s.expiryTimestamp||vc(Dy.wc_sessionPropose.req.ttl),c=Qy({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);const h=await this.getVerifyContext({attestationId:i,hash:cd(JSON.stringify(r)),encryptedId:n,metadata:c.proposer.metadata});e?.addTrace(Cf),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:h})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:Dy.wc_sessionPropose.autoReject}),this.client.logger.error(e)}})),tm(this,"onSessionProposeResponse",(async(e,t,r)=>{const{id:i}=t;if(xl(t)){const{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});const s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(i,{sessionTopic:c,pairingTopic:e,proposalId:i,publicKey:o});const h=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:e})}else if(Ol(t)){await this.client.proposal.delete(i,Md("USER_DISCONNECTED"));const e=_c("session_connect",i);if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}})),tm(this,"onSessionSettleRequest",(async(e,t)=>{const{id:r,params:i}=t;try{this.isValidSessionSettleRequest(i);const{relay:r,controller:n,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:c,sessionConfig:h}=t.params,u=[...this.pendingSessions.values()].find((t=>t.sessionTopic===e));if(!u)return this.client.logger.error(`Pending session not found for topic ${e}`);const d=this.client.proposal.get(u.proposalId),l=em(Qy(Qy(Qy({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:u.pairingTopic,requiredNamespaces:d.requiredNamespaces,optionalNamespaces:d.optionalNamespaces,controller:n.publicKey,self:{publicKey:u.publicKey,metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),c&&{scopedProperties:c}),h&&{sessionConfig:h}),{transportType:Zl.relay});await this.client.session.set(l.topic,l),await this.setExpiry(l.topic,l.expiry),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:l.peer.metadata}),this.client.events.emit("session_connect",{session:l}),this.events.emit(_c("session_connect",u.proposalId),{session:l}),this.pendingSessions.delete(u.proposalId),this.deleteProposal(u.proposalId,!1),this.cleanupDuplicatePairings(l),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),tm(this,"onSessionSettleResponse",(async(e,t)=>{const{id:r}=t;xl(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(_c("session_approve",r),{})):Ol(t)&&(await this.client.session.delete(e,Md("USER_DISCONNECTED")),this.events.emit(_c("session_approve",r),{error:t.error}))})),tm(this,"onSessionUpdateRequest",(async(e,t)=>{const{params:r,id:i}=t;try{const t=`${e}_session_update`,n=Xd.get(t);if(n&&this.isRequestOutOfSync(n,i))return this.client.logger.warn(`Discarding out of sync request - ${i}`),void this.sendError({id:i,topic:e,error:Md("INVALID_UPDATE_REQUEST")});this.isValidUpdate(Qy({topic:e},r));try{Xd.set(t,i),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw Xd.delete(t),e}this.client.events.emit("session_update",{id:i,topic:e,params:r})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}})),tm(this,"isRequestOutOfSync",((e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3))),tm(this,"onSessionUpdateResponse",((e,t)=>{const{id:r}=t,i=_c("session_update",r);if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners`);xl(t)?this.events.emit(_c("session_update",r),{}):Ol(t)&&this.events.emit(_c("session_update",r),{error:t.error})})),tm(this,"onSessionExtendRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,vc(Uy)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),tm(this,"onSessionExtendResponse",((e,t)=>{const{id:r}=t,i=_c("session_extend",r);if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners`);xl(t)?this.events.emit(_c("session_extend",r),{}):Ol(t)&&this.events.emit(_c("session_extend",r),{error:t.error})})),tm(this,"onSessionPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),tm(this,"onSessionPingResponse",((e,t)=>{const{id:r}=t,i=_c("session_ping",r);setTimeout((()=>{if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners 2176`);xl(t)?this.events.emit(_c("session_ping",r),{}):Ol(t)&&this.events.emit(_c("session_ping",r),{error:t.error})}),500)})),tm(this,"onSessionDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(Hl,(async()=>{t(await this.deleteSession({topic:e,id:r}))}))})),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:Md("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(e){this.client.logger.error(e)}})),tm(this,"onSessionRequest",(async e=>{var t,r,i;const{topic:n,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:h,params:u}=s;try{await this.isValidRequest(Qy({topic:n},u));const e=this.client.session.get(n),s={id:h,topic:n,params:u,verifyContext:await this.getVerifyContext({attestationId:o,hash:cd(JSON.stringify(fl("wc_sessionRequest",u,h))),encryptedId:a,metadata:e.peer.metadata,transportType:c})};await this.setPendingSessionRequest(s),c===Zl.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(s):(this.addSessionRequestToSessionRequestQueue(s),this.processSessionRequestQueue())}catch(e){await this.sendError({id:h,topic:n,error:e}),this.client.logger.error(e)}})),tm(this,"onSessionRequestResponse",((e,t)=>{const{id:r}=t,i=_c("session_request",r);if(0===this.events.listenerCount(i))throw new Error(`emitting ${i} without any listeners`);xl(t)?this.events.emit(_c("session_request",r),{result:t.result}):Ol(t)&&this.events.emit(_c("session_request",r),{error:t.error})})),tm(this,"onSessionEventRequest",(async(e,t)=>{const{id:r,params:i}=t;try{const t=`${e}_session_event_${i.event.name}`,n=Xd.get(t);if(n&&this.isRequestOutOfSync(n,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(Qy({topic:e},i)),this.client.events.emit("session_event",{id:r,topic:e,params:i}),Xd.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),tm(this,"onSessionAuthenticateResponse",((e,t)=>{const{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),xl(t)?this.events.emit(_c("session_request",r),{result:t.result}):Ol(t)&&this.events.emit(_c("session_request",r),{error:t.error})})),tm(this,"onSessionAuthenticateRequest",(async e=>{var t;const{topic:r,payload:i,attestation:n,encryptedId:s,transportType:o}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=i.params,h=await this.getVerifyContext({attestationId:n,hash:cd(JSON.stringify(i)),encryptedId:s,metadata:e.metadata,transportType:o}),u={requester:e,pairingTopic:r,id:i.id,authPayload:a,verifyContext:h,expiryTimestamp:c};await this.setAuthRequest(i.id,{request:u,pairingTopic:r,transportType:o}),o===Zl.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:i.params,id:i.id,verifyContext:h})}catch(e){this.client.logger.error(e);const t=i.params.requester.publicKey,n=await this.client.core.crypto.generateKeyPair(),s=this.getAppLinkIfEnabled(i.params.requester.metadata,o),a={type:1,receiverPublicKey:t,senderPublicKey:n};await this.sendError({id:i.id,topic:r,error:e,encodeOpts:a,rpcOpts:Dy.wc_sessionAuthenticate.autoReject,appLink:s})}})),tm(this,"addSessionRequestToSessionRequestQueue",(e=>{this.sessionRequestQueue.queue.push(e)})),tm(this,"cleanupAfterResponse",(e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=qy,this.processSessionRequestQueue()}),(0,Y.toMiliseconds)(this.requestQueueDelay))})),tm(this,"cleanupPendingSentRequestsForTopic",(({topic:e,error:t})=>{const r=this.client.core.history.pending;r.length>0&&r.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const r=_c("session_request",e.request.id);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);this.events.emit(_c("session_request",e.request.id),{error:t})}))})),tm(this,"processSessionRequestQueue",(()=>{if(this.sessionRequestQueue.state===By)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=By,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")})),tm(this,"emitSessionRequest",(e=>{this.client.events.emit("session_request",e)})),tm(this,"onPairingCreated",(e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:fl("wc_sessionPropose",em(Qy({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})})),tm(this,"isValidConnect",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:i,sessionProperties:n,scopedProperties:s,relays:o}=e;if(Rd(t)||await this.isValidPairingTopic(t),!function(e,t){let r=!1;return t&&!e?r=!0:e&&kd(e)&&e.length&&e.forEach((e=>{r=Bd(e)})),r}(o,!0)){const{message:e}=Pd("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(e)}if(!Rd(r)&&0!==Td(r)&&this.validateNamespaces(r,"requiredNamespaces"),!Rd(i)&&0!==Td(i)&&this.validateNamespaces(i,"optionalNamespaces"),Rd(n)||this.validateSessionProps(n,"sessionProperties"),!Rd(s)){this.validateSessionProps(s,"scopedProperties");const e=Object.keys(r||{}).concat(Object.keys(i||{}));if(!Object.keys(s).every((t=>e.includes(t))))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(s)}, required/optional namespaces: ${JSON.stringify(e)}`)}})),tm(this,"validateNamespaces",((e,t)=>{const r=function(e,t,r){let i=null;if(e&&Td(e)){const n=zd(e,t);n&&(i=n);const s=Ud(e,t,r);s&&(i=s)}else i=Pd("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}(e,"connect()",t);if(r)throw new Error(r.message)})),tm(this,"isValidApprove",(async e=>{if(!$d(e))throw new Error(Pd("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:i,sessionProperties:n,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const o=this.client.proposal.get(t),a=qd(r,"approve()");if(a)throw new Error(a.message);const c=Hd(o.requiredNamespaces,r,"approve()");if(c)throw new Error(c.message);if(!Cd(i,!0)){const{message:e}=Pd("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(e)}if(Rd(n)||this.validateSessionProps(n,"sessionProperties"),!Rd(s)){this.validateSessionProps(s,"scopedProperties");const e=new Set(Object.keys(r));if(!Object.keys(s).every((t=>e.has(t))))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}})),tm(this,"isValidReject",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!function(e){return!!(e&&"object"==typeof e&&e.code&&Nd(e.code,!1)&&e.message&&Cd(e.message,!1))}(r)){const{message:e}=Pd("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}})),tm(this,"isValidSessionSettleRequest",(e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:i,expiry:n}=e;if(!Bd(t)){const{message:e}=Pd("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=function(e,t){let r=null;return Cd(e?.publicKey,!1)||(r=Pd("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}(r,"onSessionSettleRequest()");if(s)throw new Error(s.message);const o=qd(i,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(wc(n)){const{message:e}=Pd("EXPIRED","onSessionSettleRequest()");throw new Error(e)}})),tm(this,"isValidUpdate",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const i=this.client.session.get(t),n=qd(r,"update()");if(n)throw new Error(n.message);const s=Hd(i.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)})),tm(this,"isValidExtend",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)})),tm(this,"isValidRequest",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:i,expiry:n}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!Vd(s,i)){const{message:e}=Pd("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(e)}if(!function(e){return!(Rd(e)||!Cd(e.method,!1))}(r)){const{message:e}=Pd("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!Fd(s,i,r.method)){const{message:e}=Pd("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(n&&!function(e,t){return Nd(e,!1)&&e<=t.max&&e>=t.min}(n,zy)){const{message:e}=Pd("MISSING_OR_INVALID",`request() expiry: ${n}. Expiry must be a number (in seconds) between ${zy.min} and ${zy.max}`);throw new Error(e)}})),tm(this,"isValidRespond",(async e=>{var t;if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:i}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(!function(e){return!(Rd(e)||Rd(e.result)&&Rd(e.error)||!Nd(e.id,!1)||!Cd(e.jsonrpc,!1))}(i)){const{message:e}=Pd("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(e)}})),tm(this,"isValidPing",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),tm(this,"isValidEmit",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:i}=e;await this.isValidSessionTopic(t);const{namespaces:n}=this.client.session.get(t);if(!Vd(n,i)){const{message:e}=Pd("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(e)}if(!function(e){return!(Rd(e)||!Cd(e.name,!1))}(r)){const{message:e}=Pd("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!Kd(n,i,r.name)){const{message:e}=Pd("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}})),tm(this,"isValidDisconnect",(async e=>{if(!$d(e)){const{message:t}=Pd("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),tm(this,"isValidAuthenticate",(e=>{const{chains:t,uri:r,domain:i,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!Cd(r,!1))throw new Error("uri is required parameter");if(!Cd(i,!1))throw new Error("domain is required parameter");if(!Cd(n,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>Xa(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=Xa(t[0]);if("eip155"!==s)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")})),tm(this,"getVerifyContext",(async e=>{const{attestationId:t,hash:r,encryptedId:i,metadata:n,transportType:s}=e,o={verified:{verifyUrl:n.verifyUrl||_f,validation:"UNKNOWN",origin:n.url||""}};try{if(s===Zl.link_mode){const e=this.getAppLinkIfEnabled(n,s);return o.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",o}const e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:i,verifyUrl:n.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o})),tm(this,"validateSessionProps",((e,t)=>{Object.values(e).forEach(((r,i)=>{if(null==r){const{message:n}=Pd("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[i]}`);throw new Error(n)}}))})),tm(this,"getPendingAuthRequest",(e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0})),tm(this,"addToRecentlyDeleted",((e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}})),tm(this,"checkRecentlyDeleted",(e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:r}=Pd("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(r)}})),tm(this,"isLinkModeEnabled",((e,t)=>{var r,n,s,o,a,c,h,u,d;return!(!e||t!==Zl.link_mode)&&(!0===(null==(n=null==(r=this.client.metadata)?void 0:r.redirect)?void 0:n.linkMode)&&void 0!==(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(h=e?.redirect)?void 0:h.universal)&&""!==(null==(u=e?.redirect)?void 0:u.universal)&&!0===(null==(d=e?.redirect)?void 0:d.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==i.g?void 0:i.g.Linking)<"u")})),tm(this,"getAppLinkIfEnabled",((e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0})),tm(this,"handleLinkModeMessage",(({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=Ic(e,"topic")||"",r=decodeURIComponent(Ic(e,"wc_ev")||""),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:Zl.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:i})})),tm(this,"registerLinkModeListeners",(async()=>{var e;if(Oc()||sc()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==i.g?void 0:i.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}})),tm(this,"shouldSetTVF",((e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;const{request:r}=t;return Object.keys($y).includes(r.method)})),tm(this,"getTVFParams",((e,t,r)=>{var i,n;try{const s=t.request.method,o=this.extractTxHashesFromResult(s,r);return em(Qy({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(n=null==(i=t.request.params)?void 0:i[0])?void 0:n.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}})),tm(this,"isValidContractData",(e=>{var t;if(!e)return!1;try{const r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;const i=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(i)&&i.length%2==0}catch{}return!1})),tm(this,"extractTxHashesFromResult",((e,t)=>{try{if("string"==typeof t)return[t];const r=t[$y[e].key];if(kd(r))return"solana_signAllTransactions"===e?r.map((e=>function(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);const i=r[0];if(0===i)throw new Error("No signatures found");const n=1+64*i;if(r.length<n)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Ga.from(e,"base64").slice(1,65);return po.encode(s)}(e))):r;if("string"==typeof r)return[r]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]}))}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[e,r]of Object.entries(t))for(const t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Pd("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ql,(e=>{this.onProviderMessageEvent(e)}))}async onRelayMessage(e){const{topic:t,message:r,attestation:i,transportType:n}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(Ky)?this.client.auth.authKeys.get(Ky):{responseTopic:void 0,publicKey:void 0};try{const e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:n===Zl.link_mode?nd:id});Sl(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:i,transportType:n,encryptedId:cd(r)})):Il(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:n}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:n}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(mf,(async e=>{const{topic:t,id:r}=mc(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,Pd("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,Pd("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))}))}registerPairingEvents(){this.client.core.pairing.events.on(cf,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(uf,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!Cd(e,!1)){const{message:t}=Pd("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Pd("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(wc(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Pd("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Cd(e,!1)){const{message:t}=Pd("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Pd("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(wc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Pd("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Pd("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(Cd(e,!1)){const{message:t}=Pd("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=Pd("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!function(e){return"number"==typeof e}(e)){const{message:t}=Pd("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Pd("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(wc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Pd("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class im extends Zb{constructor(e,t){super(e,t,"proposal",Ry),this.core=e,this.logger=t}}class nm extends Zb{constructor(e,t){super(e,t,"session",Ry),this.core=e,this.logger=t}}class sm extends Zb{constructor(e,t){super(e,t,"request",Ry,(e=>e.id)),this.core=e,this.logger=t}}class om extends Zb{constructor(e,t){super(e,t,"authKeys",Fy,(()=>Ky)),this.core=e,this.logger=t}}class am extends Zb{constructor(e,t){super(e,t,"pairingTopics",Fy),this.core=e,this.logger=t}}class cm extends Zb{constructor(e,t){super(e,t,"requests",Fy,(e=>e.id)),this.core=e,this.logger=t}}var hm=Object.defineProperty,um=(e,t,r)=>((e,t,r)=>t in e?hm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class dm{constructor(e,t){this.core=e,this.logger=t,um(this,"authKeys"),um(this,"pairingTopics"),um(this,"requests"),this.authKeys=new om(this.core,this.logger),this.pairingTopics=new am(this.core,this.logger),this.requests=new cm(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var lm=Object.defineProperty,fm=(e,t,r)=>((e,t,r)=>t in e?lm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class pm extends vt{constructor(e){super(e),fm(this,"protocol","wc"),fm(this,"version",2),fm(this,"name",Cy),fm(this,"metadata"),fm(this,"core"),fm(this,"logger"),fm(this,"events",new H.EventEmitter),fm(this,"engine"),fm(this,"session"),fm(this,"proposal"),fm(this,"pendingRequest"),fm(this,"auth"),fm(this,"signConfig"),fm(this,"on",((e,t)=>this.events.on(e,t))),fm(this,"once",((e,t)=>this.events.once(e,t))),fm(this,"off",((e,t)=>this.events.off(e,t))),fm(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),fm(this,"removeAllListeners",(e=>this.events.removeAllListeners(e))),fm(this,"connect",(async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"pair",(async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"approve",(async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"reject",(async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"update",(async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"extend",(async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"request",(async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"respond",(async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"ping",(async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"emit",(async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"disconnect",(async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"find",(e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"getPendingSessionRequests",(()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}})),fm(this,"authenticate",(async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"formatAuthMessage",(e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"approveSessionAuthenticate",(async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),fm(this,"rejectSessionAuthenticate",(async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),this.name=e?.name||Cy,this.metadata=e?.metadata||hc(),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Le()(Ze({level:e?.logger||Ny}));this.core=e?.core||new ky(e),this.logger=et(t,this.name),this.session=new nm(this.core,this.logger),this.proposal=new im(this.core,this.logger),this.pendingRequest=new sm(this.core,this.logger),this.engine=new rm(this),this.auth=new dm(this.core,this.logger)}static async init(e){const t=new pm(e);return await t.initialize(),t}get context(){return Qe(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout((()=>{this.engine.processRelayMessageCache()}),(0,Y.toMiliseconds)(Y.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}class gm extends Error{constructor(){super(),Object.setPrototypeOf(this,gm.prototype)}}class bm extends Error{constructor(e){super(e),Object.setPrototypeOf(this,bm.prototype)}}var ym,mm;!function(e){e.Mainnet="tron:0x2b6653dc",e.Shasta="tron:0x94a9059e",e.Nile="tron:0xcd8690dc"}(ym||(ym={})),function(e){e.signTransaction="tron_signTransaction",e.signMessage="tron_signMessage"}(mm||(mm={}));const vm=(e,t)=>({requiredNamespaces:{tron:{chains:[e],methods:[mm.signTransaction,mm.signMessage],events:[]}},pairingTopic:t});function wm(e){return wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(e)}function _m(){_m=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,r){return e[t]=r}}function u(e,t,r,i){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new k(i||[]);return n(o,"_invoke",{value:O(e,r,a)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",p="executing",g="completed",b={};function y(){}function m(){}function v(){}var w={};h(w,o,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(T([])));E&&E!==r&&i.call(E,o)&&(w=E);var S=v.prototype=y.prototype=Object.create(w);function I(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(n,s,o,a){var c=d(e[n],e,s);if("throw"!==c.type){var h=c.arg,u=h.value;return u&&"object"==wm(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(u).then((function(e){h.value=e,o(h)}),(function(e){return r("throw",e,o,a)}))}a(c.arg)}var s;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){r(e,i,t,n)}))}return s=s?s.then(n,n):n()}})}function O(t,r,i){var n=l;return function(s,o){if(n===p)throw Error("Generator is already running");if(n===g){if("throw"===s)throw o;return{value:e,done:!0}}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var c=A(a,i);if(c){if(c===b)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===l)throw n=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var h=d(t,r,i);if("normal"===h.type){if(n=i.done?g:f,h.arg===b)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(n=g,i.method="throw",i.arg=h.arg)}}}function A(t,r){var i=r.method,n=t.iterator[i];if(n===e)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),b;var s=d(n,t.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,b;var o=s.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(wm(t)+" is not iterable")}return m.prototype=v,n(S,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=h(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,h(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},I(x.prototype),h(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,i,n,s){void 0===s&&(s=Promise);var o=new x(u(e,r,i,n),s);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},I(S),h(S,c,"Generator"),h(S,o,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return a.type="throw",a.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),h=i.call(o,"finallyLoc");if(c&&h){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;M(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:T(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),b}},t}function Em(e,t,r,i,n,s,o){try{var a=e[s](o),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(i,n)}function Sm(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var s=e.apply(t,r);function o(e){Em(s,i,n,o,a,"next",e)}function a(e){Em(s,i,n,o,a,"throw",e)}o(void 0)}))}}window.Pusher=V,window.Echo=new $({broadcaster:"pusher",key:"vitrixcasino",cluster:"mt1",encrypted:!0,wsHost:window.location.hostname,wsPort:6001,wssPort:6001,forceTLS:!0,disableStats:!0}),console.log("hola harvey comoo estas vamos tu puedes");var Im=new class{constructor(e){this._options=e.options,this._network=e.network,this._modalConfig=e.web3ModalConfig||{},this.web3Modal=new K({...this._modalConfig,projectId:this._options.projectId,chains:[this._network,...this._modalConfig.chains||[]]})}async connect(){const e=this._client??await pm.init(this._options),t=e.find(vm(this._network)).filter((e=>e.acknowledged));if(t.length){this._session=t[t.length-1],this._client=e,this._client=e;const r=Object.values(this._session.namespaces).map((e=>e.accounts)).flat();return this.address=r[0].split(":")[2],{address:this.address}}{const{uri:t,approval:r}=await e.connect(vm(this._network));return new Promise(((i,n)=>{t&&(this.web3Modal.openModal({uri:t,chains:[this._network]}),this.web3Modal.subscribeModal((e=>{!1===e.open&&n(new bm("Modal is closed."))}))),r().then((t=>{this._session=t,this._client=e;const r=Object.values(this._session.namespaces).map((e=>e.accounts)).flat();this.address=r[0].split(":")[2],i({address:this.address})})).catch(n).finally((()=>{this.web3Modal.closeModal()}))}))}}async disconnect(){if(!this._client||!this._session)throw new gm;await this._client.disconnect({topic:this._session.topic,reason:Md("USER_DISCONNECTED")}),this._session=void 0}get client(){if(this._client)return Object.assign({},this._client,{off:this._client.removeListener});throw new gm}async checkConnectStatus(){const e=this._client??await pm.init(this._options),t=e.find(vm(this._network)).filter((e=>e.acknowledged));if(t.length){this._session=t[t.length-1],this._client=e;const r=Object.values(this._session.namespaces).map((e=>e.accounts)).flat();return this.address=r[0].split(":")[2],{address:this.address}}return{address:""}}async signTransaction(e){if(this._client&&this._session){const{result:t}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:mm.signTransaction,params:{address:this.address,transaction:{...e}}}});return t}throw new gm}async signMessage(e){if(this._client&&this._session){const{signature:t}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:mm.signMessage,params:{address:this.address,message:e}}});return t}throw new gm}}({network:ym.Mainnet,options:{relayUrl:"wss://relay.walletconnect.com",projectId:"",metadata:{name:"Vitrix Casino",description:"Apuesta con USDT en la red TRON",url:"https://vitrix.io",icons:["https://vitrix.io//storage/themes/October2024/bnwl1WSwXAvMk33o97Pq.png"]}}});window.connectWallet=Sm(_m().mark((function e(){return _m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Im.connect();case 3:document.getElementById("walletAddress").innerText="Conectado: "+Im.address,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error al conectar la billetera:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))})()})();
//# sourceMappingURL=app.js.map